---
title: 負荷の急増に対応できる B シリーズ - Azure Virtual Machines
description: 負荷の急増に対応できる B シリーズの Azure VM のサイズについて説明します。
services: virtual-machines
ms.subservice: sizes
author: ayshakeen
ms.service: virtual-machines
ms.topic: conceptual
ms.date: 02/03/2020
ms.author: ayshak
ms.openlocfilehash: 81bfde964fa993b69bc464214dab0810a8f2bfe5
ms.sourcegitcommit: 2ff0d073607bc746ffc638a84bb026d1705e543e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/06/2020
ms.locfileid: "87832588"
---
# <a name="b-series-burstable-virtual-machine-sizes"></a>負荷の急増に対応できる B シリーズ仮想マシンのサイズ

Web サーバー、概念実証、小規模なデータベース、開発ビルド環境など、CPU が常時最大限のパフォーマンスを発揮する必要のないワークロードでは、B シリーズ VM が最適です。 このようなワークロードでは通常、負荷の急増に対応できることがパフォーマンスの要件となります。 B シリーズでは、購入する VM サイズに一定のベースライン パフォーマンスが約束されており、その VM インスタンスの使用量がベースラインを下回る場合には "クレジット" が蓄積されていきます。 VM にクレジットが蓄積されていると、アプリケーションで必要な CPU パフォーマンスが高まった場合にベースライン以上のパフォーマンス (上限: vCPU のパフォーマンスの 100%) を実現できます。

B シリーズには、次の VM サイズが用意されています。

Premium Storage: サポートされています

Premium Storage キャッシュ:サポートされていません

ライブ マイグレーション: サポートされています

メモリ保持更新: サポートされています

| サイズ | vCPU | メモリ:GiB | 一時ストレージ (SSD) GiB | VM のベース CPU パフォーマンス | VM の最大 CPU パフォーマンス | 初期のクレジット | 1 時間に蓄積されるクレジット | 蓄積できるクレジットの最大値 | 最大データ ディスク数 | キャッシュが有効な場合および一時ストレージの最大スループットIOPS/MBps | キャッシュが無効な場合の最大ディスク スループット: IOPS/MBps | 最大 NIC 数 |
|---|---|---|---|---|---|---|---|---|---|---|---|---|
| Standard_B1ls<sup>1</sup> | 1  | 0.5 | 4   | 5%   | 100%  | 30  | 3   | 72   | 2  | 200/10    | 160/10    | 2  |
| Standard_B1s              | 1  | 1   | 4   | 10%  | 100%  | 30  | 6   | 144  | 2  | 400/10    | 320/10    | 2  |
| Standard_B1ms             | 1  | 2   | 4   | 20%  | 100%  | 30  | 12  | 288  | 2  | 800/10    | 640/10    | 2  |
| Standard_B2s              | 2  | 4   | 8   | 40%  | 200%  | 60  | 24  | 576  | 4  | 1600/15   | 1280/15   | 3  |
| Standard_B2ms             | 2  | 8   | 16  | 60%  | 200%  | 60  | 36  | 864  | 4  | 2400/22.5 | 1920/22.5 | 3  |
| Standard_B4ms             | 4  | 16  | 32  | 90%  | 400%  | 120 | 54  | 1,296 | 8  | 3600/35   | 2880/35   | 4  |
| Standard_B8ms             | 8  | 32  | 64  | 135% | 800%  | 240 | 81  | 1944 | 16 | 4320/50   | 4320/50   | 4  |
| Standard_B12ms            | 12 | 48  | 96  | 202% | 1200% | 360 | 121 | 2909 | 16 | 6480/75   | 4320/50   | 6  |
| Standard_B16ms            | 16 | 64  | 128 | 270% | 1600% | 480 | 162 | 3888 | 32 | 8640/100  | 4320/50   | 8  |
| Standard_B20ms            | 20 | 80  | 160 | 337% | 2000% | 600 | 203 | 4860 | 32 | 10800/125 | 4320/50   | 8  |

<sup>1</sup> B1ls は Linux でのみサポートされています

## <a name="workload-example"></a>ワークロードの例

出社/退社アプリケーションについて考えてみましょう。 このアプリケーションは、営業時間中 CPU バーストを必要としますが、営業時間外はそれほど多くの処理能力を必要としません。 この例のワークロードでは、64 GiB の RAM を搭載した 16vCPU 仮想マシンが効率的に機能する必要があります。

次の表は、1 時間あたりのトラフィック データを示しており、グラフは、そのトラフィックを視覚的に表現したものです。

B16 の特徴:

最大 CPU パフォーマンス: 16vCPU * 100% = 1600%

ベースライン: 270%

![1 時間あたりのトラフィック データのグラフ](./media/b-series-burstable/office-workload.png)

| シナリオ | Time | CPU 使用率 (%) | 蓄積されるクレジット<sup>1</sup> | 使用可能なクレジット |
| --- | --- | --- | --- | --- |
| B16ms のデプロイ | デプロイ | デプロイ  | 480 (初期クレジット数) | 480 |
| トラフィックなし | 0:00 | 0 | 162 | 642 |
| トラフィックなし | 1:00 | 0 | 162 | 804 |
| トラフィックなし | 2:00 | 0 | 162 | 966 |
| トラフィックなし | 3:00 | 0 | 162 | 1128 |
| トラフィックなし | 4:00 | 0 | 162 | 1290 |
| トラフィックなし | 5:00 | 0 | 162 | 1452 |
| 低トラフィック | 6:00 | 270 | 0 | 1452 |
| 従業員が出社 (アプリは 80% の vCPU を必要とする) | 7:00 | 1280 | -606 | 846 |
| 従業員が次々に出社 (アプリは 80% の vCPU を必要とする) | 8:00 | 1280 | -606 | 240 |
| 低トラフィック | 9:00 | 270 | 0 | 240 |
| 低トラフィック | 10:00 | 100 | 102 | 342 |
| 低トラフィック | 11:00 | 50 | 132 | 474 |
| 低トラフィック | 12:00 | 100 | 102 | 576 |
| 低トラフィック | 13:00 | 100 | 102 | 678 |
| 低トラフィック | 14:00 | 50 | 132 | 810 |
| 低トラフィック | 15:00 | 100 | 102 | 912 |
| 低トラフィック | 16:00 | 100 | 102 | 1014 |
| 従業員が退社 (アプリは 100% の vCPU を必要とする) | 17:00 | 1600 | -798 | 216 |
| 低トラフィック | 18:00 | 270 | 0 | 216 |
| 低トラフィック | 19:00 | 270 | 0 | 216 |
| 低トラフィック | 20:00 | 50 | 132 | 348 |
| 低トラフィック | 21:00 | 50 | 132 | 480 |
| トラフィックなし | 22:00 | 0 | 162 | 642 |
| トラフィックなし | 23:00 | 0 | 162 | 804 |

<sup>1</sup> 1 時間に累積されるクレジット/使用されるクレジットは `((Base CPU perf of VM - CPU Usage) / 100) * 60 minutes` に等しい。  

16 台の vCPU と 64 GiB のメモリを搭載した D16s_v3 の場合、時間レートは 1 時間あたり 0.936 ドル (1 か月あたり 673.92 ドル) で、16 台の vCPU と 64 GiB のメモリを搭載した B16ms の場合、レートは 1 時間あたり 0.794 ドル (1 か月あたり 547.86 ドル) です。 <b>結果として、15% の節約になります。</b>

## <a name="q--a"></a>Q & A

### <a name="q-what-happens-if-the-credits-run-out"></a>Q:クレジットが不足した場合はどうなりますか?
**A**: クレジットを使い切ると、VM がベースライン パフォーマンスに戻ります。

### <a name="q-how-do-you-get-135-baseline-performance-from-a-vm"></a>Q: VM のベースライン パフォーマンスが 135% というのは、どういうことでしょうか?

**A**: 135% というのは、その VM サイズを構成する 8 つの vCPU により共有される数字です。 たとえば、アプリケーションで 8 個あるコアのうち 4 個を使用してバッチ処理を実行しており、その 4 つの vCPU の使用率がそれぞれ 30% であれば、VM の CPU パフォーマンスの合計は 120% になります。  つまり、ベースライン パフォーマンスとの差分となる 15% が、VM によりクレジット時間として蓄積されていくことになります。  逆に、(VM の CPU パフォーマンスの最大値は 800% であるわけですから) クレジットの残高があれば、同じ VM で 8 つの vCPU すべてについて 100% のパフォーマンスを使用することもできます。


### <a name="q-how-can-i-monitor-my-credit-balance-and-consumption"></a>Q:クレジットの残高や消費量を確認するにはどうすればよいでしょうか?

**A**: 今後数週間の間に、新しいメトリックを 2 つ導入する予定です。1 つが **Credit** で、VM で蓄積されたクレジットの数を確認できます。もう 1 つが **ConsumedCredit** で、蓄積した CPU クレジットをどれだけ消費したかを確認できます。    この 2 つのメトリックは、ポータルの [メトリック] ウィンドウのほか、プログラムを使って Azure Monitor API 経由で確認できるようにする予定です。

Azure でメトリック データにアクセスする方法の詳細については、「[Microsoft Azure のメトリックの概要](../azure-monitor/platform/data-platform.md)」を参照してください。

### <a name="q-how-are-credits-accumulated-and-consumed"></a>Q:クレジットはどのように蓄積され、消費されますか?

**A**: VM によるクレジットの蓄積と消費のスピードは、VM がベース パフォーマンス レベルで実行されている場合にクレジットの蓄積量と消費量がいずれもゼロになるように設定されています。  VM の実行中にベース パフォーマンス レベルを下回っていればクレジットが増加し、ベース パフォーマンス レベルよりも多く CPU を使用していればクレジットが減少します。

**例**: 小規模な勤怠データベース アプリケーション用に B1ms サイズの VM をデプロイしました。 このサイズでは、アプリケーションでベースラインとして vCPU の最大 20% を使用できます。この場合、1 分あたりに利用または蓄積できるクレジットは 0.2 となります。

このアプリケーションは、従業員の勤務日の始めと終わり、具体的には AM 7:00 ～ 9:00 と PM 4:00 ～ 6:00 の間にそれぞれ負荷が大きくなります。 それ以外の 20 時間はこのアプリケーションをほとんど使用しないため、vCPU の使用量はわずか 10% にまで下がります。 このピーク外の時間には、利用できるクレジットが 1 分あたり 0.2 でありながら 0.1 しか消費しません。このため、1 時間に 0.1 x 60 = 6 クレジットが蓄積されます。  つまり、ピーク外の 20 時間に合計 120 クレジットが蓄積されることになります。  

これに対して、ピーク時間にはアプリケーションの vCPU 使用率が平均 60% になります。ピーク時間であっても 1 分あたり 0.2 のクレジットを利用できるのは変わりませんが、今度は 1 分間にクレジットを 0.6 を消費しているため、1 分あたり正味 0.4 クレジット、1 時間あたりでは 0.4 x 60 = 24 クレジットを消費することになります。 ピーク時間は 1 日 4 時間であることから、ピーク時間のクレジット使用量は 4 x 24 = 96 となります。

ピーク外の時間に獲得したクレジット 120 からピーク時に消費したクレジット 96 を差し引くと、1 日あたり 24 クレジットが残ります。この分は、別の事情でアクティビティが急増した場合に使用することができます。

### <a name="q-how-can-i-calculate-credits-accumulated-and-used"></a>Q:累積されるクレジットと使用されるクレジットを計算するにはどうすればよいですか?

**A**: 次の数式を使用することができます。

(VM の基本 CPU パフォーマンス - CPU 使用率) / 100 = 1 分あたりに蓄積または使用されるクレジット

たとえば、上記のインスタンスの場合、ベースラインは 20%です。CPU 使用率が 10% であれば、1 分あたりに蓄積されるクレジットは、(20%-10%)/100 = 0.1 になります。

### <a name="q-does-the-b-series-support-premium-storage-data-disks"></a>Q: B シリーズでは、Premium Storage データ ディスクをサポートしていますか?

**A**: はい。B シリーズのどのサイズでも、Premium Storage データ ディスクをサポートしています。

### <a name="q-why-is-my-remaining-credit-set-to-0-after-a-redeploy-or-a-stopstart"></a>Q: 再デプロイまたは停止/起動後、クレジットの残りが 0 に設定されるのはなぜですか?

**A**: VM が "再デプロイ" されて VM が別のノードに移動すると、累計されたクレジットは失われます。 VM を起動/停止したが、同じノードにとどまっていれば、VM は 累積されたクレジットを保持します。 ノードで VM を新たに起動するたびに初期クレジットが取得されます (Standard_B8ms では 240 分)。

### <a name="q-what-happens-if-i-deploy-an-unsupported-os-image-on-b1ls"></a>Q:サポートされていない OS イメージを B1ls にデプロイするとどうなりますか?

**A**: B1ls は Linux イメージのみをサポートしているため、他の OS イメージをデプロイすると最善のカスタマー エクスペリエンスが得られない可能性があります。

## <a name="other-sizes-and-information"></a>その他のサイズと情報

- [汎用](sizes-general.md)
- [コンピューティングの最適化](sizes-compute.md)
- [メモリの最適化](sizes-memory.md)
- [ストレージの最適化](sizes-storage.md)
- [GPU の最適化](sizes-gpu.md)
- [ハイ パフォーマンス コンピューティング](sizes-hpc.md)

料金計算ツール: [料金計算ツール](https://azure.microsoft.com/pricing/calculator/)

ディスクの種類の詳細情報: [ディスクの種類](./linux/disks-types.md#ultra-disk)

## <a name="next-steps"></a>次のステップ

[Azure コンピューティング ユニット (ACU)](acu.md) を確認することで、Azure SKU 全体の処理性能を比較できます。