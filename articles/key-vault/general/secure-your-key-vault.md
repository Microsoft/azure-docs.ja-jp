---
title: キー コンテナーへのアクセスをセキュリティで保護する
description: Active Directory 認証とリソース エンドポイントを含む、Azure Key Vault のアクセス モデル。
services: key-vault
author: ShaneBala-keyvault
manager: ravijan
ms.service: key-vault
ms.subservice: general
ms.topic: conceptual
ms.date: 10/07/2020
ms.author: sudbalas
ms.openlocfilehash: 94034edfa1a5c6ffccd022b4cbf7bae42cc0bae3
ms.sourcegitcommit: f7eda3db606407f94c6dc6c3316e0651ee5ca37c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/05/2021
ms.locfileid: "102212469"
---
# <a name="secure-access-to-a-key-vault"></a>キー コンテナーへのアクセスをセキュリティで保護する

Azure Key Vault は、暗号化キーとシークレット (証明書、接続文字列、パスワードなど) を保護するクラウド サービスです。 このデータは機密性が高く、ビジネス上重要であるため、承認されたアプリケーションとユーザーだけを許可することで、ご利用のキー コンテナーへのアクセスをセキュリティで保護する必要があります。 この記事では、キー コンテナーのアクセス モデルの概要について説明します。 認証と承認について、およびご利用のキー コンテナーへのアクセスをセキュリティで保護する方法について説明します。

Key Vault の詳細については、「[Azure Key Vault について](overview.md)」を参照してください。キー コンテナーに格納できる内容の詳細については、「[キー、シークレット、証明書について](about-keys-secrets-certificates.md)」を参照してください。

## <a name="access-model-overview"></a>アクセス モデルの概要

キー コンテナーへのアクセスは、2 つのインターフェイス (**管理プレーン** と **データ プレーン**) を使用して制御します。 管理プレーンでは、Key Vault 自体の管理を行います。 このプレーンでは、キー コンテナーの作成および削除、Key Vault のプロパティの取得、アクセス ポリシーの更新などの操作を行います。 データ プレーンでは、キー コンテナーに格納されているデータを操作します。 キー、シークレット、証明書の追加、削除、および変更を行うことができます。

認証については、両方のプレーンで [Azure Active Directory (Azure AD)](../../active-directory/fundamentals/active-directory-whatis.md) が使用されます。 認可については、管理プレーンでは [Azure ロールベースのアクセス制御 (Azure RBAC)](../../role-based-access-control/overview.md) が使用され、データ プレーンでは [Key Vault アクセス ポリシー](./assign-access-policy-portal.md)と [Key Vault データ プレーン操作用の Azure RBAC](./rbac-guide.md) が使用されます。

いずれのプレーン内でもキー コンテナーにアクセスするには、すべての呼び出し元 (ユーザーまたはアプリケーション) が適切な認証と承認を必要とします。 認証では、呼び出し元の ID が確立されます。 承認では、呼び出し元が実行できる操作が決定されます。 Key Vault による認証は、特定の **セキュリティ プリンシパル** の ID の認証を行う [Azure Active Directory (Azure AD)](../../active-directory/fundamentals/active-directory-whatis.md) と連携して機能します。

セキュリティ プリンシパルは、Azure リソースへのアクセスを要求するユーザー、グループ、サービス、またはアプリケーションを表すオブジェクトです。 すべてのセキュリティ プリンシパルには、Azure によって一意の **オブジェクト ID** が割り当てられます。

* **ユーザー** セキュリティ プリンシパルでは、Azure Active Directory 内にプロファイルを持つ個人が示されます。

* **グループ** セキュリティ プリンシパルでは、Azure Active Directory 内に作成されたユーザーのセットが示されます。 グループに割り当てられたすべてのロールまたはアクセス許可は、グループ内のすべてのユーザーに付与されます。

* **サービス プリンシパル** は、アプリケーションまたはサービス、つまりユーザーまたはグループではなくコードを示すセキュリティ プリンシパルの一種です。 サービス プリンシパルのオブジェクト ID は **クライアント ID** と呼ばれ、ユーザー名のように機能します。 サービス プリンシパルの **クライアント シークレット** または **証明書** は、パスワードのように機能します。 多くの Azure サービスによって、**クライアント ID** および **証明書** の自動管理による [マネージド ID](../../active-directory/managed-identities-azure-resources/overview.md) の割り当てがサポートされます。 マネージド ID は、Azure 内での認証で最も安全かつ推奨されるオプションです。

Key Vault の認証の詳細については、「[Azure Key Vault に対する認証](authentication.md)」を参照してください

## <a name="key-vault-authentication-options"></a>Key Vault の認証オプション

Azure サブスクリプション内でキー コンテナーを作成すると、作成したキー コンテナーは、そのサブスクリプションの Azure AD テナントに自動的に関連付けられます。 両方のプレーンの呼び出し元はすべて、このテナントに登録されている必要があり、キー コンテナーにアクセスするには認証を行う必要があります。 どちらの場合も、アプリケーションは次の 3 つの方法で Key Vault にアクセスできます。

- **アプリケーションのみ**: このアプリケーションは、サービス プリンシパルまたはマネージド ID を表します。 この ID は、キー コンテナーの証明書、キー、またはシークレットに定期的にアクセスする必要があるアプリケーションの最も一般的なシナリオです。 このシナリオが機能するには、アプリケーションの `objectId` をアクセス ポリシーで指定する必要があり、`applicationId` を指定 _しない_ ようにするか、または `null` にする必要があります。
- **ユーザーのみ**: ユーザーは、テナントに登録されている任意のアプリケーションからキー コンテナーにアクセスします。 この種類のアクセスの例として、Azure PowerShell や Azure portal があります。 このシナリオが機能するには、ユーザーの `objectId` をアクセス ポリシーで指定する必要があり、`applicationId` を指定 _しない_ ようにするか、または `null` にする必要があります。
- **アプリケーションとユーザー** (_複合 ID_ とも呼ばれます): ユーザーは、特定のアプリケーションからキー コンテナーにアクセスする必要があり、_かつ_ そのアプリケーションは On-Behalf-Of 認証 (OBO) フローを使用してそのユーザーを偽装する必要があります。 このシナリオが機能するには、`applicationId` と `objectId` の両方をアクセス ポリシーで指定する必要があります。 `applicationId` によってその必要なアプリケーションが識別され、`objectId` によってそのユーザーが識別されます。 現時点では、このオプションはデータ プレーンの Azure RBAC (プレビュー) では使用できません。

すべての種類のアクセスで、アプリケーションは Azure AD を使用して認証します。 アプリケーションでは、アプリケーションの種類に基づいて[サポートされる認証方法](../../active-directory/develop/authentication-vs-authorization.md)が使用されます。 アプリケーションでは、アクセス権を付与するプレーン内のリソース用のトークを取得します。 このリソースは、管理プレーンまたはデータ プレーン内にあるエンドポイントであり、Azure 環境に基づいています。 アプリケーションでは、このトークンを使用して、Key Vault に REST API 要求を送信します。 詳細については、[認証フロー全体](../../active-directory/develop/v2-oauth2-auth-code-flow.md)に関するページを確認してください。

1 つのメカニズムで両方のプレーンを認証するモデルには次のようないくつかの利点があります。

- 組織では、組織内のすべてのキー コンテナーへのアクセスを一元的に管理できます。
- 退職したユーザーは、組織内のすべてのキー コンテナーに即座にアクセスできなくなります。
- 組織では、Azure AD のオプションを使用して認証をカスタマイズできます (セキュリティを強化するために多要素認証を有効にするなど)。

## <a name="resource-endpoints"></a>リソースのエンドポイント

アプリケーションによって、エンドポイントを介してプレーンにアクセスされます。 2 つのプレーンに対するアクセス制御は独立して機能します。 キー コンテナー内のキーを使用するためのアクセスをアプリケーションに許可する場合は、Key Vault アクセス ポリシーまたは Azure RBAC (プレビュー) を使用してデータ プレーンのアクセスを許可します。 ユーザーに対して Key Vault のプロパティおよびタグの読み取りアクセスは許可するが、データ (キー、シークレット、証明書) へのアクセスは許可しない場合は、Azure RBAC を使用して管理プレーンのアクセスを許可します。

次の表に、管理プレーンとデータ プレーンのエンドポイントを示します。

| アクセス&nbsp; プレーン | アクセス エンドポイント | 操作 | アクセス制御メカニズム&nbsp; |
| --- | --- | --- | --- |
| 管理プレーン | **グローバル:**<br> management.azure.com:443<br><br> **Azure China 21Vianet:**<br> management.chinacloudapi.cn:443<br><br> **Azure US Government:**<br> management.usgovcloudapi.net:443<br><br> **Azure Germany:**<br> management.microsoftazure.de:443 | キー コンテナーの作成、読み取り、更新、削除<br><br>Key Vault アクセス ポリシーの設定<br><br>Key Vault タグの設定 | Azure RBAC |
| データ プレーン | **グローバル:**<br> &lt;vault-name&gt;.vault.azure.net:443<br><br> **Azure China 21Vianet:**<br> &lt;vault-name&gt;.vault.azure.cn:443<br><br> **Azure US Government:**<br> &lt;vault-name&gt;.vault.usgovcloudapi.net:443<br><br> **Azure Germany:**<br> &lt;vault-name&gt;.vault.microsoftazure.de:443 | キー: 暗号化、暗号化解除、キーのラップ、キーのラップ解除、署名、確認、取得、一覧表示、作成、更新、インポート、削除、回復、バックアップ、復元、消去<br><br> 証明書: 連絡先の管理、発行者の取得、発行者の一覧表示、発行者の設定、発行者の削除、発行者の管理、取得、一覧表示、作成、インポート、更新、削除、回復、バックアップ、復元、消去<br><br>  シークレット: 取得、一覧表示、設定、削除、回復、バックアップ、復元、消去 | Key Vault アクセス ポリシーまたは Azure RBAC (プレビュー)|

## <a name="management-plane-and-azure-rbac"></a>管理プレーンと Azure RBAC

管理プレーンでは、[Azure ロールベースのアクセス制御 (Azure RBAC)](../../role-based-access-control/overview.md) を使用して、呼び出し元が実行できる操作を承認します。 Azure RBAC モデルでは、各 Azure サブスクリプションに Azure AD のインスタンスが用意されています。 このディレクトリからユーザー、グループ、アプリケーションにアクセス権を付与します。 Azure サブスクリプションに含まれていて Azure Resource Manager デプロイ モデルを使用しているリソースを管理するためのアクセス権が付与されます。

リソース グループ内にキー コンテナーを作成し、Azure AD を使用してアクセスを管理します。 リソース グループ内のキー コンテナーを管理する権限をユーザーまたはグループに付与します。 適切な Azure ロールを割り当てることにより、特定のスコープ レベルでアクセス権を付与します。 キー コンテナーを管理するためのアクセス権をユーザーに付与するには、定義済みの[キー コンテナー共同作成者](../../role-based-access-control/built-in-roles.md#key-vault-contributor)ロールを特定のスコープでこのユーザーに割り当てます。 Azure ロールには以下のスコープ レベルを割り当てることができます。

- **サブスクリプション**:サブスクリプション レベルで割り当てられた Azure ロールは、そのサブスクリプション内のすべてのリソース グループとリソースに適用されます。
- **[リソース グループ]** :リソース グループ レベルで割り当てられた Azure ロールは、そのリソース グループ内のすべてのリソースに適用されます。
- **特定のリソース**: 特定のリソースに対して割り当てられた Azure ロールは、そのリソースに適用されます。 この場合、リソースは特定のキー コンテナーです。

定義済みのロールが複数あります。 定義済みのロールがニーズに合わない場合は、独自のロールを定義できます。 詳細については、[Azure の組み込みロール](../../role-based-access-control/built-in-roles.md)に関するページを参照してください。 

`Microsoft.Authorization/roleAssignments/write` および `Microsoft.Authorization/roleAssignments/delete` のアクセス許可 ([ユーザー アクセス管理者](../../role-based-access-control/built-in-roles.md#user-access-administrator)や[所有者](../../role-based-access-control/built-in-roles.md#owner)など) が必要です

> [!IMPORTANT]
> ユーザーがキー コンテナーの管理プレーンに対する `Contributor` 権限を持っている場合は、そのユーザーは Key Vault アクセス ポリシーを設定することで、データ プレーンへのアクセス権を自分自身に付与できます。 ご利用のキー コンテナーへの `Contributor` ロール アクセス権を持つユーザーの管理は厳密に行う必要があります。 承認されたユーザーだけがコンテナー、キー、シークレット、証明書にアクセスできるようにします。
>

<a id="data-plane-access-control"></a>
## <a name="data-plane-and-access-policies"></a>データ プレーンとアクセス ポリシー

キー コンテナーに対して Key Vault アクセス ポリシーを設定することで、データ プレーンのアクセス権を付与できます。 このようなアクセス ポリシーを設定するには、ユーザー、グループ、またはアプリケーションにそのキー コンテナーの管理プレーンに対する `Key Vault Contributor` 権限を与える必要があります。

ユーザー、グループ、またはアプリケーションには、キー コンテナー内のキーやシークレットに対して特定の操作を行うためのアクセス権を付与します。 Key Vault では、1 つのキー コンテナーに対して最大 1,024 個のアクセス ポリシー エントリがサポートされています。 データ プレーンのアクセス権を複数のユーザーに付与するには、Azure AD セキュリティ グループを作成し、そのグループにユーザーを追加します。

コンテナーとシークレットの操作の完全な一覧については、こちらを参照してください。[Key Vault 操作のリファレンス](/rest/api/keyvault/#vault-operations)

<a id="key-vault-access-policies"></a> Key Vault アクセス ポリシーでは、キー、シークレット、および証明書へのアクセス許可が個別に付与されます。  キー、シークレット、証明書へのアクセス許可は、コンテナー レベルになります。 

Key Vault のアクセス ポリシーの使用の詳細については、「[Key Vault アクセス ポリシーを割り当てる](assign-access-policy-portal.md)」を参照してください

> [!IMPORTANT]
> Key Vault アクセス ポリシーはコンテナー レベルで適用されます。 キーを作成および削除するためのアクセス許可を付与されたユーザーは、そのキー コンテナー内のすべてのキーに対してそれらの操作を実行できます。
Key Vault アクセス ポリシーでは、特定のキー、シークレット、証明書など、細かいオブジェクト レベルのアクセス許可はサポートされていません。 
>

## <a name="data-plane-and-azure-rbac-preview"></a>データ プレーンと Azure RBAC (プレビュー)

Azure のロールベースのアクセス制御は、Azure Key Vault データ プレーンへのアクセスを制御するための代替アクセス許可モデルであり、個々のキー コンテナーで有効にすることができます。 Azure RBAC アクセス許可モデルは排他的であり、いったん設定すると、コンテナー アクセス ポリシーは非アクティブになります。 Azure Key Vault によって、キー、シークレット、または証明書にアクセスするために使用される一般的なアクセス許可セットを含む Azure 組み込みロールが定義されます。

Azure ロールが Azure AD セキュリティ プリンシパルに割り当てられると、Azure によりそのセキュリティ プリンシパルのリソースへのアクセス権が付与されます。 アクセスのスコープは、サブスクリプション、リソース グループ、キー コンテナー、または個別のキー、シークレット、または証明書のレベルで指定できます。 Azure AD セキュリティ プリンシパルは、Azure リソースのユーザー、グループ、アプリケーション サービス プリンシパル、または[マネージド ID](../../active-directory/managed-identities-azure-resources/overview.md) の場合があります。

コンテナー アクセス ポリシーに勝る Azure RBAC アクセス許可を使用する主なベネフィットは、一元的なアクセス制御管理と [Privileged Identity Management (PIM)](../../active-directory/privileged-identity-management/pim-configure.md) との統合です。 Privileged Identity Management では、時間ベースおよび承認ベースのロールのアクティブ化を提供して、対象リソースに対する過剰、不要、または誤用であるアクセス許可のリスクを軽減します。

Azure RBAC を使用した Key Vault データ プレーンの詳細については、[Azure ロールベースのアクセス制御を使用した Key Vault のキー、証明書、シークレット](rbac-guide.md)に関する記事をご覧ください

## <a name="firewalls-and-virtual-networks"></a>ファイアウォールと仮想ネットワーク

追加のセキュリティ層のために、ファイアウォールと仮想ネットワーク規則を構成できます。 既定で (インターネット トラフィックを含む) すべてのネットワークからのトラフィックに対するアクセスを拒否するように Key Vault ファイアウォールと仮想ネットワークを構成することができます。 特定の [Azure 仮想ネットワーク](../../virtual-network/virtual-networks-overview.md)やパブリック インターネット IP アドレスの範囲からのトラフィックにアクセスを許可できるため、アプリケーションに対してセキュリティで保護されたネットワーク境界を構築することができます。

サービス エンドポイントの使用方法の例をいくつか次に示します。

* Key Vault を使用して暗号化キー、アプリケーションのシークレット、証明書を保存しており、パブリック インターネットからキー コンテナーへのアクセスをブロックする場合。
* 自分のアプリケーションまたはリストで指定した少数のホストのみが自分のキー コンテナーに接続できるように、キー コンテナーへのアクセスをロックする場合。
* Azure 仮想ネットワークでアプリケーションを実行していて、この仮想ネットワークはすべての受信および送信トラフィックに対してロックされている。 それでもアプリケーションで、シークレットまたは証明書を取得したり、暗号キーを使用したりするために、キー コンテナーに接続する必要がある場合。

詳細については、「[Azure Key Vault のファイアウォールと仮想ネットワークを構成する](network-security.md)」を参照してください

> [!NOTE]
> Key Vault ファイアウォールと仮想ネットワーク規則は、Key Vault のデータ プレーンにのみ適用されます。 Key Vault のコントロール プレーン操作 (作成、削除、変更操作、アクセス ポリシーの設定、ファイアウォールと仮想ネットワーク規則の設定など) は、ファイアウォールや仮想ネットワーク規則の影響を受けません。

## <a name="private-endpoint-connection"></a>プライベート エンドポイント接続

Key Vault のパブリックへの公開を完全にブロックする必要がある場合は、[Azure プライベート エンドポイント](../../private-link/private-endpoint-overview.md)を使用できます。 Azure プライベート エンドポイントは、Azure Private Link を使用するサービスにプライベートかつ安全に接続するためのネットワーク インターフェイスです。 プライベート エンドポイントは、ご自分の VNet からのプライベート IP アドレスを使用して、サービスを実質的に VNet に取り込みます。 サービスへのすべてのトラフィックをプライベート エンドポイント経由でルーティングできるため、ゲートウェイ、NAT デバイス、ExpressRoute または VPN 接続、パブリック IP アドレスは必要ありません。 仮想ネットワークとサービスの間のトラフィックは、Microsoft のバックボーン ネットワークを経由して、パブリック インターネットからの公開を排除します。 最高レベルの細分性でアクセスを制御しながら Azure リソースのインスタンスに接続できます。

Azure サービスでプライベート リンクを使用する一般的なシナリオ:

- **Azure プラットフォーム上のサービスへのプライベート アクセス**: 接続元または接続先にパブリック IP アドレスを使用せずに、Azure 内のサービスに仮想ネットワークを接続できます。 サービス プロバイダーは独自のローカル仮想ネットワークでサービスを提供することができ、また、コンシューマーは自身のローカル仮想ネットワークでサービスにアクセスすることができます。 Private Link プラットフォームでは、Azure のバックボーン ネットワークを介してコンシューマーとサービスの間の接続が処理されます。 
 
- **オンプレミスおよびピアリングされたネットワーク**: Azure で実行されているサービスに対し、ExpressRoute プライベート ピアリングや VPN トンネル経由でオンプレミスから、さらには、ピアリングされた仮想ネットワークから、プライベート エンドポイントを使用してアクセスすることができます。 パブリック ピアリングを設定したり、インターネットを経由してサービスに接続したりする必要はありません。 Private Link を使用すれば、Azure にワークロードを安全に移行することができます。
 
- **データの漏えいに対する保護**: プライベート エンドポイントは、サービス全体にではなく、PaaS リソースの特定のインスタンスにマップされます。 コンシューマーが接続できるのは、その特定のリソースだけです。 サービス内の他のリソースへのアクセスはブロックされます。 このメカニズムにより、データの漏えいリスクを防ぐことができます。 
 
- **グローバルな展開**: 他のリージョンで実行中のサービスにプライベートに接続します。 リージョン A にあるコンシューマーの仮想ネットワークから、リージョン B の、Private Link の背後にあるサービスに接続することができます。  
 
- **独自のサービスへの拡張**: Azure 上のコンシューマーに対し、同じエクスペリエンスと機能でプライベートにサービスを提供できます。 Standard Azure Load Balancer の内側にサービスを配置することで、サービスを Private Link 対応にすることができます。 そうすれば、コンシューマーは自身の仮想ネットワーク内のプライベート エンドポイントを使用して直接そのサービスに接続できます。 接続要求は、承認呼び出しフローを使用して管理できます。 Azure Private Link は、異なる Azure Active Directory テナントに属するコンシューマーとサービスに対しても機能します。 

プライベート エンドポイントの詳細については、[Key Vault と Azure Private Link](./private-link-service.md) に関する記事を参照してください

## <a name="example"></a>例

この例で開発するアプリケーションでは、TLS/SSL 用の証明書が使用され、データの格納に Azure Storage が使用され、Azure Storage でのデータの暗号化に RSA 2,048 ビット キーが使用されます。 このアプリケーションは、Azure 仮想マシン (VM) (または仮想マシン スケール セット) 内で実行されます。 キー コンテナーを使用してアプリケーション シークレットを格納することができます。 ブートス トラップ証明書を格納することができます。この証明書は、Azure AD に対して認証するアプリケーションによって使用されます。

次に示す格納されたキーとシークレットへのアクセス権が必要です。
- **TLS/SSL 証明書**:TLS/SSL に使用されます。
- **ストレージ キー**: ストレージ アカウントへのアクセスに使用されます。
- **RSA 2,048 ビット キー**: Azure Storage によって、データ暗号化キーのラップ/ラップ解除に使用されます。
- **アプリケーション マネージド ID**:Azure AD による認証に使用されます。 Key Vault へのアクセスが許可されると、アプリケーションでストレージ キーと証明書をフェッチできます。

次のロールを定義することで、アプリケーションの管理、デプロイ、および監査を行うことができるユーザーを指定する必要があります。
- **セキュリティ チーム**:CSO (最高セキュリティ責任者) オフィスの IT スタッフまたは同様の共同作成者です。 セキュリティ チームはシークレットの適切な保管を担当します。 シークレットには TLS/SSL 証明書、暗号化用の RSA キー、接続文字列、およびストレージ アカウント キーを含めることができます。
- **開発者と運用者**: アプリケーションを開発して Azure にデプロイするスタッフです。 このチームのメンバーは、セキュリティ スタッフには属していません。 このメンバーには、TLS/SSL 証明書や RSA キーなどの機密データへのアクセス権を付与しないでください。 このメンバーがデプロイするアプリケーションのみに機密データへのアクセス権を付与してください。
- **監査者**:このロールは、開発メンバーでも一般的な IT スタッフでもない共同作成者のためのものです。 監査者は、セキュリティ基準に確実に準拠するように証明書、キー、およびシークレットの使用と管理について検証します。

これ以外に、アプリケーションのスコープ外にあるロールとしてサブスクリプション (またはリソース グループ) 管理者があります。 サブスクリプション管理者は、セキュリティ チームの初期のアクセス許可を設定します。 サブスクリプション管理者は、アプリケーションで必要とされるリソースが属するリソース グループを使用して、セキュリティ チームにアクセス権を付与します。

ロールに対する次の操作を承認する必要があります。

**セキュリティ チーム**
- キー コンテナーを作成する。
- Key Vault のログ記録をオンにする。
- キーとシークレットを追加する。
- ディザスター リカバリーのためにキーのバックアップを作成する。
- 特定の操作に対してアクセス許可をユーザーとアプリケーションに付与するための Key Vault アクセス ポリシーの設定とロールの割り当てを行う。
- キーとシークレットが定期的にロールされる。

**開発者と運用者**
- ブートストラップ証明書と TLS/SSL 証明書 (サムプリント)、ストレージ キー (シークレットの URI)、ラップ/ラップ解除用の RSA キー (キーの URI) についてはセキュリティ チームから参照を取得する。
- 証明書とシークレットにプログラムによってアクセスするアプリケーションを開発してデプロイする。

**監査者**
- Key Vault ログを調べて、キーやシークレットが正しく使用されていること、さらにデータ セキュリティの標準に準拠していることを確認する。

次の表はロールとアプリケーションのアクセス許可をまとめたものです。

| Role | 管理プレーンのアクセス許可 | データ プレーンのアクセス許可 - コンテナー アクセス ポリシー | データ プレーンのアクセス許可 - Azure RBAC  |
| --- | --- | --- | --- |
| セキュリティ チーム | [Key Vault Contributor](../../role-based-access-control/built-in-roles.md#key-vault-contributor) | 証明書: すべての操作 <br> キー: すべての操作 <br> シークレット: すべての操作 | [Key Vault Administrator](../../role-based-access-control/built-in-roles.md#key-vault-administrator) |
| 開発者と&nbsp;運用者 | Key Vault デプロイ アクセス許可<br><br> **注**:このアクセス許可により、デプロイされた VM によりキー コンテナーからシークレットが取り込まれることが許可されます。 | なし | なし |
| 監査者 | なし | 証明書: 一覧表示 <br> キー: 一覧表示<br>シークレット: 一覧表示<br><br> **注**:このアクセス許可により、監査者はログに出力されないキーとシークレットの属性 (タグ、ライセンス認証を行った日付、有効期限) を調べることができます。 | [Key Vault Reader](../../role-based-access-control/built-in-roles.md#key-vault-reader) |
| Azure Storage アカウント | なし | キー: 取得、一覧表示、キーのラップ、キーのラップ解除 <br> | [Key Vault Crypto Service Encryption User](../../role-based-access-control/built-in-roles.md#key-vault-crypto-service-encryption-user) |
| Application | なし | シークレット: 取得、一覧表示 <br> 証明書: 取得、一覧表示 | [Key Vault Reader](../../role-based-access-control/built-in-roles.md#key-vault-reader)、[Key Vault Secrets User](../../role-based-access-control/built-in-roles.md#key-vault-secrets-user) |

この 3 つのチーム ロールでは、Key Vault アクセス許可に加えて、他のリソースへのアクセス権も必要です。 VM (または Azure App Service の Web Apps 機能) をデプロイするには、開発者と運用者はアクセス権をデプロイする必要があります。 監査者には、Key Vault のログが格納されているストレージ アカウントに対する読み取りアクセス権が必要です。

この例では、シンプルなシナリオを示します。 実際のシナリオはもっと複雑になることがあります。 ニーズに基づいて、ご利用のキー コンテナーに対するアクセス許可を調整できます。 ここでは、アプリケーション内で DevOps スタッフによって使用されるキーとシークレットの参照 (URI と拇印) をセキュリティ チームが提供することを前提としました。 開発者/運用者には、すべてのデータ プレーン アクセスは必要ありません。 ご利用のキー コンテナーをセキュリティで保護する方法に重点を置きました。

> [!NOTE]
> この例では、運用環境で Key Vault のアクセスがロックダウンされる仕組みを示しています。 開発者は、アプリケーションを開発する場合、自分のキー コンテナー、VM、ストレージ アカウントを管理するための完全なアクセス許可を持つ独自のサブスクリプションまたはリソース グループを用意する必要があります。

## <a name="resources"></a>リソース

- [Azure Key Vault について](overview.md)
- [Azure Active Directory](../../active-directory/fundamentals/active-directory-whatis.md)
- [Privileged Identity Management](../../active-directory/privileged-identity-management/pim-configure.md)
- [Azure RBAC](../../role-based-access-control/overview.md)
- [Private Link](../../private-link/private-link-overview.md)

## <a name="next-steps"></a>次の手順

[Azure Key Vault に対する認証](authentication.md)

[Key Vault アクセス ポリシーを割り当てる](assign-access-policy-portal.md)

[キー、シークレット、および証明書にアクセスするための Azure ロールを割り当てる](rbac-guide.md)

[Key Vault のファイアウォールと仮想ネットワークを構成する](network-security.md)

[Key Vault へのプライベート リンク接続を確立する](private-link-service.md)
