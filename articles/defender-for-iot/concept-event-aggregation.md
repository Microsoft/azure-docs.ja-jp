---
title: イベントの集計 (プレビュー)
description: Defender for IoT セキュリティ エージェントにより、ローカル デバイスからデータとシステム イベントを収集し、処理と分析を行うためにこのデータを Azure クラウドに送信します。
ms.date: 1/20/2021
ms.topic: conceptual
ms.openlocfilehash: c0280e97549009a1e4911c072a7a8ec052684b4e
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/30/2021
ms.locfileid: "104779326"
---
# <a name="event-aggregation-preview"></a>イベントの集計 (プレビュー)

Defender for IoT セキュリティ エージェントにより、ローカル デバイスからデータとシステム イベントを収集し、処理と分析を行うためにこのデータを Azure クラウドに送信します。 Defender for IoT マクロ エージェントは、新しいプロセスなどのさまざまな種類のデバイス イベントとすべての新しい接続イベントを収集します。 新しいプロセスと新しい接続イベントの両方がデバイス上で 1 秒以内に頻繁に発生する可能性があります。 この機能は、包括的なセキュリティを実現するために重要ですが、セキュリティ エージェントが送信するメッセージの数は、IoT Hub のクォータとコストの上限に短期間で達するか、それを超える可能性があります。 ただし、これらのイベントには、デバイスの保護に不可欠な重要なセキュリティ情報が含まれています。 

デバイスを保護しながら、追加のクォータとコストを削減するため、Defender for IoT エージェントによりこれらの種類のイベントが集計されます。 

- ProcessCreate (Linux のみ) 

- ConnectionCreate (Azure RTOS のみ) 

## <a name="how-does-event-aggregation-work"></a>イベント集計のしくみ 

Defender for IoT エージェントにより、間隔の期間または時間枠についてイベントが集計されます。 間隔の期間が経過すると、エージェントは、詳細な分析のために、集計されたイベントを Azure クラウドに送信します。 集計されたイベントは、Azure クラウドに送信されるまでメモリに格納されます。 

エージェントのメモリ占有領域を減らすために、エージェントは、既にメモリに保持されているのと同じイベントを収集すると、この特定のイベントのヒット カウントを増やします。 集計の時間枠が経過すると、エージェントは、発生したそれぞれの種類のイベントのヒット カウントを送信します。 イベント集計は、単に、収集された各種類のイベントのヒット カウントの集計です。 

## <a name="process-events"></a>イベントの処理 

現在、プロセス イベントは Linux オペレーティング システムでのみサポートされています。 

プロセス イベントは、*コマンド ライン* と  *userid* が同一である場合は同一であると見なされます。 

プロセス イベントの既定のバッファーは、32 プロセスです。その後、バッファーが循環し、新しいプロセス イベントのための領域を確保するために最も古いプロセス イベントが破棄されます。  

## <a name="network-connection-events"></a>ネットワーク接続イベント 

現在、ネットワーク接続イベントは Azure RTO でのみサポートされています。 

ネットワーク接続イベントは、*ローカル ポート*、 *リモート ポート*、 *トランスポート プロトコル*、 *ローカル アドレス*、および  *リモート アドレス* が同一である場合に同一と見なされます。 

ネットワーク接続イベントの既定のバッファーは 64 です。 新しいネットワーク イベントは、次の収集サイクルまでキャッシュされません。 キャッシュ サイズを増やす際の警告がログに記録されます。

## <a name="next-steps"></a>次のステップ

[Defender for IoT のセキュリティ アラート](concept-security-alerts.md)について確認します。
