---
title: VM の Azure Monitor を使用して仮想マシンの正常性を監視する (プレビュー) | Microsoft Docs
description: この記事では、VM の Azure Monitor を使用して仮想マシンと基になるオペレーティング システムの正常性を理解する方法について説明します。
services: azure-monitor
documentationcenter: ''
author: mgoedtel
manager: carmonm
editor: ''
ms.assetid: ''
ms.service: azure-monitor
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/25/2018
ms.author: magoedte
ms.openlocfilehash: a2f654043146536ecf543ae2a0aa49537c2223e1
ms.sourcegitcommit: edacc2024b78d9c7450aaf7c50095807acf25fb6
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/13/2018
ms.locfileid: "53344042"
---
# <a name="understand-the-health-of-your-azure-virtual-machines-with-azure-monitor-for-vms-preview"></a>VM の Azure Monitor を使用して Azure 仮想マシンの正常性を把握する (プレビュー)
Azure には監視領域において特定の役割やタスクを個別に実行する複数のサービスが含まれますが、Azure 仮想マシン上でホストされているオペレーティング システムの詳細な正常性情報を提供することはできませんでした。  Log Analytics または Azure Monitor を使用してさまざまな条件を監視することはできますが、仮想マシンのコア コンポーネントの正常性または全体的な正常性をモデル化して表現するようには設計されていませんでした。  VM の Azure Monitor 正常性機能では、主要なコンポーネントとその関係、それらのコンポーネントの正常性を測定する方法を指定する基準、および異常な状態が検出されたときのアラートを表すモデルを使用して、Windows または Linux ゲスト OS の可用性とパフォーマンスが事前に監視されます。  

Azure VM と基になるオペレーティング システムの全体的な正常性状態は、VM の Azure Monitorm の正常性では、仮想マシンからの直接的な観点と、Azure Monitor からのリソース グループ内の全 VM に対する観点という 2 つの観点で観察できます。

この記事は、検出された正常性の問題をすばやく評価、調査、および解決する方法を理解するのに役立ちます。

Azure Monitor for VMs の構成については、[Azure Monitor for VMs の有効化](vminsights-onboard.md)に関する記事をご覧ください。

## <a name="monitoring-configuration-details"></a>監視の構成の詳細
このセクションでは、Azure の Windows および Linux 仮想マシンを監視するために定義されている既定の正常性基準について説明します。 すべての正常性条件は、非正常状態になったら通知するように事前に構成されています。 

### <a name="windows-vms"></a>Windows VM

- Available Megabytes of Memory (メモリの使用可能なメガバイト数) 
- Average Disk Seconds Per Write (Logical Disk) (ディスクの平均書き込み秒数 (論理ディスク))
- Average Disk Seconds Per Write (Disk) (ディスクの平均書き込み秒数 (ディスク))
- Average Logical Disk Seconds Per Read (論理ディスクの平均読み取り秒数)
- Average Logical Disk Seconds Per Transfer (論理ディスクの平均転送秒数)
- Average Disk Seconds Per Read (ディスクの平均読み取り秒数)
- Average Disk Seconds Per Transfer (ディスクの平均転送秒数)
- Current Disk Queue Length (Logical Disk) (現在のディスク キューの長さ (論理ディスク))
- Current Disk Queue Length (Disk) (現在のディスク キューの長さ (ディスク))
- Disk Percent Idle Time (ディスク アイドル時間の割合)
- File system error or corruption (ファイル システム エラーまたは破損)
- Logical Disk Free Space (%) Low (論理ディスクの空き領域 (%) 低)
- Logical Disk Free Space (MB) Low (論理ディスクの空き領域 (MB) 低)
- Logical Disk Percent Idle Time (論理ディスク アイドル時間の割合)
- Memory Pages Per Second (1 秒あたりのメモリ ページ数)
- Percent Bandwidth Used Read (使用された帯域幅の割合 (読み取り))
- Percent Bandwidth Used Total (使用された帯域幅の割合 (合計))
- Percent Bandwidth Used Write (使用された帯域幅の割合 (書き込み))
- Percentage of Committed Memory in Use (使用されているコミット済みメモリの割合)
- Physical Disk Percent Idle Time (物理ディスク アイドル時間の割合)
- DHCP Client Service Health (DHCP クライアント サービスの正常性)
- DNS Client Service Health (DNS クライアント サービスの正常性)
- RPC Service Health (RPC サービスの正常性)
- Server Service Health (サーバー サービスの正常性)
- Total CPU Utilization Percentage (合計 CPU 使用率の割合)
- Windows Event Log Service Health (Windows イベント ログ サービスの正常性)
- Windows Firewall Service Health (Windows ファイアウォール サービスの正常性)
- Windows Remote Management Service Health (Windows リモート管理サービスの正常性)

### <a name="linux-vms"></a>Linux VM
- Disk Avg.Disk sec/Transfer 
- Disk Avg.Disk sec/Read 
- Disk Avg.Disk sec/Write 
- Disk Health (ディスクの正常性)
- Logical Disk Free Space (論理ディスクの空き領域)
- Logical Disk % Free Space (論理ディスクの空き領域 (%))
- Logical Disk % Free Inodes (論理ディスクの空き inode (%))
- Network Adapter Health (ネットワーク アダプターの正常性)
- Processor Percent DPC Time (プロセッサ DPC 時間 (%))
- Processor Percent Processor Time (プロセッサ プロセッサ時間 (%))
- Total Percent Processor Time (合計プロセッサ時間 (%))
- Total Percent DPC Time (合計 DPC 時間 (%))
- Operating System Available Megabytes of Memory (オペレーティング システムの使用可能なメモリ メガバイト数)

## <a name="sign-in-to-the-azure-portal"></a>Azure ポータルにサインインします。
[Azure Portal](https://portal.azure.com) にサインインします。 

## <a name="introduction-to-health-experience"></a>正常性エクスペリエンスの概要
単一の仮想マシンまたは仮想マシンのグループの正常性機能の使用について説明する前に、情報の表示方法および視覚エフェクトで表現されているものの概要を説明します。  

## <a name="view-health-directly-from-a-virtual-machine"></a>仮想マシンから正常性を直接表示する 
Azure VM の正常性を表示するには、仮想マシンの左側のウィンドウから **[Insights (プレビュー)]** を選択します。 VM の分析情報のページでは、**[Health]\(正常性\)** が既定で開いて、VM の正常性ビューが示されます。  

![選択した Azure 仮想マシン正常性の概要が表示されている VM の Azure Monitor](./media/vminsights-health/vminsights-directvm-health.png)

**[Health]\(正常性\)** タブの **[ゲスト VM の正常性]** セクションのテーブルには、仮想マシンの現在の正常性状態と、異常なコンポーネントによって生成された VM 正常性アラートの合計数が示されます。 詳しくは、「[アラートの生成とアラートの管理](#alerting-and-alert-management)」をご覧ください。  

VM に対して定義されている正常性の状態は次のとおりです。 

* **正常** – VM では問題は検出されておらず、要求されたとおりに機能しています。  
* **重大** – 1 つまたは複数の重大な問題が検出されており、意図される正常な機能に戻すには対処する必要があります。 
* **警告** – 1 つまたは複数の問題が検出されており、対処する必要があります。対処しないと、正常性状態が重大になる可能性があります。  
* **不明** – サービスが VM に接続できなかった場合、状態は不明に変わります。  

**[正常性の診断を表示]** を選択すると、VM のすべてのコンポーネント、関連付けられている正常性基準、状態の変化、および VM に関連したコンポーネントの監視によって発生したその他の重要な問題を示すページが開きます。 詳細については、「[正常性の診断](#health-diagnostics)」を参照してください。 

**[コンポーネントの正常性]** セクションの表には、**CPU**、**メモリ**、**ディスク**、**ネットワーク** の各領域について正常性基準によって監視されている主要なパフォーマンス カテゴリの正常性ロールアップ状態が示されます。  コンポーネントのいずれかを選択すると開くページには、そのコンポーネントのすべての個別正常性条件監視側面と、それぞれの正常性状態が一覧表示されます。  

Windows オペレーティング システムを実行する Azure VM から正常性にアクセスすると、上位 5 つのコア Windows サービスの正常性状態が **[コア サービスの正常性]** セクションに表示されます。  いずれかのサービスを選択すると、そのコンポーネントとその正常性状態を監視する正常性基準が一覧表示されます。  正常性基準の名前をクリックするとプロパティ ウィンドウを開き、そこからは、正常性基準に対応する Azure Monitor アラートが定義されているかどうかなど、構成の詳細を確認できます。 詳細については、[正常性の診断と正常性基準の使用](#health-diagnostics)に関するページを参照してください。  

## <a name="aggregate-virtual-machine-perspective"></a>仮想マシンの観点を集約する
リソース グループ内のすべての仮想マシンの正常性のコレクションを表示するには、ポータルのナビゲーション リストから、**[モニター]** を選択し、**[Virtual Machines (プレビュー)]** を選択します。  

![Azure Monitor からの VM 分析情報監視ビュー](./media/vminsights-health/vminsights-aggregate-health.png)

報告された正常性状態を表示するには、**[サブスクリプション]** および **[リソース グループ]** ドロップダウン リストから、グループに関連する VM を含む適切なリソース グループを選択します。  この選択が適用されるのは、正常性機能のみで、パフォーマンスやマップには引き継がれません。

**[状態]** タブでは次のことがわかります。

* 重大または異常な状態の VM の数と、正常な VM またはデータを送信していない VM (不明状態と呼ばれます) の数。
* オペレーティング システム (OS) 別の、異常状態を報告している VM とその数。
* プロセッサ、ディスク、メモリ、ネットワーク アダプターで検出された問題のために異常な VM の数 (正常性状態によって分類)。  
* コア オペレーティング システム サービスで検出された問題のために異常な VM の数 (正常性状態によって分類)。

ここでは、予防的に VM を監視している正常性基準によって検出された上位の重大な問題をすばやく識別し、VM の正常性アラートの詳細および問題の診断と修復に役立つ関連ナレッジ記事を確認できます。  任意の重大度を選択すると、その重大度でフィルター処理された [[すべてのアラート]](../../azure-monitor/platform/alerts-overview.md#all-alerts-page) ページが開きます。

**[オペレーティング システムごとの VM の分布]** の一覧には、Windows のエディションまたは Linux のディストリビューションおよびバージョンごとに VM が一覧表示されます。 オペレーティング システムの各カテゴリでは、VM はさらに VM の正常性に基づいて分類されます。 

![VM の分析情報: 仮想マシンの分布観点](./media/vminsights-health/vminsights-vmdistribution-by-os.png)

VM に対して定義されている正常性の状態は次のとおりです。 

* **正常** – VM では問題は検出されておらず、要求されたとおりに機能しています。  
* **重大** – 1 つまたは複数の重大な問題が検出されており、意図される正常な機能に戻すには対処する必要があります。 
* **警告** – 1 つまたは複数の問題が検出されており、対処する必要があります。対処しないと、正常性状態が重大になる可能性があります。  
* **不明** – サービスが VM に接続できなかった場合、状態は不明に変わります。  

**[VM 数]**、**[重大]**、**[警告]**、**[正常]**、**[不明]** の各列をクリックして **[仮想マシン]** ページにドリルダウンし、選択した列に一致するフィルター選択された結果の一覧を見ることができます。 たとえば、**Red Hat Enterprise Linux リリース 7.5** を実行しているすべての VM を確認したい場合は、その OS の **[VM 数]** の値をクリックすると、次のページが開き、そのフィルターに一致する仮想マシンおよび現在の既知の正常性状態が一覧表示されます。  

![Red Hat Linux VM のロールアップの例](./media/vminsights-health/vminsights-rollup-vm-rehl-01.png)
 
**[仮想マシン]** ページで、**[VM 名]** 列の VM の名前を選択すると、VM インスタンスのページに移動し、選択した VM に影響する識別されたアラートと正常性基準の問題の詳細が表示されます。  ここから、ページの左上隅にある **[正常性の状態]** アイコンをクリックすることによって正常性の状態の詳細をフィルター処理してどのコンポーネントが異常であるかを確認したり、異常なコンポーネントによって生成された VM 正常性アラートをアラートの重大度で分類して表示したりできます。    

VM リスト ビューで VM の名前をクリックすると、VM から直接 **[Insights (プレビュー)]** を選択した場合と同じように、選択した VM の **[正常性]** ページが開きます。

![選択した Azure 仮想マシンの VM 分析情報](./media/vminsights-health/vminsights-directvm-health.png)

ここでは、仮想マシンの**正常性状態**のロールアップと重大度別の**アラート**が表示されます。これは、正常性基準の正常性状態が正常から異常に変化したときに生成される VM 正常性アラートを表します。  **[VMs in critical condition]\(重大状態の VM\)** を選択すると、重大な正常性状態になっている VM の一覧のページが開きます。  リスト内の VM のいずれかの正常性状態をクリックすると、VM の **[正常性の診断]** ビューが表示されます。  ここでは、正常性状態の問題を反映している正常性の基準を確認できます。 **[正常性の診断]** ページが開くと、VM のすべてのコンポーネントおよびそれらに関連付けられている正常性基準と現在の正常性状態が示されます。  詳しくは、「[正常性の診断](#health-diagnostics)」セクションをご覧ください。  

**[正常性のすべての条件を表示]** を選択すると、この機能で使用可能なすべての正常性基準の一覧を表示するページが開きます。  次のオプションに基づいて情報をさらにフィルター処理できます。

* **[種類]** – 監視対象の VM の状態を評価して全体的な正常性状態をロールアップするため、正常性基準には 3 つの種類があります。  
    a. **[Unit]\(ユニット\)** – 仮想マシンのいくつかの側面を測定します。 この正常性基準の種類は、パフォーマンス カウンターを調べてコンポーネントのパフォーマンスを確認したり、スクリプトを実行して代理トランザクションを実行したり、エラーを示すイベントを監視したりします。  既定では、フィルターはユニットに設定されます。  
    b. **[依存関係]** - さまざまなエンティティ間の正常性のロールアップを提供します。 この正常性基準では、エンティティの正常性を、その正常な動作が依存している別の種類のエンティティの正常性に依存させることができます。  
    c. **[集計]** - 似た正常性基準の正常性状態の組み合わせを提供します。 ユニットと依存関係の正常性基準は、通常、集計正常性基準の下で構成されます。 あるエンティティを対象とする多くの異なる正常性基準のよりよい一般的編成を提供するだけでなく、集計正常性基準はエンティティのカテゴリごとに一意の正常性状態を提供します。

* **[カテゴリ]** - レポートの目的で同じような種類の基準をグループ化するために使用する正常性基準の種類です。  **[可用性]** と **[パフォーマンス]** があります。

**[正常でないコンポーネント]** 列の値をクリックすることにより、さらにドリルダウンして、異常なインスタンスを確認できます。  そのページのテーブルには、重大の正常性状態にあるコンポーネントが一覧表示されます。    

## <a name="health-diagnostics"></a>正常性の診断
**[正常性の診断]** ページでは、VM のすべてのコンポーネント、関連付けられている正常性基準、状態の変化、および監視オブジェクトによって検出された VM に関連するその他の重要な問題が示されます。 

![VM の [正常性の診断] ページの例](./media/vminsights-health/health-diagnostics-page-01.png)

正常性の診断は次の方法で開始できます。

* Azure Monitor の集計 VM 観点からのすべての VM に対するロールアップ正常性状態で。  **[正常性]** ページで、**[ゲスト VM の正常性]** セクションの下の **[重大]**、**[警告]**、**[正常]**、**[不明]** アイコンをクリックして、そのフィルター処理されたカテゴリと一致するすべての VM が一覧表示されるページにドリルダウンします。  **[正常性の状態]** 列の値をクリックすると、その特定の VM を対象とする正常性の診断が開きます。      

* Azure Monitor の集計 VM 観点からのオペレーティング システムで。 **[VM の分布]** でいずれかの列の値を選択すると、**[仮想マシン]** ページが開き、フィルター処理されたカテゴリに一致する一覧がテーブルに表示されます。  **[正常性の状態]** 列の値をクリックすると、選択した VM に対する正常性の診断が開きます。    
 
* Azure Monitor で VM の **[正常性]** タブに対するゲスト VM から、**[正常性の診断を表示]** を選択して 

正常性の診断では、正常性の情報が次のカテゴリにまとめられています。 

* 可用性
* [パフォーマンス]
 
選択したターゲットに対して定義されているすべての正常性基準が、適切なカテゴリに表示されます。 

正常性基準に対する正常性の状態は、*[重大]*、*[警告]*、*[Healthy] (正常)* の 3 つの状態のいずれかで定義されています。 もう 1 つ "*不明*" という状態があり、これは正常性の状態には関連付けられていませんが、機能による既知の監視状態を表します。  

次の表では、正常性の診断で表される正常性状態の詳細を示します。

|アイコン |正常性の状態 |意味 |
|-----|-------------|------------|
| |Healthy |定義されている正常性基準の範囲内にある場合、正常性の状態は正常です。 親ロールアップ モニターの場合は、正常性はロールアップされて、子の最善または最悪の状態を反映します。|
| |重大 |定義されている正常性基準の範囲内にない場合、正常性の状態は重大です。 親ロールアップ モニターの場合は、正常性はロールアップされて、子の最善または最悪の状態を反映します。|
| |警告 |定義されている正常性基準の 2 つのしきい値 (1 つは "*警告*" 状態を示し、もう 1 つは "*重大*" 状態を示します) の間にある場合、正常性の状態は警告です。 親ロールアップ モニターでは、1 つ以上の子が警告状態の場合、親は "*警告*" 状態を反映します。 "*重大*" 状態の子と "*警告*" 状態の子がある場合は、親のロールアップの正常性状態は "*重大*" を示します。|
| |Unknown |データを収集できない、サービスが初期化されていないなど、何らかの理由により正常性の状態を計算できない場合、正常性状態は "*不明*" 状態になります。| 

[正常性の診断] ページには、次の 3 つの主要なセクションがあります。

* Component Model (コンポーネント モデル) 
* 正常性の基準
* State Changes (状態の変化) 

![[正常性の診断] ページのセクション](./media/vminsights-health/health-diagnostics-page-02.png)

### <a name="component-model"></a>コンポーネント モデル
[正常性の診断] ページの一番左の列は、コンポーネント モデルです。 すべてのコンポーネントとその検出されたインスタンス (VM に関連付けられている) がこの列に表示されます。 

次の例では、検出されたコンポーネントはディスク、論理ディスク、プロセッサ、メモリ、およびオペレーティング システムです。 これらのコンポーネントの複数のインスタンスが検出され、この列に表示されています。つまり、論理ディスクの 3 つのインスタンス **/**、**/boot**、**/mnt/resource**、ネットワーク アダプターの 1 つのインスタンス **eth0**、ディスクの 2 つのインスタンス **sda** と **sdb**、プロセッサの 2 つのインスタンス **0 と 1**、および **Red Hat Enterprise Linux Server リリース 7.4 (Maipo) (オペレーティング システム)** です。 

![[正常性の診断] に表示されたコンポーネント モデルの例](./media/vminsights-health/health-diagnostics-page-component.png)

### <a name="health-criteria"></a>正常性の基準
[正常性の診断] ページの中央の列は、**[正常性の基準]** 列です。 VM に対して定義されている正常性モデルが、階層ツリーに表示されます。 VM の正常性モデルは、ユニット、依存関係、および集計の正常性基準で構成されます。  

![[正常性の診断] に表示された正常性の基準の例](./media/vminsights-health/health-diagnostics-page-healthcriteria.png)

正常性の基準は、何らかの基準 (しきい値、エンティティの状態など) で監視対象インスタンスの正常性を測定します。前のセクションで説明したように、正常性の基準には 2 つまたは 3 つの正常性状態があります。 特定の時点において、正常性の基準は取り得る状態のいずれか 1 つだけになることができます。 

ターゲットの全体的な正常性は、正常性モデルで定義されている各正常性基準の正常性から決定されます。 これは、ターゲットを直接対象とする正常性基準と、依存関係の正常性基準によってターゲットにロールアップするコンポーネントで対象になっている正常性基準を、組み合わせたものです。 この階層は、[正常性の診断] ページの **[正常性の基準]** セクションで示されます。 正常性ロールアップ ポリシーは、集計と依存関係の正常性基準の構成の一部です。 この機能の一部として実行される正常性基準の既定のセットの一覧は、「[監視の構成の詳細](#monitoring-configuration-details)」セクションで確認できます。  

次の例では、Windows ベースの VM に対する集計の正常性基準 **Core Windows Services Rollup** (コア Windows サービス ロールアップ) により、個々のサービス正常性基準に基づいて、最も重要な Windows サービスの正常性が評価されています。 DNS や DHCP などの各サービスの状態が評価され、対応するロールアップ正常性基準に正常性がロールアップされます (次に示します)。  

![正常性のロールアップの例](./media/vminsights-health/health-diagnostics-windows-svc-rollup.png)

**Core Windows Services Rollup** (コア Windows サービス ロールアップ) の正常性は、**Operating System availability** (オペレーティング システム可用性) の正常性にロールアップされ、最終的にVM の **Availability** (可用性) にロールアップされます。 

正常性基準の種類 "**ユニット**" は、右端の省略記号リンクをクリックして **[詳細の表示]** を選択して構成ウィンドウを開くことにより、構成を変更できます。 

![正常性基準の構成の例](./media/vminsights-health/health-diagnostics-linuxvm-example-03.png)

この例では、選択した正常性の基準 **Logical Disk % Free Space** (論理ディスクの空き領域 (%)) の構成ウィンドウで、しきい値を異なる数値に構成できます。これは 2 状態モニターなので、正常から重大に変化するだけです。  他の正常性基準は 3 状態の場合があり、警告と重大の正常性状態のしきい値の値を構成できます。  

>[!NOTE]
>1 つのインスタンスに正常性基準の構成の変更を適用すると、すべての監視対象インスタンスに適用されます。  たとえば、**/mnt/resource** を選択し、**Logical Disk % Free Space** (論理ディスクの空き領域 (%)) のしきい値を変更すると、そのインスタンスに適用されるだけでなく、VM で検出されて監視されている他のすべての論理ディスク インスタンスにも適用されます。
>

![ユニット モニターの正常性基準の構成の例](./media/vminsights-health/health-diagnostics-linuxvm-example-04.png)

正常性インジケーターの詳細が必要な場合は、問題、原因、および解決策を識別するために役立つナレッジ記事が含まれています。  このページにある **[View information] (情報の表示)** リンクをクリックすると、特定のナレッジ記事を示す新しいタブがブラウザーで開きます。  VM 用 Azure Monitor の正常性機能に含まれている正常性基準に関するナレッジ記事はすべて、[ここ](https://docs.microsoft.com/azure/monitoring/infrastructure-health/)でいつでも確認できます。
  
### <a name="state-changes"></a>状態の変化
[正常性の診断] ページの右端の列は **[State Changes]\(状態の変化\)** です。 この列には、**[正常性の基準]** セクションで選択されている正常性基準に関連付けられているすべての状態変化、またはテーブルの **[Component Model]\(コンポーネント モデル\)** 列または **[正常性の基準]** 列で VM が選択されている場合は VM の状態変化が、一覧表示されます。 

![[正常性の診断] に表示された状態の変化の例](./media/vminsights-health/health-diagnostics-page-statechanges.png)

このセクションは、正常性基準の状態とそれに関連する時刻で構成され、時刻の降順に並んでいます。   

### <a name="association-of-component-model-health-criteria-and-state-change-columns"></a>コンポーネント モデル、正常性基準、状態変化の列の関連 
3 つの列は相互に関連しています。 ユーザーがコンポーネント モデルで検出されたインスタンスを選択すると、**[正常性の基準]** セクションはそのコンポーネント ビューでフィルター処理され、それに対応して **[State Changes]\(状態の変化\)** も選択された正常性基準に基づいて更新されます。 

![監視対象のインスタンスと結果の選択の例](./media/vminsights-health/health-diagnostics-linuxvm-example-02.png)

上の例では、**/mnt (Logical Disk)** を選択すると、[正常性の基準] ツリーが **/mnt (Logical Disk)** でフィルター処理されます。 **[可用性]** タブと **[パフォーマンス]** タブもそれに従ってフィルター処理されます。 **[State Changes]\(状態の変化\)** 列には、**/mnt (Logical Disk)** の可用性に基づく状態変化が示されます。 

更新された正常性状態を表示するには、**[最新の情報に更新]** リンクをクリックして [正常性の診断] ページを更新します。  定義済みのポーリング間隔に基づいて、正常性基準の正常性状態に更新がある場合、このタスクにより待機を避けて最新の正常性状態を反映できます。  **[正常性基準の状態]** はフィルターであり、選択されている正常性の状態 (正常、警告、重大、不明、およびすべて) に基づいて結果を絞り込むことができます。  右上隅の **[最終更新日時]** は、[正常性の診断] ページが最後に更新された日時を表します。  

## <a name="alerting-and-alert-management"></a>アラートの生成とアラートの管理 
VM の Azure Monitor 正常性機能は [Azure アラート](../../azure-monitor/platform/alerts-overview.md)と統合し、状態が検出されて定義済みの正常性基準が正常から異常状態に変化すると、アラートを生成します。 アラートは重大度 0 ～ 4 で分類され、重要度 0 が最も高い重大度レベルを表します。  

重大度によって分類された VM 正常性アラートの合計数は、**[アラート]** セクションの **[正常性]** ダッシュボードで確認できます。 アラートの合計数、または重大度レベルに対応する数のいずれかを選択すると、**[アラート]** ページが開き、選択に一致するすべてのアラートが一覧表示されます。  たとえば、**重大度レベル 1** に対応する行を選択した場合、次のようなビューが表示されます。

![重大度レベル 1 のすべてのアラートの例](./media/vminsights-health/vminsights-sev1-alerts-01.png)

**[アラート]** ページでは、選択内容に一致するアラートを表示するようにスコープされるだけではなく、仮想マシン リソースによって生成された正常性アラートだけを表示するように **[リソースの種類]** によってもフィルターされます。  これは、**[ターゲット リソース]** 列の下のアラートの一覧に反映され、特定の正常性条件に関して非正常状態になったためにアラートが生成された Azure VM が表示されます。  

他のリソースの種類またはサービスからのアラートは、このビューに表示されることは意図されていません。たとえば、Log Analytics クエリに基づくログ アラートや、通常は既定の Azure Monitor の [[すべてのアラート]](../../azure-monitor/platform/alerts-overview.md#all-alerts-page) ページに表示されるメトリック アラートなどです。 

ページの上部にあるドロップダウン メニューで値を選択することにより、このビューをフィルター処理できます。

|列 |説明 | 
|-------|------------| 
|サブスクリプション |Azure サブスクリプションを選択します。 このビューには、選択したサブスクリプション内のアラートのみが含まれます。 | 
|リソース グループ |1 つのリソース グループを選択します。 このビューには、選択されたリソース グループ内のターゲットを含むアラートのみが含まれます。 | 
|リソースの種類 |1 つ以上のリソースの種類を選択します。 既定では、ターゲットが**仮想マシン**のアラートのみが選択されて、このビューに表示されます。 この列は、リソース グループを指定した後でのみ使用できます。 | 
|リソース |リソースを選択します。 このビューには、そのリソースをターゲットとして含むアラートのみが含まれます。 この列は、リソースの種類を指定した後でのみ使用できます。 | 
|severity |アラートの重大度を選択するか、または *[すべて]* を選択してすべての重大度のアラートを含めます。 | 
|[Monitor Condition] (監視条件) |アラートをフィルター処理する監視状態として、システムによるアラートの "*生成*" または状態がアクティブではなくなった場合のシステムによる "*解決*" を選択します。 または、"*すべて*" を選択してすべての状態のアラートを含めます。 | 
|アラートの状態 |アラートの状態を *[新規]*、*[確認済み]*、*[解決済み]* から選択するか、または *[すべて]* を選択してすべての状態のアラートを含めます。 | 
|サービスの監視 |サービスを選択するか、または *[すべて]* を選択してすべてのサービスを含めます。 この機能では *VM Insights* からのアラートのみがサポートされます。| 
|時間範囲| このビューには、選択された時間枠内に発生したアラートのみが含まれます。 サポートされる値は、過去 1 時間、過去 24 時間、過去 7 日間、および過去 30 日間です。 | 

アラートを選択すると **[アラートの詳細]** ページが表示され、アラートの詳細が提供されて、その状態を変更することができます。 アラートの管理の詳細については、「[Azure Monitor を使用してアラートを作成、表示、管理する](../../azure-monitor/platform/alerts-metric.md)」をご覧ください。  

>[!NOTE]
>現時点では、ポータルからの、正常性条件に基づく新しいアラートの作成、または Azure Monitor の既存の正常性アラート ルールの変更は、サポートされていません。  
>

![選択したアラートの [アラートの詳細] ウィンドウ](./media/vminsights-health/alert-details-pane-01.png)

**[すべてのアラート]** ページでアラートを選択してから左上隅の **[状態の変更]** を選択することで、1 つまたは複数のアラートの状態を変更することもできます。 **[アラートの状態の変更]** ページで状態のいずれかを選択して、**[コメント]** フィールドに変更の説明を追加し、**[OK]** をクリックして変更をコミットします。 情報が検証され、変更が適用されている間、メニューの **[通知]** でその進行状況を追跡することができます。  

## <a name="next-steps"></a>次の手順
VM のパフォーマンスのボトルネックや全体的な使用率を識別するには、[Azure VM のパフォーマンスの表示](vminsights-performance.md)に関するページを参照してください。または、検出されたアプリケーションの依存関係を表示するには、[VM 用 Azure Monitor のマップの表示](vminsights-maps.md)に関するページを参照してください。 
