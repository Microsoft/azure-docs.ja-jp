---
title: Migrate Azure Monitor のアラート ルールを移行する
description: 自主的移行ツールを使用してクラシック アラート ルールを移行する方法について説明します。
author: yanivlavi
ms.author: yalavi
ms.topic: conceptual
ms.date: 03/19/2018
ms.subservice: alerts
ms.openlocfilehash: 5e811e487856ea38f96b669ccb12cabda655a8cd
ms.sourcegitcommit: 7fe8df79526a0067be4651ce6fa96fa9d4f21355
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/06/2020
ms.locfileid: "87852125"
---
# <a name="use-the-voluntary-migration-tool-to-migrate-your-classic-alert-rules"></a>自主的移行ツールを使用してクラシック アラート ルールを移行する

[以前に発表された](monitoring-classic-retirement.md)ように、Azure Monitor のクラシック アラートは廃止されましたが、新しいアラートがまだサポートされていないリソースでは、引き続き制限付きで使用できます。 クラシック アラート ルールを使用しているお客様と、移行を自分でトリガーしたいと考えているお客様を対象に、Azure portal では移行ツールが用意されていました。 この記事では、その移行ツールを使用する方法について説明します。このツールは、その他の発表が保留されているアラートにも使用されます。

## <a name="benefits-of-new-alerts"></a>新しいアラートの利点

クラシック アラートは、Azure Monitor の統合された新しいアラート機能で置き換えられます。 この新しいアラート プラットフォームには以下の利点があります。

- [より多くの Azure サービス](alerts-metric-near-real-time.md#metrics-and-dimensions-supported)に対するさまざまな多次元メトリックに関するアラートを出すことができます。
- 新しいメトリックのアラートでは[マルチリソースのアラート ルール](alerts-metric-overview.md#monitoring-at-scale-using-metric-alerts-in-azure-monitor)がサポートされており、これにより多数のルールを管理するためのオーバーヘッドが大幅に削減されます。
- 統合された通知メカニズムでは次のものがサポートされています。
  - [アクション グループ](action-groups.md)。これは新しい種類のアラートすべて (メトリック、ログ、アクティビティ ログ) で機能するモジュール式の通知メカニズムです。
  - SMS、音声、ITSM Connector などの新しい通知メカニズム。
- [統合されたアラート エクスペリエンス](alerts-overview.md)では、さまざまなシグナル (メトリック、ログ、アクティビティ ログ) に関するアラートがすべて、1 か所にまとめられます。

## <a name="before-you-migrate"></a>移行の前に

移行プロセスで、クラシック アラート ルールを新たな同等のアラート ルールに変換して、アクション グループを作成します。 準備中には、次の点に注意してください。

- 新しいアラート ルールを作成および管理するための通知ペイロード形式と API は両方とも、クラシック アラート ルールの場合とは異なります。より多くの機能がサポートされているからです。 [移行のための準備を行う方法について](alerts-prepare-migration.md)。

- 一部のクラシック アラート ルールは、ツールを使用して移行できません。 [移行することができないルールと、それらの対処方法について](alerts-understand-migration.md#manually-migrating-classic-alerts-to-newer-alerts)。

    > [!NOTE]
    > 移行プロセスは、ご利用のクラシック アラート ルールの評価に影響ありません。 移行されて新しいアラート ルールが有効になるまで、それらは引き続き実行され、アラートを送信します。

## <a name="how-to-use-the-migration-tool"></a>移行ツールの使用方法

Azure portal 内でご利用のクラシック アラート ルールの移行をトリガーするには、次の手順に従います。

1. [Azure portal](https://portal.azure.com) で、 **[モニター]** を選択します。

1. **[アラート]** を選択してから、 **[アラート ルールの管理]** または **[クラシック アラートの表示]** を選択します。

1. **[新しいルールに移行]** を選択して移行ランディング ページに移動します。 このページには、ご利用のすべてのサブスクリプションとそれらの移行状態の一覧が表示されます。

    ![移行のランディング](media/alerts-migration/migration-landing.png "ルールの移行")

    ツールを使用して移行できるサブスクリプションはすべて、 **[移行準備完了]** とマークされます。

    > [!NOTE]
    > 移行ツールは、クラシック アラート ルールを使用しているすべてのサブスクリプションに対して段階的に展開中です。 展開の初期段階では、一部のサブスクリプションに、移行準備ができていないとマークされる場合もあります。

1. 1 つまたは複数のサブスクリプションを選択して、 **[行のプレビュー]** をクリックします

    結果としてのページには、一度に 1 つのサブスクリプションについて移行されるクラシック アラート ルールの詳細が表示されます。 **[Download the migration details for this subscription]\(このサブスクリプションについて移行の詳細をダウンロードする\)** を選択して、詳細を CSV 形式で取得することもできます。

    ![移行のプレビュー](media/alerts-migration/migration-preview.png "移行のプレビュー")

1. 移行状態の通知を受け取るメール アドレスを 1 つまたは複数指定します。 移行が完了したとき、またはご自分で何らかのアクションを行っていただく必要がある場合は、電子メールが届きます。

1. **[移行の開始]** を選択します。 確認ダイアログ ボックスに表示される情報を読み、移行プロセスを開始する準備が整っているかどうかを確認します。

    > [!IMPORTANT]
    > サブスクリプションの移行プロセスを開始したら、そのサブスクリプション用のクラシック アラート ルールを編集することも作成することもできなくなります。 この制限により、新しいルールへの移行中にご利用のクラシック アラート ルールへの変更が失われることはありません。 ご利用のクラシック アラート ルールに変更を加えることはできませんが、移行が完了するまで、それらの実行およびアラートの提供は続行されます。 サブスクリプションの移行が完了したら、クラシック アラート ルールはこれ以上使用できなくなります。

    ![移行の確認](media/alerts-migration/migration-confirm.png "移行の開始の確認")

1. 移行が完了したとき、またはご自分でアクションを行っていただく必要がある場合は、前に指定したアドレスに電子メールが届きます。 ポータル内の移行ランディング ページからも定期的に状態を確認できます。

## <a name="frequently-asked-questions"></a>よく寄せられる質問

### <a name="why-is-my-subscription-listed-as-not-ready-for-migration"></a>サブスクリプションが、移行準備ができていませんと一覧に表示されるのはなぜですか?

移行ツールは、お客様に段階的に展開されつつあります。 初期段階では、サブスクリプションのほとんど、またはすべてが **[移行準備ができていません]** とマークされる可能性があります。 

サブスクリプションの移行準備が整ったら、サブスクリプションの所有者は、ツールを使用できることを示すメール メッセージを受信します。 このメッセージを見逃さないでください。

### <a name="who-can-trigger-the-migration"></a>移行をトリガーできるユーザー

サブスクリプション レベルで監視共同作成者ロールを割り当てられているユーザーは、移行をトリガーすることができます。 [移行プロセスのロール ベースのアクセス制御について](alerts-understand-migration.md#who-can-trigger-the-migration)。

### <a name="how-long-will-the-migration-take"></a>移行にはどのくらいの時間がかかりますか?

ほとんどのサブスクリプションの移行は、通常 1 時間以内に完了します。 移行ランディング ページ上で、移行の進行状況を追跡できます。 移行中、アラートが、クラシック アラート システムまたは新しいアラート システムのいずれかで、今までどおり実行されていることを確認してください。

### <a name="what-can-i-do-if-i-run-into-a-problem-during-migration"></a>移行中に問題が発生した場合はどうすればよいですか?

移行中に直面する可能性がある問題のヘルプについては、[トラブルシューティング ガイド](alerts-understand-migration.md#common-problems-and-remedies)を参照してください。 移行を完了するためにご自分で何らかのアクションを行っていただく必要がある場合は、ツールの設定時に指定した電子メール アドレスに通知されます。

## <a name="next-steps"></a>次のステップ

- [移行を準備する](alerts-prepare-migration.md)
- [移行ツールの動作の理解](alerts-understand-migration.md)
