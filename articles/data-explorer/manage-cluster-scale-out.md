---
title: Azure Data Explorer クラスターのスケールアウト
description: この記事では、変化する需要に基づいて、Azure Data Explorer クラスターをスケールアウトおよびスケールインする手順について説明します。
author: orspod
ms.author: orspodek
ms.reviewer: mblythe
ms.service: data-explorer
ms.topic: conceptual
ms.date: 04/05/2019
ms.openlocfilehash: 24bbddd28943adc929fbaea456eeae8165db290c
ms.sourcegitcommit: 62d3a040280e83946d1a9548f352da83ef852085
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/08/2019
ms.locfileid: "59261600"
---
# <a name="manage-cluster-scale-out-to-accommodate-changing-demand"></a>需要の変化に対応するようにクラスターのスケールアウトを管理する

クラスターのサイズを適切に設定することは、Azure データ エクスプローラーのパフォーマンスにとって重要なことです。 しかし、クラスターに対する需要を絶対の精度で予測することはできません。 静的クラスター サイズは過少使用や過剰使用につながる可能性があります。いずれも理想的ではありません。

変化する需要に合わせて容量を追加および削除して、クラスターを*スケーリング*することをお勧めします。 スケーリングには、スケールアップとスケールアウトの 2 つのワークフローがあります。この記事では、スケールアウト ワークフローについて説明します。

この記事では、クラスターのスケールアウトを管理する方法 (自動スケーリングとも呼ばれる) について説明します。 自動スケーリングを使用すると、事前に定義したルールとスケジュールに基づいてインスタンス数を自動的にスケールアウトできます。 以下の記事の説明に従って、Azure portal でのクラスターの自動スケーリング設定を指定します。

## <a name="steps-to-configure-autoscale"></a>自動スケーリングを構成する方法

Azure portal で、Data Explorer クラスター リソースに移動します。 **[設定]** という見出しの下にある **[スケール アウト]** を選択します。**[構成]** タブで、**[自動スケーリングの有効化]** を選択します。

   ![自動スケールの有効化](media/manage-cluster-scaling/enable-autoscale.png)

以下の図は、次に示すいくつかの手順のフローを示しています。 図の下に詳細情報があります。

1. **[自動スケール設定の名前]** で、*スケールアウト: キャッシュ使用率* などの名前を指定します。 

   ![スケール ルール](media/manage-cluster-scaling/scale-rule.png)

2. **[スケール モード]** には、**[メトリックに基づいてスケーリングする]** を選択します。 このモードは、動的スケーリングを提供します。 また、**[特定のインスタンス数にスケーリングする]** も選択できます。

3. **[+ ルールの追加]** を選択します。

4. 右側の **[スケール ルール]** セクションで、各設定の値を指定します。

    **条件**

    | Setting | 説明と値 |
    | --- | --- |
    | **時間の集計** | **[平均]** など、集計条件を選択します。 |
    | **メトリックの名前** | **[キャッシュ使用率]** など、スケール操作のベースとするメトリックを選択します。 |
    | **時間グレインの統計** | **[平均]**、**[最小]**、**[最大]**、**[合計]** から選択します。 |
    | **Operator** | **[次の値以上]** など、適切なオプションを選択します。 |
    | **Threshold** | 適切な値を選択します。 たとえば、キャッシュ使用率の場合、80% が適切な開始点です。 |
    | **期間 (分)** | システムでメトリックを計算する際にさかのぼって確認する適切な期間を選択します。 既定値の 10 分から始めます。 |
    |  |  |

    **Action**

    | Setting | 説明と値 |
    | --- | --- |
    | **Operation** | スケールインまたはスケール アウトする適切なオプションを選択します。 |
    | **インスタンス数** | メトリック条件が満たされたときに追加または削除するノードまたはインスタンスの数を選択します。 |
    | **クールダウン (分)** | スケール操作の間の待機する適切な時間間隔を選択します。 既定値の 5 分から始めます。 |
    |  |  |

5. **[追加]** を選択します。

6. 左側の **[インスタンスの制限]** セクションで、各設定の値を指定します。

    | Setting | 説明と値 |
    | --- | --- |
    | **最小値** | インスタンス数の下限。使用率に関係なく、クラスターはこの数未満にスケールしません。 |
    | **最大値** | インスタンス数の上限。使用率に関係なく、クラスターはこの数を超えてスケールしません。 |
    | **既定値** | 既定のインスタンス数。 この設定は、リソース メトリックの読み取りで問題がある場合に使用されます。 |
    |  |  |

7. **[保存]** を選択します。

これで、Azure データ エクスプローラー クラスターのスケールアウト操作が構成されました。 スケールイン操作には別のルールを追加します。 この構成により、指定するメトリックに基づいて、クラスターを動的にスケーリングできます。

クラスターの適切なサイズ設定を行うために、[クラスターのスケールアップを管理](manage-cluster-scale-up.md)することもできます。

クラスターのスケーリングに関する問題が発生したときにサポートが必要な場合は、Azure portal で[サポート要求を開いてください](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/overview)。

## <a name="next-steps"></a>次の手順

[メトリックを使用した Azure Data Explorer のパフォーマンス、正常性、および使用状況の監視](using-metrics.md)
