---
title: Maya で物理ベース レンダリング素材を設定する
description: Maya で物理ベース レンダリング素材を設定し、FBX 形式でエクスポートする方法について説明します。
author: muxanickms
ms.author: misams
ms.date: 06/16/2020
ms.topic: tutorial
ms.openlocfilehash: 72742ff4f6aa19fda092b44d8d2237e7d49dd816
ms.sourcegitcommit: dfa5f7f7d2881a37572160a70bac8ed1e03990ad
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/25/2020
ms.locfileid: "85373245"
---
# <a name="tutorial-set-up-physically-based-rendering-materials-in-maya"></a>チュートリアル:Maya で物理ベース レンダリング素材を設定する

## <a name="overview"></a>概要
このチュートリアルで学習する内容は次のとおりです。

> [!div class="checklist"]
>
> * 高度なライティングが施された素材をシーン内のオブジェクトに割り当てる。
> * オブジェクトと素材のインスタンス化を処理する。
> * シーンを FBX 形式でエクスポートし、重要なオプションを選択する。

Maya で[物理ベース レンダリング (PBR) 素材](../../overview/features/pbr-materials.md)を作成するのは比較的簡単な作業です。 3DS Max のような他のコンテンツ作成アプリでの PBR 設定と多くの点で似ています。 このチュートリアルは、Azure Remote Rendering プロジェクトの基本的な PBR シェーダー設定と FBX エクスポートに関するガイドです。 

このチュートリアルのサンプル シーンには、いくつかのポリゴン ボックス オブジェクトが含まれています。 これらには、木材、金属、塗装金属、プラスチック、ゴムなど、さまざまな素材が割り当てられています。 大まかに言うと、各素材には次のテクスチャのすべてまたはほとんどが含まれています。

* **Albedo (アルベド)** : 素材カラー マップです。**Diffuse (拡散)** または **BaseColor (ベースカラー)** とも呼ばれます。
* **Metalness (メタルネス)** : 素材が金属であるかどうか、およびどのパーツが金属であるかを決定します。 
* **Roughness (粗さ)** : 表面の粗さや滑らかさを決定し、反射のシャープネスまたはぼかしと表面のハイライトに影響します。
* **Normal (法線)** : ポリゴンを追加しなくても、表面にディテールを追加できます。 ディテールの例としては、金属表面のくぼみやへこみ、木目などがあります。
* **Ambient Occlusion (アンビエント オクルージョン)** : モデルにソフト シェーディングとコンタクト シャドウを追加するために使用します。 これは、モデルのどの領域が完全なライティング (白) または完全なシェード (黒) を受け取るかを示すグレースケール マップです。 

## <a name="prerequisites"></a>前提条件
* Autodesk Maya 2017 以降

## <a name="set-up-materials-in-the-scene"></a>シーン内の素材を設定する
ここでは、Maya で PBR 素材を設定する方法を示します。

サンプル シーンでご覧のとおり、いくつかのボックス オブジェクトを作成してあります。 それぞれのオブジェクトは、異なる種類の素材を表します。 画像に示されているように、これらの各オブジェクトにはそれぞれ適切な名前が付けられています。

Azure Remote Rendering では、測定単位にメートルが使用され、上方向は Y 軸です。 アセットの作成を開始する前に、Maya のシーン単位をメートルに設定することをお勧めします。 エクスポート用に、FBX エクスポートの設定で単位をメートルに設定します。

> [!TIP]
> モデル アセットに、関連するパーツまたは素材の種類に基づいて適切な名前を付けます。 わかりやすい名前を使用すると、オブジェクトの多いシーンをナビゲートしやすくなります。

![オブジェクト名](media/object-names.jpg)

いくつかのテクスチャを作成または取得した後、独自のテクスチャを作成することもできます。 Quixel Suite、PhotoShop、Substance Suite などのテクスチャ作成アプリを使用することも、他のソースから汎用タイリング テクスチャを入手することもできます。

テクスチャをモデルに適用するには:

1. シーン ビューポートで、モデルまたはジオメトリを選択して右クリックします。 表示されるメニューで、 **[Assign New Material]\(新しい素材の割り当て\)** を選択します。
1. **[Assign New Material]\(新しい素材の割り当て\)** ダイアログ ボックスで、 **[Maya]**  >  **[Stingray PBS]** に移動します。 このアクションにより、PBR 素材が対象のモデルに割り当てられます。 

Maya 2020 では、さまざまな PBR シェーダーが用意されています。 これには、**Maya Standard Surface (Maya 標準表面)** 、**Arnold Standard Surface (Arnold 標準表面)** 、および **Stingray PBR** が含まれます。 FBX 2020 プラグインを使用して **Maya Standard Surface Shader (Maya 標準表面シェーダー)** をエクスポートすることはまだできません。 **Arnold Standard Surface Shader (Arnold 標準表面シェーダー)** は、FBX ファイルとしてエクスポートできます。 他のほとんどの点で、これは **Maya Standard Surface Shader (Maya 標準表面シェーダー)** と同じです。 これは、3D Studio Max の **Physical Material (物理素材)** に似ています。

**Stingray PBR Shader (Stingray PBR シェーダー)** は、他の多くのアプリケーションと互換性があり、Azure Remote Rendering の要件に最もよく適合します。 これは、Maya 2017 以降でサポートされています。 この種類の素材をビューポートで視覚化したものは、後で Azure Remote Rendering で視覚化するものに似ています。

![Stingray 素材](media/stingray-material.jpg)

素材をアセットに割り当て、適宜名前を付けたら、さまざまなテクスチャを割り当てることができます。 次の画像は、各テクスチャの種類が PBR 素材に適合する場所を示しています。 Stingray PBR 素材では、アクティブにできる属性を選択できます。 テクスチャ マップをプラグイン接続する前に、関連する属性をアクティブにする必要があります。

![素材の設定](media/material-setup.jpg)

素材には、使用方法や種類を考慮して適切な名前を付けてください。 固有のパーツで使用される素材には、そのパーツの名前を付けてもかまいません。 より広範な領域で使用される素材には、そのプロパティまたは種類に応じた名前を付けることができます。

画像に示されているように、テクスチャを割り当てます。

![テクスチャの設定](media/texture-setup.jpg)

PBR 素材を作成して設定したら、シーン内の[オブジェクトのインスタンス化](../../how-tos/conversion/configure-model-conversion.md#instancing)について検討してください。 シーン内の類似オブジェクト (ナット、ボルト、ねじ座金など) をインスタンス化すると、ファイル サイズを大幅に節約できます。 マスター オブジェクトの各インスタンスには、独自のスケール、回転、変換を設定できるため、必要に応じてシーンに配置できます。 

Maya でのインスタンス化のプロセスは単純です。

1. **[Edit]\(編集\)** メニューで、 **[Duplicate Special]\(特殊な複製\)** に移動してオプションを開きます。
1. **[Duplicate Special Options]\(特殊な複製オプション\)** ダイアログ ボックスの **[Geometry type]\(ジオメトリ タイプ\)** で、 **[Instance]\(インスタンス\)** オプションを選択します。 
1. **[Duplicate Special]\(特殊な複製\)** を選択します。

   ![インスタンス化](media/instancing.jpg)

このアクションにより、対象のオブジェクトのインスタンスが作成されます。 これを、その親や、その親の他のインスタンスとは無関係に回転またはスケーリングすることができます。 

コンポーネント モードでインスタンスに加えたすべての変更は、オブジェクトのすべてのインスタンスに送信されます。 たとえば、頂点やポリゴン フェースなど、インスタンス化されたオブジェクトのコンポーネントを操作することができます。 加えた変更により、これらのすべてのインスタンスが影響を受けても問題ないことを確認してください。 

サンプル シーンでは、個々のボックス オブジェクトがインスタンス化されています。 このアクションは、シーンを FBX 形式にエクスポートする際に関連性があります。

![シーンの概要](media/scene-overview.jpg)

> [!TIP]
> 作業を進めながら、シーン内にインスタンスを作成します。 後からコピーをインスタンス化されたオブジェクトに置き換えることは非常に困難です。 

## <a name="fbx-export-process"></a>FBX エクスポート プロセス

シーンまたはシーン アセットの FBX エクスポート操作に進みましょう。 アセットをエクスポートする場合は、エクスポートしたいオブジェクトまたはアセットのみをシーンから選択するのが合理的です。 たとえば、シーンに 100 個のオブジェクトがあるとします。 このうちの 30 個だけを使用する場合、シーン全体をエクスポートするのは無駄です。 

選択を行うには:

1. **[File]\(ファイル\)**  >  **[Export Selection]\(選択項目のエクスポート\)** に移動して、 **[Export Selection]\(選択項目のエクスポート\)** ダイアログ ボックスを開きます。
1. **[Files of type]\(フィルの種類\)** ボックスで、 **[FBX export]\(FBX エクスポート\)** を選択して FBX エクスポート設定を表示します。 この画像では、FBX エクスポートのプライマリ設定が赤で強調表示されています。

   ![FBX エクスポート](media/FBX-exporting.jpg)

たとえば、要件に応じて、アセットをクライアントに送信することができます。 その際に、アセットと共に多数のテクスチャ ファイルを送信したくない場合もあります。 エクスポートされる FBX ファイル内にテクスチャが埋め込まれるようにすることもできます。 このオプションはパッケージ化するファイルが 1 つしかないことを意味しますが、FBX アセットのサイズが大幅に増加します。 次に示すように、 **[Embed Media]\(メディアの埋め込み\)** オプションを選択することで、テクスチャを埋め込むオプションを有効にすることができます。

> [!TIP]
> このサンプルでは、ファイルにはこの条件を反映する名前が付けられています。 この命名スタイルは、アセットを追跡するうえで適切な方法です。 

エクスポートの構成を設定したら、右下にある **[Export Selection]\(選択項目のエクスポート\)** を選択します。

![メディアの埋め込み](media/embedding-media.jpg)

## <a name="conclusion"></a>まとめ

一般に、この種の素材は、実際の光の物理特性をベースにしているため、より本物らしく見えます。 シーンが現実の世界に存在するかのように見せる追加の没入効果が得られます。

## <a name="next-steps"></a>次のステップ

ここまで、シーン内のオブジェクトに高度なライティングが施された素材を設定する方法を説明しました。 また、Azure Remote Rendering でサポートされている FBX 形式でオブジェクトをエクスポートする方法についても説明しました。 次の手順では、FBX ファイルを変換し、Azure Remote Rendering で視覚化します。

> [!div class="nextstepaction"]
> [クイック スタート: モデルをレンダリング用に変換する](../../quickstarts\convert-model.md)