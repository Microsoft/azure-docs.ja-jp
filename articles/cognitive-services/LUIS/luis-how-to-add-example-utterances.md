---
title: 発話の例を追加する
titleSuffix: Language Understanding - Azure Cognitive Services
description: 発話の例とは、ユーザーの質問や命令のサンプル テキストです。 Language Understanding (LUIS) に学習させるには、意図に発話の例を追加する必要があります。
services: cognitive-services
author: diberry
manager: nitinme
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: article
ms.date: 04/01/2019
ms.author: diberry
ms.openlocfilehash: dd8ed146c507d8d39ba99c6573321ee80bc891c9
ms.sourcegitcommit: f56b267b11f23ac8f6284bb662b38c7a8336e99b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/28/2019
ms.locfileid: "67442576"
---
# <a name="add-an-entity-to-example-utterances"></a>発話の例にエンティティを追加する 

発話の例とは、ユーザーの質問や命令のサンプル テキストです。 Language Understanding (LUIS) に学習させるには、[意図](luis-concept-intent.md)に[発話の例](luis-concept-utterance.md)を追加する必要があります。

通常は、まず、発話の例を意図に追加し、次に **[意図]** ページでエンティティを作成して発話にラベルを付けます。 先にエンティティを作成する場合、[エンティティの追加](luis-how-to-add-entities.md)に関するページを参照してください。

## <a name="marking-entities-in-example-utterances"></a>発話の例のエンティティにマークを付ける

発話の例でエンティティにマークを付けるためにテキストを選択すると、インプレースのポップアップ メニューが表示されます。 このメニューを使用して、エンティティの作成または選択を行います。 

事前構築済みのエンティティや正規表現エンティティなど、特定の種類のエンティティは自動的にタグ付けされるため、発話の例でタグ付けすることはできません。 

## <a name="add-a-simple-entity"></a>シンプル エンティティを追加する

以下の手順では、 **[意図]** ページの次の発話内でカスタム エンティティを作成してタグを付けます。

```text
Are there any SQL server jobs?
```

1. 発話から `SQL server` を選択し、シンプル エンティティのラベルを付けます。 エンティティ ドロップダウン ボックスが表示されたら、既存のエンティティを選択するか、新しいエンティティを追加できます。 新しいエンティティを追加するには、テキスト ボックスにその名前として「`Job`」を入力し、 **[新しいエンティティの作成]** を選択します。

    ![エンティティ名を入力したスクリーンショット](./media/luis-how-to-add-example-utterances/create-simple-entity.png)

    > [!NOTE]
    > エンティティとしてタグ付けする単語を選択するときは:
    > * 1 つの単語の場合、単純にそれを選択します。 
    > * 2 語以上からなる場合、先頭を選択し、それから末尾を選択します。

1. **[What type of entity do you want to create?]\(どのような種類のエンティティを作成しますか\)** ポップアップ ボックスで、エンティティ名を確認し、エンティティの種類として**シンプル**を選択して、 **[完了]** を選択します。

    一般的には、シンプル エンティティのシグナルを強化するために[フレーズ リスト](luis-concept-feature.md)を使用します。

## <a name="add-a-list-entity"></a>リスト エンティティを追加する

リスト エンティティとは、システム内の関連語と完全に一致する一連のテキストを表します。 

会社の部門のリストの場合、正規化された値 `Accounting` および `Human Resources` を含めることができます。 正規名にはそれぞれシノニム (類義語) があります。 部門の場合、シノニムとして部門の頭字語、数字、スラングなどを含めることができます。 エンティティを作成するとき、すべての値を知っている必要はありません。 実際にユーザーがシノニムで発話するのを見てから追加できます。

1. **[Intents]\(意図\)** ページの発話例で、新しいリストに含める単語または語句を選択します。 エンティティのドロップダウンが表示されたら、上部のボックスに新しいリスト エンティティの名前を入力して、 **[Create new entity]\(新しいエンティティの作成\)** を選択します。   

1. **[What type of entity do you want to create?]\(どのような種類のエンティティを作成しますか\)** ポップアップ ボックスで、エンティティの名前を入力し、種類として**リスト**を選択します。 このリスト アイテムのシノニムを追加し、 **[完了]** を選択します。 

    ![リスト エンティティのシノニムを入力したスクリーンショット](./media/luis-how-to-add-example-utterances/hr-create-list-2.png)

    リスト アイテムまたはアイテムのシノニムをさらに追加するには、他の発話にラベルを付けるか、左のナビゲーションにある **[エンティティ]** でエンティティを編集します。 エンティティの[編集](luis-how-to-add-entities.md#add-list-entities)では、対応するシノニムと一緒に追加アイテムを入力したり、リストをインポートしたりできます。 

## <a name="add-a-composite-entity"></a>複合エンティティを追加する

複合エンティティは、既存の**エンティティ**を元に親エンティティを形成するために作成します。 

`Does John Smith work in Seattle?` という発話の場合、複合発話は、従業員名 `John Smith` のエンティティ情報と、複合エンティティ内の位置 `Seattle` を返すことができます。 子エンティティは、複合エンティティを作成する前にアプリ内に既に存在し、発話例でマークされている必要があります。

1. 子エンティティをラップして複合エンティティにするには、複合エンティティの発話で**最初**のラベル付きエンティティ (一番左) を選択します。 ドロップダウン リストが表示され、この選択の選択肢が示されます。

1. ドロップダウン リストから **[Wrap composite entity]\(複合エンティティをラップする\)** を選択します。 

1. 複合エンティティの最後の単語 (一番右) を選択します。 複合エンティティの後の緑の線にご注意ください。 これは複合エンティティの視覚的なインジケーターであり、複合エンティティ内の一番左の子エンティティから一番右の子エンティティまでのすべての単語の下に表示されます。

1. ドロップダウン リストで複合エンティティ名を入力します。

    エンティティが正しくラップされていると、語句全体に緑の下線が付きます。

1. **[What type of entity do you want to create?]\(どのような種類のエンティティを作成しますか\)** ポップアップ ボックスで複合エンティティの詳細を確認し、 **[完了]** を選択します。

    ![ポップアップのエンティティの詳細のスクリーン ショット](./media/luis-how-to-add-example-utterances/hr-create-composite-3.png)

1. 複合エンティティに含まれる個々のエンティティは青で強調表示され、複合エンティティ全体は緑の下線付きで表示されます。 

    ![複合エンティティが表示された意図の詳細ページのスクリーンショット](./media/luis-how-to-add-example-utterances/hr-create-composite-4.png)

## <a name="add-entitys-role-to-utterance"></a>発話にエンティティのロールを追加する

ロールには、発話のコンテキストによって決定される、エンティティのサブタイプの名前が付けられます。 発話内のエンティティ内をエンティティとしてマークしたり、そのエンティティ内のロールを選択したりできます。 どのエンティティにも、機械学習したカスタム エンティティ (簡易エンティティと複合エンティティ) と、機械学習していないカスタム エンティティ (事前構築済みエンティティ、正規表現エンティティ、リスト エンティティ) が含まれるロールを含めることができます。 

[エンティティ ロールが含まれる発話をマークする方法](tutorial-entity-roles.md)は、ハンズオン チュートリアルでご確認ください。 

## <a name="entity-status-predictions"></a>エンティティの状態の予測

LUIS ポータルで新しい発話を入力するとき、発話にエンティティ予測誤差が存在することがあります。 予測誤差とは、エンティティのラベル付けと、LUIS によるエンティティの予測の間の差異です。 

この差異は、LUIS ポータルでは発話の赤い下線で視覚的に示されます。 赤い下線は、エンティティの角かっこ内または角かっこ外に表示されることがあります。 

![エンティティ状態予測不一致のスクリーンショット](./media/luis-how-to-add-example-utterances/entity-prediction-error.png)

発話で赤い下線の付いた単語を選択します。 

予測に相違がある場合、エンティティ ボックスに赤い感嘆符の付いた **[Entity status]\(エンティティの状態\)** が表示されます。 エンティティの状態と、ラベル付けされたエンティティと予測されたエンティティの間の相違に関する情報を表示するには、 **[Entity status]\(エンティティの状態\)** を選択した後、右側の項目を選択します。

![[Entity status]\(エンティティの状態\) の選択のスクリーン ショット](./media/luis-how-to-add-example-utterances/entity-prediction-error-correction.png)

赤い線は、次のいずれかのときに表示される可能性があります。

   * エンティティがラベル付けされる前に、発話が入力されたとき
   * エンティティ ラベルが適用されたとき
   * エンティティ ラベルが削除されたとき
   * そのテキストに対して複数のエンティティ ラベルが予測されたとき 

エンティティ予測の不一致を解決するには、次の解決策が役に立ちます。

|エンティティ|視覚的インジケータ|予測|解決策|
|--|--|--|--|
|発話が入力されたが、エンティティがまだラベル付けされていない。|赤い下線|予測は正しい。|予測された値でエンティティにラベルを付けます。|
|ラベル付けされていないテキスト|赤い下線|正しくない予測|この正しくないエンティティを使用している現在の発話を、すべての意図について確認する必要があります。 現在の発話には、このテキストが予測されたエンティティである、誤って学習された LUIS があります。
|正しくラベル付けされたテキスト|エンティティの青い強調表示、赤い下線|正しくない予測|さまざまな場所と使用方法で、正しくラベル付けされたエンティティを含む発話をさらに提供します。 現在の発話は、これがエンティティであることを LUIS に学習させるのに十分ではないか、または似たエンティティが同じコンテキストで出現しています。 LUIS が混乱しないよう、似たエンティティは 1 つのエンティティに結合する必要があります。 もう 1 つの解決策は、フレーズ リストを追加して単語の重要性を高めることです。 |
|誤ってラベル付けされたテキスト|エンティティの青い強調表示、赤い下線|正しい予測| さまざまな場所と使用方法で、正しくラベル付けされたエンティティを含む発話をさらに提供します。 

## <a name="other-actions"></a>その他のアクション

選択したグループまたは個々のアイテムとして発話の例にアクションを実行できます。 選択した発話の例のグループの場合、リストの上のコンテキスト メニューが変更されます。 単一のアイテムの場合、リストの上のコンテキスト メニューと、発話の各行の末尾に表示される個々のコンテキスト省略記号の両方を使用できます。 

### <a name="remove-entity-labels-from-utterances"></a>発話からエンティティ ラベルを削除する

機械学習したエンティティ ラベルは意図ページで発話から削除できます。 エンティティが機械学習ではない場合、発話から削除できません。 機械学習ではないエンティティを発話から削除する必要がある場合、アプリ全体からエンティティを削除する必要があります。 

機械学習したエンティティ ラベルを発話から削除するには、発話でそのエンティティを選択します。 次に、エンティティ ドロップダウン ボックスが表示されるのでそこから **[ラベルの削除]** を選択します。

### <a name="add-a-prebuilt-entity-label"></a>事前構築済みエンティティ ラベルを追加する

事前構築済みエンティティを LUIS アプリに追加する場合、発話にそれらのエンティティのタグを付ける必要はありません。 事前構築済みエンティティとその追加方法に関する詳細については、[エンティティの追加](luis-how-to-add-entities.md#add-a-prebuilt-entity-to-your-app)に関するページを参照してください。

### <a name="add-a-regular-expression-entity-label"></a>正規表現エンティティ ラベルを追加する

正規表現エンティティを LUIS アプリに追加する場合、発話にそれらのエンティティのタグを付ける必要はありません。 正規表現エンティティとその追加方法に関する詳細については、[エンティティの追加](luis-how-to-add-entities.md#add-regular-expression-entities-for-highly-structured-concepts)に関するページを参照してください。


### <a name="create-a-pattern-from-an-utterance"></a>発話からパターンを作成する

[予測の正確さを向上するためにパターンを追加する方法](luis-how-to-model-intent-pattern.md#add-pattern-from-existing-utterance-on-intent-or-entity-page)に関するページをご覧ください。


### <a name="add-a-patternany-entity"></a>pattern.any エンティティを追加する

pattern.any エンティティを LUIS アプリに追加する場合、発話にそのエンティティのラベルを付けることはできません。 pattern.any エンティティはパターンでのみ有効です。 pattern.any エンティティとその追加方法に関する詳細については、[エンティティの追加](luis-how-to-add-entities.md#add-patternany-entities-to-capture-free-form-entities)に関するページを参照してください。

## <a name="train-your-app-after-changing-model-with-utterances"></a>発話を含むモデルの変更後にアプリをトレーニングする

発話を追加、編集、または削除したら、その変更について、エンドポイントのクエリに影響を与えるようにアプリを[トレーニング](luis-how-to-train.md)して[発行](luis-how-to-publish-app.md)します。 

## <a name="next-steps"></a>次の手順

**[意図]** で発話にラベルを付けたら、[複合エンティティ](luis-how-to-add-entities.md)を作成できます。
