---
title: エンティティの追加 - LUIS
description: Language Understanding (LUIS) アプリでユーザーの発話から重要なデータを抽出するエンティティを作成します。 抽出されたエンティティ データは、顧客の要求に応える目的で、クライアント アプリケーションによって使用されます。
services: cognitive-services
author: diberry
manager: nitinme
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: how-to
ms.date: 05/17/2020
ms.author: diberry
ms.openlocfilehash: 61e53e6110e545d253dae81e94f8738ee17c4141
ms.sourcegitcommit: 61d850bc7f01c6fafee85bda726d89ab2ee733ce
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/03/2020
ms.locfileid: "84344477"
---
# <a name="add-entities-to-extract-data"></a>データを抽出するエンティティを追加する

Language Understanding (LUIS) アプリでユーザーの発話から重要なデータを抽出するエンティティを作成します。 抽出されたエンティティ データは、顧客の要求に応える目的で、お使いのクライアント アプリケーションによって使用されます。

エンティティは、抽出しようとしている発話内の単語またはフレーズを表します。 エンティティは、意図に関連する情報を説明し、アプリがタスクを実行するうえで不可欠なこともあります。 エンティティは意図にサンプル発話を追加するときに作成できます。あるいは、サンプル発話を意図に追加するとき以外で (追加の前後で) 作成できます。

## <a name="plan-entities-then-create-and-label"></a>エンティティを計画し、作成してラベルを付ける

機械学習エンティティはサンプル発話から作成するか、 **[エンティティ]** ページから作成できます。

一般的に、ベスト プラクティスは、ポータルで機械学習エンティティを作成する前に、時間をかけてエンティティを計画することです。 次に、その時点でわかっているサブエンティティと特徴をできるだけ詳細に使用して、発話例から機械学習エンティティを作成します。 [分解可能エンティティ チュートリアル](tutorial-machine-learned-entity.md)では、このメソッドの使用方法を実演しています。

エンティティ計画の一環として、テキストに一致するエンティティ (事前構築済みエンティティ、正規表現エンティティ、リスト エンティティなど) の必要性が判明していることがあります。 そのようなエンティティは、サンプル発話でラベルが付けられる前に、 **[エンティティ]** ページから作成できます。

ラベルを付けるときは、個々のエンティティにラベルを付けてから、親の機械学習エンティティまで構築できます。 あるいは、親の機械学習エンティティから始め、子エンティティに分解できます。

> [!TIP]
>クライアント アプリケーションで抽出されるとき、単語が使用されない場合でも、エンティティを示すすべての単語にラベルを付けます。

## <a name="when-to-create-an-entity"></a>エンティティを作成するタイミング

エンティティを計画した後、機械学習エンティティとサブエンティティを作成する必要があります。 これには、機械学習エンティティに特徴を提供するために、事前構築済みのエンティティまたはテキスト照合エンティティを追加する必要がある場合があります。 これらはすべて、ラベル付けの前に行う必要があります。

サンプルの発話のラベル付けを開始したら、機械学習済みエンティティを作成したり、リスト エンティティを拡張したりできます。

次の表を使用すると、各エンティティ型を作成またはアプリに追加する場所を理解できます。

|エンティティの種類|LUIS ポータルでエンティティを作成する状況|
|--|--|
|機械学習エンティティ|エンティティまたは意図の詳細|
|リスト エンティティ|エンティティまたは意図の詳細|
|正規表現エンティティ|エンティティ|
|Pattern.any エンティティ|エンティティ|
|事前構築済みのエンティティ|エンティティ|
|事前構築済みのドメイン エンティティ|エンティティ|

エンティティはすべて、 **[エンティティ]** ページから作成できます。あるいは、 **[Intent detail]\(意図の詳細\)** ページでサンプル発話のエンティティにラベルを付けるとき、いくつかのエンティティを作成できます。 **[Intent detail]\(意図の詳細\)** ページでは、サンプル発話のエンティティにのみ _ラベルを付ける_ ことができます。



## <a name="how-to-create-a-new-custom-entity"></a>新しいカスタム エンティティを作成する方法

このプロセスは、機械学習済みエンティティ、リスト エンティティ、および正規表現エンティティに対して機能します。

1. [LUIS ポータル](https://www.luis.ai)にサインインし、自分の**サブスクリプション**と**作成リソース**を選択して、その作成リソースに割り当てられているアプリを表示します。
1. **[マイ アプリ]** ページで自分のアプリの名前を選択して、そのアプリを開きます。
1. **[エンティティ]** ページを選択します。
1. **[+ 作成]** を選択し、エンティティの種類を選択します。
1. エンティティの設定を続け、完了したら **[作成]** を選択します。

## <a name="create-a-machine-learned-entity"></a>機械学習済みエンティティを作成する

1. [LUIS ポータル](https://www.luis.ai)にサインインし、自分の**サブスクリプション**と**作成リソース**を選択して、その作成リソースに割り当てられているアプリを表示します。
1. **[マイ アプリ]** ページで自分のアプリの名前を選択して、そのアプリを開きます。
1. **[ビルド]** セクションの左側にあるパネルで **[エンティティ]** を選択し、 **[+ 作成]** を選択します。
1. **[Create an entity type]\(エンティティ型の作成\)** ダイアログ ボックスで、エンティティの名前を入力し、 **[Machine learned]\(機械学習済み\)** を選択します。 サブエンティティを追加するには、 **[Add structure]\(構造を追加する\)** を選択します。 **［作成］** を選択します

    > [!div class="mx-imgBorder"]
    > ![機械学習済みエンティティを作成しているスクリーンショット。](media/add-entities/machine-learned-entity-with-structure.png)

1. **[Add subentities]\(サブエンティティの追加\)** で、親エンティティ行の **[+]** を選択して、サブエンティティを追加します。

    > [!div class="mx-imgBorder"]
    > ![サブエンティティを追加しているスクリーンショット。](media/add-entities/machine-learned-entity-with-subentities.png)

1. **[作成]** を選択して、作成プロセスを終了します。

## <a name="add-a-feature-to-a-machine-learned-entity"></a>機械学習エンティティ済みに特徴を追加する

1. [LUIS ポータル](https://www.luis.ai)にサインインし、自分の**サブスクリプション**と**作成リソース**を選択して、その作成リソースに割り当てられているアプリを表示します。
1. **[マイ アプリ]** ページで自分のアプリの名前を選択して、そのアプリを開きます。
1. **[ビルド]** セクションから、左パネル内の **[エンティティ]** を選択し、機械学習済みエンティティを選択します。
1. エンティティ行またはサブエンティティ行で **[+ Add feature]\(+ 特徴の追加\)** を選択して、特徴を追加します。
1. 既存のエンティティとフレーズ リストから選択します。
1. 特徴が見つかった場合にのみエンティティを抽出する必要がある場合は、その特徴のアスタリスク `*` を選択します。

    > [!div class="mx-imgBorder"]
    > ![エンティティに特徴を追加しているスクリーンショット。](media/add-entities/machine-learned-entity-schema-with-features.png)

## <a name="create-a-regular-expression-entity"></a>正規表現エンティティを作成する

1. [LUIS ポータル](https://www.luis.ai)にサインインし、自分の**サブスクリプション**と**作成リソース**を選択して、その作成リソースに割り当てられているアプリを表示します。
1. **[マイ アプリ]** ページで自分のアプリの名前を選択して、そのアプリを開きます。
1. **[ビルド]** セクションの左側にあるパネルで **[エンティティ]** を選択し、 **[+ 作成]** を選択します。

1. **[Create an entity type]\(エンティティ型の作成\)** ダイアログ ボックスで、エンティティの名前を入力します。 **[RegEx]** を選択し、 **[Regex]** フィールドに正規表現を入力した後、 **[作成]** を選択します。

    > [!div class="mx-imgBorder"]
    > ![正規表現エンティティを作成しているスクリーンショット。](media/add-entities/add-regular-expression-entity.png)


<a name="add-list-entities"></a>

## <a name="create-a-list-entity"></a>リスト エンティティを作成する

リスト エンティティとは、関連単語の集まりであり、固定かつ限定的です。 作成者はリストを変更できますが、LUIS によってリストが増減することはありません。 また、[リスト エンティティの .json 形式](reference-entity-list.md#example-json-to-import-into-list-entity)を使用して、既存のリスト エンティティにインポートすることもできます。

次のリストは、正規名とシノニムの例になっています。

|色 - リスト アイテム名|色 - シノニム|
|--|--|
|[赤]|深紅、血、リンゴ、消防車|
|青|空、コバルト|
|[緑]|濃緑、ライム|

リスト エンティティを作成する手順を使用します。 リスト エンティティが作成されたら、意図でサンプル発話にラベルを付ける必要はありません。 リスト アイテムとシノニムは正確なテキストを使用して照合されます。
1. [LUIS ポータル](https://www.luis.ai)にサインインし、自分の**サブスクリプション**と**作成リソース**を選択して、その作成リソースに割り当てられているアプリを表示します。
1. **[マイ アプリ]** ページで自分のアプリの名前を選択して、そのアプリを開きます。
1. **[ビルド]** セクションの左側にあるパネルで **[エンティティ]** を選択し、 **[+ 作成]** を選択します。

1. **[Create an entity type]\(エンティティの種類を作成する\)** ダイアログ ボックスにエンティティの名前を入力し (例: `Colors`)、 **[リスト]** を選択します。
1. **[Create a list entity]\(リスト エンティティを作成する\)** ダイアログ ボックスの **[Add new sublist....]\(新しいサブリストを追加する\)** にリスト アイテム名を入力し (例: `Green`)、シノニムを追加します。

    > [!div class="mx-imgBorder"]
    > ![[Entity detail]\(エンティティの詳細\) ページでリスト エンティティとして色の一覧を作成します。](media/how-to-add-entities/create-list-entity-of-colors.png)

1. リスト アイテムとシノニムの追加を終えたら、 **[作成]** を選択します。

    アプリに対する一連の変更が完了したら、忘れずにアプリを**トレーニング**してください。 1 回変更してアプリケーションをトレーニングすることは避けてください。

    > [!NOTE]
    > この手順では、 **[Intent detail]\(意図の詳細\)** ページのサンプル発話からリスト エンティティが作成され、ラベルが付けられます。 **[エンティティ]** ページから同じエンティティを作成することもできます。

## <a name="add-a-role-for-an-entity"></a>エンティティのロールを追加する

ロールは、文脈に左右される、エンティティの名前付きサブタイプです。

### <a name="add-a-role-to-distinguish-different-contexts"></a>異なるコンテキストを区別するためにロールを追加する

次の発話には場所が 2 つあり、いずれも、`to` や `from` など、それを囲む単語で意味的に指定されています。

`Pick up the package from Seattle and deliver to New York City.`

この手順では、`origin` および `destination` ロールを事前構築済み geographyV2 エンティティに追加します。
1. [LUIS ポータル](https://www.luis.ai)にサインインし、自分の**サブスクリプション**と**作成リソース**を選択して、その作成リソースに割り当てられているアプリを表示します。
1. **[マイ アプリ]** ページで自分のアプリの名前を選択して、そのアプリを開きます。
1. **[ビルド]** セクションから、左パネル内の **[エンティティ]** を選択します。

1. **[+ Add prebuilt entity]\(+ 事前構築済みエンティティの追加\)** を選択します。 **[geographyV2]** を選択し、 **[完了]** を選択します。 事前構築済みエンティティがアプリに追加されます。

    Pattern.any が含まれているパターンでエンティティが正しく抽出されない場合は、[明示的なリスト](reference-pattern-syntax.md#explicit-lists)を使用してこの問題を修正します。

1. エンティティの **[エンティティ]** ページ リストから、新しく追加された事前構築済み geographyV2 エンティティを選択します。
1. 新しいロールを追加するには、 **[No roles added]\(ロールは追加されていません\)** の横にある **+** を選択します。
1. **[Type role...]\(ロールの入力...\)** テキストボックスにロール `Origin` の名前を入力し、Enter を押します。 `Destination` の 2 つ目のロール名を追加し、Enter キーを押します。

    > [!div class="mx-imgBorder"]
    > ![Location エンティティに Origin ロールを追加している画面のスクリーンショット](media/how-to-add-entities//add-role-to-prebuilt-geographyv2-entity.png)

    ロールは構築済みのエンティティに追加されますが、そのエンティティを使用して発話に追加されることはありません。

### <a name="label-text-with-a-role-in-an-example-utterance"></a>サンプル発話のロールでテキストにラベルを付ける

> [!TIP]
> ロールは、機械学習エンティティのサブエンティティでラベル付けすることで置き換えることができます。

1. [LUIS ポータル](https://www.luis.ai)にサインインし、自分の**サブスクリプション**と**作成リソース**を選択して、その作成リソースに割り当てられているアプリを表示します。
1. **[マイ アプリ]** ページで自分のアプリの名前を選択して、そのアプリを開きます。
1. [Intent detail]\(意図の詳細\) ページに進みます。このページにはロールを使用するサンプル発話があります。
1. ロールでラベルを付けるには、サンプル発話でエンティティ ラベル (テキストの下の実線) を選択し、ドロップダウン リストから **[View in entity pane]\(エンティティ ペインで表示する\)** を選択します。

    > [!div class="mx-imgBorder"]
    > ![[View in entity palette]\(エンティティ パレットで表示する\) を選択している画面のスクリーンショット](media/add-entities/view-in-entity-pane.png)

    エンティティ パレットが右側で開きます。

1. エンティティを選択し、パレットの下部に移動し、ロールを選択します。

    > [!div class="mx-imgBorder"]
    > ![[View in entity palette]\(エンティティ パレットで表示する\) を選択している画面のスクリーンショット](media/add-entities/select-role-in-entity-palette.png)

<a name="add-pattern-any-entities"></a>
<a name="add-a-patternany-entity"></a>
<a name="create-a-pattern-from-an-utterance"></a>

## <a name="create-a-patternany-entity"></a>pattern.any エンティティの作成

**Pattern.any** エンティティは、[パターン](luis-how-to-model-intent-pattern.md)でのみ使用できます。


## <a name="do-not-change-entity-type"></a>エンティティの種類は変更しないでください

エンティティを作成するために追加または削除するものを LUIS は認識していないため、LUIS ではエンティティの種類を変更することは認められていません。 種類を変更するには、正しい種類の新しいエンティティを少し違う名前で作成することをお勧めします。 エンティティが作成されたら、それぞれの発話内で、古いラベルのエンティティ名を削除して新しいエンティティ名を追加します。 すべての発話でラベルが書き換えられたら、古いエンティティを削除します。


## <a name="next-steps"></a>次のステップ

> [!div class="nextstepaction"]
> [事前構築済みのモデルの使用](howto-add-prebuilt-models.md)

各項目の詳細情報
* [トレーニング](luis-how-to-train.md)方法
* [テスト](luis-interactive-test.md)方法
* [発行](luis-how-to-publish-app.md)方法
* パターン:
    * [概念](luis-concept-patterns.md)
    * [構文](reference-pattern-syntax.md)
* [事前構築済みエンティティの GitHub リポジトリ](https://github.com/Microsoft/Recognizers-Text)
* [データ抽出の概念](luis-concept-data-extraction.md)



