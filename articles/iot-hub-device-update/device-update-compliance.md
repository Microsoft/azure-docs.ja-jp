---
title: Azure IoT Hub 用デバイス更新のコンプライアンスについて理解する | Microsoft Docs
description: Azure IoT Hub 用デバイス更新でデバイスのコンプライアンス更新を測定する方法について説明します。
author: vimeht
ms.author: vimeht
ms.date: 2/11/2021
ms.topic: conceptual
ms.service: iot-hub-device-update
ms.openlocfilehash: ac6094efde8a32b1fcc04c55bbc537afeb4166f7
ms.sourcegitcommit: b4647f06c0953435af3cb24baaf6d15a5a761a9c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/02/2021
ms.locfileid: "101660686"
---
# <a name="device-update-compliance"></a>デバイス更新のコンプライアンス

IoT Hub 用のデバイス更新では、互換性のある更新プログラムの中で最新版がインストールされているデバイスの数がコンプライアンスによって測定されます。 デバイスに対して互換性がある更新プログラムの中で最新版がインストールされている場合、そのデバイスは準拠しています。 

たとえば、次の更新プログラムのデバイス更新の例を考えてみましょう。

|更新プログラムの名前|更新プログラムのバージョン|互換性のあるデバイス モデル|
|-----------|--------------|-----------------------|
|Update1    |1.0    |Model1|
|Update2    |1.0    |Model2|
|Update3    |2.0    |Model1|

たとえば、次のようにデプロイされたとします。

|展開名    |更新プログラムの名前    |対象グループ|
|-----------|--------------|-------------------|
|Deployment1    |Update1    |Group1|
|Deployment2    |Update2    |Group2|
|Deployment3    |Update3    |グループ 3|

今度は、次のデバイス、グループ メンバーシップ、インストール済みのバージョンの場合を考えてみます。

|deviceId   |デバイス モデル   |インストール済みの更新プログラムのバージョン|グループ |コンプライアンス|
|-----------|--------------|-----------------------|-----|---------|
|Device1    |Model1 |1.0    |Group1 |新しい更新プログラムを使用できます</span>|
|Device2    |Model1 |2.0    |グループ 3 |最新の更新プログラム|
|Device3    |Model2 |1.0    |Group2 |最新の更新プログラム|
|Device4    |Model1 |1.0    |グループ 3 |更新が進行中です|

Device1 と Device4 にはバージョン 1.0 がインストールされており、準拠しているとはされません。デバイス更新インスタンスの該当モデルに対して互換性がある最新版の Update3 が存在するためです。 Device2 と Device3 はいずれも準拠しているとされます。該当モデルに対して互換性がある最新版の更新プログラムがインストールされているためです。

更新プログラムがデバイスのグループにデプロイされるかどうかは、コンプライアンスでは考慮されません。デバイス更新に公開されているあらゆる更新プログラムが確認されます。 そのため、上の例では、Device1 にはそれにデプロイされている更新プログラムがインストールされていますが、非準拠と見なされます。 Device1 は Update3 が正常にインストールされるまで、引き続き非準拠として見なされます。 新しいデプロイが必要かどうかを判断する場合に、コンプライアンス ステータスが役立ちます。 

上に示すように、IoT Hub 用のデバイス更新には 3 つのコンプライアンス ステータスがあります。

*   **最新の更新プログラム** – デバイスには、デバイス更新に公開されている、最新バージョンの互換性のある更新プログラムがインストールされています。
*   **更新中** – 互換性がある最新版の更新プログラムをデバイスに配信するというプロセスがアクティブなデプロイで進行しています。
*   **新しい更新プログラムを使用できます** – 互換性がある最新版の更新プログラムがデバイスにインストールされておらず、その更新プログラムに対するアクティブなデプロイが進行していません。
