---
title: 削除されたアセットをスキャンが検出する方法
description: この記事では、削除されたアセットが Azure Purview アカウントによってスキャン中に検出される方法について説明します。
author: yaronyg
ms.author: yarong
ms.service: purview
ms.subservice: purview-data-catalog
ms.topic: conceptual
ms.date: 10/16/2020
ms.openlocfilehash: 9b1515ef00355c831e161c01227678197792cc20
ms.sourcegitcommit: 65db02799b1f685e7eaa7e0ecf38f03866c33ad1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/03/2020
ms.locfileid: "96551068"
---
# <a name="how-scans-detect-deleted-assets"></a>削除されたアセットをスキャンが検出する方法

この記事では、削除されたアセットを検出するために Azure Purview によってスキャン結果がどのように使用されるかについて説明します。

## <a name="background-info"></a>背景情報

Azure Purview カタログによってデータ ストアの状態が認識されるのは、スキャンが行われるときのみとなります。 ファイル、テーブル、またはコンテナーが削除されたかどうかをカタログで認識するためには、前回のスキャン出力を現在のスキャン出力と比較します。 たとえば、前回 Azure Data Lake Storage Gen2 アカウントをスキャンしたときに、*folder1* という名前のフォルダーが含まれていたとします。 同じアカウントを再度スキャンしたところ、*folder1* は存在しません。 そのため、そのフォルダーが削除されたとカタログによって認識されます。

## <a name="detecting-deleted-files"></a>削除されたファイルを検出する

不足しているファイルを検出するためのロジックは、同じユーザーおよび異なるユーザーによる複数のスキャンで機能します。 たとえば、あるユーザーがフォルダー A、B、C の Data Lake Storage Gen2 データ ストアに対して 1 回限りのスキャンを実行するとします。その後、同じアカウント内の別のユーザーが、同じデータ ストアのフォルダー C、D、E で 1 回限りのスキャンを別に実行します。 フォルダー C は 2 回スキャンされたため、削除の可能性がカタログによってチェックされます。 ただし、フォルダー A、B、D、E はスキャンされたのは 1 回のみであり、カタログによって削除されたアセットがチェックされることはありません。

削除されたファイルをカタログから除外するようにするためには、スキャンを定期的に実行することが重要です。 削除されたアセットは別のスキャンが実行されるまでカタログで検出されないため、スキャン間隔は重要です。 そのため、特定のストアについて 1 か月に 1 回スキャンを実行する場合、そのストア内の削除されたデータ アセットは、1 か月後に次のスキャンを実行するまでカタログで検出できません。

Data Lake Storage Gen2 のような大規模なデータ ストアを列挙する場合、情報を見逃してしまう要因は複数あります (列挙エラーや破棄されたイベントなど)。 ファイルが作成または削除されたことが特定のスキャンによって見逃されてしまうおそれがあります。 そのため、ファイルは削除されたとカタログで確定されない限り、カタログから削除されません。 この方式では、スキャンされたデータ ストアに存在しないファイルがカタログに存在する場合にエラーが発生するおそれがあることを意味します。 場合によっては、特定の削除されたアセットが把握されるまで、データ ストアを 2 回または 3 回スキャンする必要があります。

## <a name="next-steps"></a>次のステップ

Azure Purview カタログの使用を開始するには、[クイックスタートのPurview アカウントの作成](create-catalog-portal.md)に関するページをご覧ください。
