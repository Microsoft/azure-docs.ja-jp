---
title: Azure IoT Central アプリのデバイス テンプレートのバージョン管理について | Microsoft Docs
description: 新しいバージョンを作成することで、ライブ接続されたデバイスに影響を与えずにデバイス テンプレートを反復処理します
author: sarahhubbard
ms.author: sahubbar
ms.date: 12/09/2019
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: peterpr
ms.openlocfilehash: 1f2ecb37ebe156b1eb092bda95f296c39c9e2baf
ms.sourcegitcommit: 5ab4f7a81d04a58f235071240718dfae3f1b370b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/10/2019
ms.locfileid: "74974966"
---
# <a name="create-a-new-device-template-version-preview-features"></a>デバイス テンプレートの新しいバージョンを作成する (プレビュー機能)

[!INCLUDE [iot-central-pnp-original](../../../includes/iot-central-pnp-original-note.md)]

Azure IoT Central を使用すると、IoT アプリケーションを迅速に開発できます。 デバイス機能、ビュー、カスタマイズを追加または編集、削除することで、デバイス テンプレートの設計をすばやく反復できます。 デバイス テンプレートを公開すると、デバイス機能モデルの隣に鍵アイコンが付き、モデルが**公開済み**として表示されるようになります。 デバイス機能モデルに変更を加えるには、新しいバージョンのデバイス テンプレートを作成する必要があります。 一方で、クラウド プロパティ、カスタマイズ、ビューはすべて、デバイス テンプレートのバージョンを更新することなく、いつでも編集することができます。 これらの変更の保存後、デバイス テンプレートを公開すると、Device Explorer でオペレーターが最新の変更点を確認できるようになります。

> [!NOTE]
> デバイス テンプレートを作成する方法について詳しくは、[デバイス テンプレートの設定と管理](howto-set-up-template.md)に関する記事をご覧ください

## <a name="add-customizations-to-the-device-template-without-versioning"></a>バージョン更新を行わずにデバイス テンプレートにカスタマイズを追加する

デバイス機能の一部の要素については、デバイス テンプレートやインターフェイスのバージョンを更新することなく編集できます。 こうしたフィールドの例としては、表示名、セマンティックの種類、最小値、最大値、小数点以下桁数、色、単位、表示単位、コメント、説明などがあります。 これらのカスタマイズのいずれかを追加するには、次の手順に従います。

1. **[デバイス テンプレート]** ページに移動します。
1. カスタマイズするデバイス テンプレートを選択します。
1. **[カスタマイズ]** タブを選択します。
1. ここには、デバイス機能モデルで定義されているすべての機能の一覧が表示されます。 ここで編集可能なフィールドはすべて、保存してアプリケーション全体で使用できます。デバイス テンプレートのバージョンを更新する必要はありません。 読み取り専用のフィールドを編集する場合は、変更にあたって新しいバージョンのデバイス テンプレートを作成する必要があります。 編集するフィールドを選択して、新しい値を入力します。
1. **[Save]** をクリックします。 デバイス テンプレートにもともと保存されていた値が、これらの値でオーバーライドされます。以後は、新しい値がアプリケーション全体で使用されるようになります。

## <a name="versioning-a-device-template"></a>デバイス テンプレートのバージョンを更新する

デバイス テンプレートの新しいバージョンを作成すると、テンプレートのドラフト バージョンが作成されます。このバージョンで、デバイス機能モデルを編集できます。 公開済みのインターフェイスは、個別に新バージョンが作成されるまで公開済みのままになります。 公開済みのインターフェイスを変更するには、まず新しいバージョンのデバイス テンプレートを作成する必要があります。

デバイス テンプレートのバージョン更新は、デバイス機能モデルの要素のうち、デバイス テンプレートの [カスタマイズ] セクションでは編集不可能なものを編集する場合にのみ、行うようにしてください。 

新しいバージョンのデバイス テンプレートを作成するには:

1. **[デバイス テンプレート]** ページに移動します。
1. バージョンを更新するデバイス テンプレートを選択します。
1. ページ上部にある **[バージョン]** ボタンをクリックして、テンプレートに新しい名前を付けます。 編集可能な新しい名前が自動で提案されています。
1. **Create** をクリックしてください。
1. これで、デバイス テンプレートがドラフト モードになります。 インターフェイスはロックされたままであり、編集するには個別に新バージョンを作成する必要があります。 

### <a name="versioning-an-interface"></a>インターフェイスのバージョン更新

インターフェイスのバージョンを更新すると、作成済みのインターフェイス内にある機能を追加、更新、削除できます。 

インターフェイスのバージョンを更新するには:

1. **[デバイス テンプレート]** ページに移動します。
1. ドラフト モードになっているデバイス テンプレートを選択します。
1. バージョンを更新して編集する、公開済みモードのインターフェイスを選択します。
1. インターフェイス ページの上部にある **[バージョン]** ボタンをクリックします。 
1. **Create** をクリックしてください。
1. これで、インターフェイスがドラフト モードになります。 既存のカスタマイズやビューを損なうことなく、インターフェイスの機能を追加および編集できます。 

> [!NOTE]
> Azure IoT により公開されている標準インターフェイスについては、バージョン更新や編集ができません。 これらの標準インターフェイスは、デバイスの認定に使用されます。

> [!NOTE]
> インターフェイスを公開した後は、ドラフト モードであっても機能の削除は一切できません。 インターフェイスに機能を追加および編集できるのは、ドラフト モードのみです。


## <a name="migrate-a-device-across-device-template-versions"></a>デバイス テンプレートのバージョン間でデバイスを移行する

複数のバージョンのデバイス テンプレートを作成できます。 時間の経過と共に、接続された複数のデバイスがこれらのデバイス テンプレートを使用するようになります。 デバイス テンプレートの 1 つのバージョンから、別のバージョンに、デバイスを移行できます。 次の手順では、デバイスを移行する方法について説明します。

1. **デバイス エクスプローラー** ページに移動します。
1. 別のバージョンに移行する必要があるデバイスを選択します。
1. **[移行]** を選択します。
1. デバイスの移行先のバージョン番号が設定されているデバイス テンプレートを選択して、 **[移行]** を選択します。

![デバイスを移行する方法](media/howto-version-device-template/pick-version.png)

## <a name="next-steps"></a>次の手順

ここでは、Azure IoT Central アプリケーションでデバイス テンプレートのバージョンを使用する方法について説明しました。推奨される次の手順は以下のとおりです。

> [!div class="nextstepaction"]
> [テレメトリのルールを作成する方法](tutorial-create-telemetry-rules.md)
