---
title: Azure IoT Central アプリケーションでデバイス を作成して実行する | Microsoft Docs
description: Azure IoT Central のジョブを使用すると、プロパティの更新やコマンドの実行などの一括デバイス管理機能を行うことができます。
ms.service: iot-central
services: iot-central
author: sarahhubbard
ms.author: sahubbar
ms.date: 06/08/2020
ms.topic: how-to
ms.openlocfilehash: 406881a9131aae35b91dcab248745bb426cecf0e
ms.sourcegitcommit: c5021f2095e25750eb34fd0b866adf5d81d56c3a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/25/2020
ms.locfileid: "88797838"
---
# <a name="create-and-run-a-job-in-your-azure-iot-central-application"></a>Azure IoT Central アプリケーションでのジョブの作成と実行

Microsoft Azure IoT Central を使い、接続されている大量のデバイスを、ジョブを通して管理できます。 ジョブを使用すると、デバイスのプロパティを一括更新してコマンドを実行することができます。 この記事では、独自のアプリケーションでジョブの使用を始める方法について説明します。

## <a name="create-and-run-a-job"></a>ジョブの作成と実行

このセクションでは、ロジスティック ゲートウェイ デバイスのグループに対してライトしきい値を設定することにより、ジョブを作成および実行する方法について説明します。

1. 左側のペインで、 **[ジョブ]** を選択します。

2. **[+新規]** を選択します。

   ![ジョブを作成するための選択を示すスクリーンショット。](./media/howto-run-a-job/create-new-job.png)

3. 作成しているジョブを識別するための名前と説明を入力します。

4. ジョブを適用するターゲットのデバイス グループを選択します。 ジョブ構成が適用されるデバイスの数は、 **概要** セクションで確認できます。

5. 構成するジョブの種類として、 **[クラウド プロパティ]** 、 **[プロパティ]** 、または **[コマンド]** を選択します。 

   **プロパティ** のジョブ構成を設定するには、プロパティを選択し、新しい値を設定します。 **コマンド**のジョブ構成を設定するには、実行するコマンドを選択します。 プロパティ ジョブによって、複数のプロパティを設定できます。

   ![Set Light Threshold というプロパティ ジョブを作成するための選択を示すスクリーンショット。](./media/howto-run-a-job/configure-job.png)

6. **[実行]** または **[保存]** を選択します。 ジョブがメインの **[ジョブ]** ページに表示されます。 このページで、現在実行中のジョブと以前実行または保存したジョブの履歴を表示することができます。 いつでも保存したジョブをもう一度開いて、編集を続けたり、実行したりすることができます。

   ![作成されたジョブの名前、状態、および説明を示すスクリーンショット。](./media/howto-run-a-job/view-job.png)

   > [!NOTE]
   > 以前に実行したジョブの 30 日間の履歴を表示できます。

7. 保存したジョブを選択し、 **[実行]** ボタンを選択して実行します。 

   **[ジョブを実行しますか?]** ダイアログ ボックスが表示されます。 **[ジョブの実行]** ボタンを選択して確認します。 

   ![ジョブを実行することを確認するダイアログ ボックスのスクリーンショット。](./media/howto-run-a-job/run-job.png)

8. ジョブは、保留中、実行中、完了のフェーズを通過します。 ジョブ実行の詳細には、結果メトリック、期間の詳細、デバイス一覧グリッドが含まれています。 

   この概要で **[Results log]\(結果のログ\)** を選択して、デバイスやその状態の値など、ジョブの詳細の CSV ファイルをダウンロードすることもできます。 この情報は、トラブルシューティングに役立つことがあります。

   ![デバイスの状態を示すスクリーンショット。](./media/howto-run-a-job/download-details.png)

## <a name="manage-jobs"></a>ジョブの管理

実行中のジョブを停止するには、ジョブを開いて **[停止]** を選択します。 ジョブが停止されたことを反映するように、ジョブの状態が変更されます。 **[概要]** セクションには、完了、失敗、または保留中のデバイスが表示されます。

![実行中のジョブと、ジョブを停止するためのボタンを示すスクリーンショット。](./media/howto-run-a-job/manage-job.png)

ジョブが停止状態になったら、 **[続行]** を選択してジョブの実行を再開することができます。 ジョブが再び実行されるようになったことを反映して、ジョブの状態が変更されます。 **[概要]** セクションは、引き続き最新の進行状況で更新されます。

![停止されているジョブとジョブを続行するためのボタンを示すスクリーンショット。](./media/howto-run-a-job/stopped-job.png)

## <a name="copy-a-job"></a>ジョブをコピーする

既存のジョブのいずれかをコピーするには、 **[ジョブ]** ページでそれを選択してから、 **[ジョブの詳細]** を選択します。 **[ジョブの詳細]** ページが表示されます。 

![ジョブの詳細のページを示すスクリーンショット。](./media/howto-run-a-job/job-details.png)

**[コピー]** を選択します。

![[コピー] ボタンを示すスクリーン ショット。](./media/howto-run-a-job/job-details-copy.png)

ジョブ構成のコピーが開き、編集することができます。また **コピー** がジョブ名に追加されます。 新しいジョブを保存または実行できます。

![ジョブ構成のコピーを示すスクリーンショット。](./media/howto-run-a-job/copy-job.png)

## <a name="view-job-status"></a>ジョブの状態を見る

ジョブが作成されると、 **[状態]** 列がジョブの最新のステータス メッセージで更新されます。 ジョブが取り得る状態の値を次の表に示します。

| ステータス メッセージ       | ステータスの意味                                          |
| -------------------- | ------------------------------------------------------- |
| 完了            | このジョブはすべてのデバイスで実行されました。              |
| 失敗               | このジョブは失敗し、デバイスで完全には実行されませんでした。  |
| 保留中              | このジョブはデバイスでまだ実行が開始されていません。         |
| 実行中              | このジョブはデバイスで現在実行中です。             |
| 停止済み              | ユーザーがこのジョブを手動で停止しました。           |

ステータス メッセージには、ジョブ内のデバイスの概要が続きます。 可能なデバイスの状態の値を次の表に示します。

| ステータス メッセージ       | ステータスの意味                                                     |
| -------------------- | ------------------------------------------------------------------ |
| 成功            | ジョブが正常に実行されたデバイスの数。       |
| 失敗               | ジョブの実行が失敗したデバイスの数。       |

ジョブの状態と影響を受けるすべてのデバイスを表示するには、ジョブを開きます。 各デバイス名の隣に、次のステータス メッセージのいずれかが表示されます。

| ステータス メッセージ       | ステータスの意味                                                                |
| -------------------- | ----------------------------------------------------------------------------- |
| 完了            | このデバイスでジョブが実行されました。                                     |
| 失敗               | このデバイスでジョブの実行が失敗しました。 エラー メッセージに詳細情報が表示されます。  |
| 保留中              | このデバイスではジョブがまだ実行されていません。                                   |

ジョブの詳細やデバイスの一覧やその状態の値などを含む CSV ファイルをダウンロードするには、 **[ダウンロード]** を選択します。

## <a name="filter-the-device-list"></a>デバイス一覧のフィルター処理

**[ジョブの詳細]** ページでフィルター アイコンを選択すると、デバイスの一覧をフィルター処理できます。 **[デバイス ID]** または **[状態]** フィールドでフィルター処理できます。

:::image type="content" source="media/howto-run-a-job/filter.png" alt-text="デバイス一覧のフィルター処理の選択を示すスクリーンショット。":::

## <a name="customize-columns-in-the-device-list"></a>デバイス一覧の列をカスタマイズする

列のオプション アイコンを選択すると、デバイスの一覧に表示する列を追加できます。

:::image type="content" source="media/howto-run-a-job/column-options.png" alt-text="列オプションのアイコンを示すスクリーンショット。":::

ダイアログ ボックスで、デバイス一覧に表示する列を選択できます。 表示する列を選択し、右矢印を選択して、 **[OK]** を選択します。 使用できるすべての列を選択するには、 **[すべて選択]** をオンにします。

:::image type="content" source="media/howto-run-a-job/column-picker-popup.png" alt-text="表示する列を選択するためのダイアログ ボックスを示すスクリーンショット。":::

選択した列が、デバイス一覧に表示されます。

:::image type="content" source="media/howto-run-a-job/column-picker-column-selected.png" alt-text="デバイス一覧で選択されている列を示すスクリーンショット。":::

選択した列は、ユーザー セッション全体、またはアプリケーションにアクセスできるユーザー セッション間で保持されます。

## <a name="rerun-jobs"></a>ジョブの再実行

失敗したデバイスを含むジョブは再実行することができます。 **[Rerun on failed]\(失敗したら再実行\)** を選択します。

:::image type="content" source="media/howto-run-a-job/rerun.png" alt-text="失敗したデバイスでジョブを再実行するためのボタンを示すスクリーンショット。":::

ジョブの名前と説明を入力して、 **[ジョブの再実行]** を選択します。 失敗したデバイスで操作を再試行する新しいジョブが送信されます。

:::image type="content" source="media/howto-run-a-job/rerun-failed.png" alt-text="失敗したデバイスを再実行するためのダイアログ ボックスを示すスクリーンショット。":::

> [!NOTE]
> Azure IoT Central アプリケーションから 5 つより多くのジョブを同時に実行することはできません。
>
> ジョブが完了し、ジョブのデバイス一覧にあるデバイスを削除すると、デバイス エントリでデバイス名に削除済みと表示されます。 削除されたデバイスでは、詳細リンクを利用できません。

## <a name="next-steps"></a>次のステップ

ここでは、Azure IoT Central アプリケーションでジョブを作成する方法について説明しました。次の手順は以下のとおりです。

- [デバイスの管理](howto-manage-devices.md)
- [バージョン、デバイス テンプレート](howto-version-device-template.md)
