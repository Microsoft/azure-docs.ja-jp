---
title: Azure Portal で Azure Search インデックスを作成する - Azure Search
description: ポータルに組み込まれているインデックス デザイナーを使用して Azure Search のインデックスを作成する方法について説明します。
manager: nitinme
author: heidisteen
services: search
ms.service: search
ms.topic: conceptual
ms.date: 10/02/2019
ms.author: heidist
ms.openlocfilehash: 4abef5a3030643d4c7b91d2911f350190972f1eb
ms.sourcegitcommit: f2d9d5133ec616857fb5adfb223df01ff0c96d0a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/03/2019
ms.locfileid: "71937263"
---
# <a name="create-an-azure-search-index-in-the-portal"></a>ポータルで Azure Search インデックスを作成する

Azure Search では、プロトタイプまたは Azure Search サービスでホストされる[検索インデックス](search-what-is-an-index.md)の作成に役立つインデックス デザイナーがポータルに組み込まれています。 このツールは、スキーマの構築に使用されます。 定義を保存すると、空のインデックス全体が Azure Search で表現されます。 インデックスに検索可能なコンテンツを読み込む方法は指定されていません。

インデックス デザイナーは、インデックスを作成する 1 つの方法です。 または、[データのインポート ウィザード](search-get-started-portal.md)を使用して、インデックスの作成と読み込みを行うこともできます。 このウィザードでは、このウィザード自身が作成したインデックスのみが機能します。 プログラムでは、[.NET](search-create-index-dotnet.md) または [REST](search-create-index-rest-api.md) API を使用して、インデックスを作成できます。

## <a name="start-index-designer"></a>インデックス デザイナーを開始する

1. [Azure Portal](https://portal.azure.com) にサインインし、サービス ダッシュボードを開きます。 ジャンプ バーの **[すべてのサービス]** をクリックすると、現在のサブスクリプションの既存の "検索サービス" を検索できます。 

2. ページの上部にあるコマンド バーの **[インデックスの追加]** リンクをクリックします。

   ![コマンド バーの [インデックスの追加] リンク](media/search-create-index-portal/add-index.png "コマンド バーの [インデックスの追加] リンク")

3. Azure Search インデックスに名前を付けます。 インデックス名は、インデックス作成とクエリ操作で参照されます。 インデックス名は、そのインデックスへの接続や、Azure Search REST API で HTTP 要求を送信するために使用されるエンドポイント URL の一部になります。

   * 文字で始めます。
   * 小文字、数字、またはダッシュ ("-") のみを使用してください。
   * 名前を 60 文字に制限します。

## <a name="add-fields"></a>フィールドを追加する

インデックスの構成には、インデックス内の検索可能なデータを定義する*フィールド コレクション*が含まれています。 フィールド コレクションは、個別にアップロードするドキュメントの構造を指定します。 フィールド コレクションには、必須フィールドと省略可能フィールド (名前および型指定付き) が、そのフィールドを使用する方法を決定するインデックス属性と共に含まれています。

1. アップロードするドキュメントを完全に指定するためのフィールドを追加し、それぞれに[データ型](https://docs.microsoft.com/rest/api/searchservice/supported-data-types)を設定します。 たとえば、ドキュメントが *hotel-id*、*hotel-name*、*address*、*city*、および *region* で構成されている場合は、インデックス内のそれぞれに対応するフィールドを作成します。 属性の設定に役立つ情報については、[下のセクションにある設計ガイダンス](#design)を参照してください。

1. 受信データ自体が階層化されている場合、入れ子構造を表すために、スキーマには[複合型](search-howto-complex-data-types.md)が含まれている必要があります。 あらかじめ登録されているサンプル データ セットである Hotels (ホテル) は、各ホテルとの一対一のリレーションシップを持つ Address (複数のサブフィールドを含む) と、各ホテルに複数の部屋が関連付けられている複合型コレクションの Rooms を使用した複合型を示しています。 

1. 型 Edm.String の *key* フィールドを指定します。 キー フィールドはどの Azure Search インデックスにも必須であり、かつ文字列である必要があります。 このフィールドの値で、各ドキュメントが一意に識別される必要があります。 既定では、このフィールドには *id* という名前が付けられますが、文字列が[名前付け規則](https://docs.microsoft.com/rest/api/searchservice/Naming-rules)を満たす限り、その名前を変更できます。 たとえば、フィールド コレクションに *hotel-id* が含まれている場合は、それをキーに選択します。 

1. 各フィールドに属性を設定します。 インデックス デザイナーでは、そのデータ型に対して無効な属性は除外されますが、含める必要がある値は提案されません。 属性の目的を理解するには、次のセクションのガイダンスを参照してください。

    Azure Search API のドキュメントには、単純な*ホテル* インデックスを処理するコード例が含まれています。 下のスクリーンショットでは、インデックス定義中に指定されたフランス語の言語アナライザーを含むインデックス定義を確認できます。これは、ポータルで実習問題として再作成できます。

    ![ホテル デモのインデックス](media/search-create-index-portal/field-definitions.png "ホテル デモのインデックス")

1. 完了したら、 **[作成]** をクリックしてインデックスを保存および作成します。

<a name="design"></a>

## <a name="set-attributes"></a>属性の設定

いつでも新しいフィールドを追加できますが、既存のフィールド定義はインデックスの有効期間の間ロックされます。 このため、開発者は通常、単純なインデックスを作成したり、アイデアをテストしたり、ポータル ページを使用して設定を検索したりするためのポータルを使用します。 インデックスを容易に再構築できるようにコード ベースのアプローチに従う場合は、インデックス設計を頻繁に反復する方がより効率的です。

インデックスが保存される前に、アナライザーとサジェスターがフィールドに関連付けられます。 インデックス定義の作成時に、言語アナライザーまたはサジェスターを追加するようにしてください。

文字列フィールドは多くの場合、**検索可能**および**取得可能**としてマークされます。 検索結果を絞り込むために使用されるフィールドには、**並べ替え可能**、**フィルター可能**、および**ファセット可能**が含まれます。

フィールド属性は、フィールドがどのように使用されるか (フルテキスト検索、ファセット ナビゲーション、並べ替えなどの操作で使用されるかどうか) を決定します。 次の表は、各属性を示しています。

|Attribute|説明|  
|---------------|-----------------|  
|**検索可能**|フルテキスト検索可能であり、インデックス作成中の単語分割などの字句解析に従います。 検索可能フィールドを "sunny day" などの値に設定した場合、その値は内部的に個別のトークン "sunny" と "day" に分割されます。 詳細については、「[フルテキスト検索のしくみ](search-lucene-query-architecture.md)」を参照してください。|  
|**フィルター可能**|**$filter** クエリで参照されます。 型 `Edm.String` または `Collection(Edm.String)` のフィルター可能フィールドは単語分割されないため、比較は完全に一致するかどうかだけになります。 たとえば、このようなフィールドを "sunny day" に設定した場合、`$filter=f eq 'sunny'` では一致が見つかりませんが、`$filter=f eq 'sunny day'` では見つかります。 |  
|**並べ替え可能**|既定では、システムは結果をスコアで並べ替えますが、ドキュメント内のフィールドに基づいて並べ替えを構成できます。 型 `Collection(Edm.String)` のフィールドを**並べ替え可能**にすることはできません。 |  
|**ファセット可能**|通常、カテゴリ (たとえば、特定の市にあるホテル) ごとのヒット カウントを含む検索結果のプレゼンテーションで使用されます。 このオプションは、 `Edm.GeographyPoint`型のフィールドでは使用できません。 **フィルター可能**、**並べ替え可能**、または**ファセット可能**である型 `Edm.String` のフィールドの長さは、最大 32 キロバイトです。 詳細については、「[Create Index (REST API) (インデックスの作成 (REST API))](https://docs.microsoft.com/rest/api/searchservice/create-index)」を参照してください。|  
|**key**|インデックス内のドキュメントの一意識別子。 キー フィールドとして正確に 1 つのフィールドを選択する必要があり、それは型 `Edm.String` である必要があります。|  
|**取得可能**|検索結果でこのフィールドを返すことができるかどうかを決定します。 これは、あるフィールド (*利幅* など) をフィルター、並べ替え、またはスコア付けのメカニズムとして使用するが、このフィールドをエンド ユーザーには表示したくない場合に役立ちます。 `true` for `key` である必要があります。|  

## <a name="next-steps"></a>次の手順

Azure Search インデックスを作成した後、次の手順である「[upload searchable data into the index (検索可能なデータをインデックスにアップロードする)](search-what-is-data-import.md)」に移動できます。

あるいは、[インデックスをより深く調査する](search-what-is-an-index.md)こともできます。 フィールド コレクションに加えて、インデックスはアナライザー、サジェスター、スコアリング プロファイル、CORS の各設定も指定します。 ポータルは、最も一般的な要素であるフィールド、アナライザー、およびサジェスターを定義するためのタブ付きページを提供します。 その他の要素を作成または変更するには、REST API または .NET SDK を使用できます。

## <a name="see-also"></a>関連項目

 [フルテキスト検索のしくみ](search-lucene-query-architecture.md)  
 [検索サービス REST API](https://docs.microsoft.com/rest/api/searchservice/) [.NET SDK](https://docs.microsoft.com/dotnet/api/overview/azure/search?view=azure-dotnet)

