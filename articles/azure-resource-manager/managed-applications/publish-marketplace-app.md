---
title: マーケットプレースのマネージド アプリ
description: Marketplace を介して利用できる Azure マネージド アプリケーションについて説明します。
author: tfitzmac
ms.topic: tutorial
ms.date: 07/17/2019
ms.author: tomfitz
ms.openlocfilehash: a5e2a3569c70404d64d24ecfc35a8258ea864a4f
ms.sourcegitcommit: 11e2521679415f05d3d2c4c49858940677c57900
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/31/2020
ms.locfileid: "87480426"
---
# <a name="tutorial-publish-azure-managed-applications-in-the-marketplace"></a>チュートリアル:Azure マネージド アプリケーションを Marketplace で公開する

ベンダーは、Azure マネージド アプリケーションを使用して、各自のソリューションを、すべての Azure Marketplace ユーザーに提供できます。 これらのベンダーには、マネージド サービス プロバイダー (MSP)、独立系ソフトウェア ベンダー (ISV)、およびシステム インテグレーター (SI) を含めることができます。 マネージド アプリケーションは、顧客のメンテナンスとサービスのオーバーヘッドを削減します。 ベンダーは Marketplace を通じてインフラストラクチャとソフトウェアを販売できます。 また、サービスと運用サポートをマネージド アプリケーションに付加できます。 詳細については、[マネージド アプリケーションの概要](overview.md)に関するページをご覧ください。

この記事では、アプリケーションを Marketplace に発行して、顧客が幅広く利用できるようにする方法について説明します。

## <a name="prerequisites-for-publishing-a-managed-application"></a>マネージド アプリケーションを発行するための前提条件

この記事を完了するには、マネージド アプリケーション定義の .zip ファイルを既に用意している必要があります。 詳細については、[サービス カタログ アプリケーションの作成](publish-service-catalog-app.md)に関する記事を参照してください。

いくつかのビジネス上の前提条件があります。 これらは次のとおりです。

* 貴社またはその子会社は、Marketplace によって販売がサポートされる国/地域に所在している必要があります。
* Marketplace でサポートされている課金モデルに対応した方法で、製品のライセンスを取得する必要があります。
* 商取引上合理的な方法で、顧客が技術サポートを利用できるようにします。 無償、有償、コミュニティ サポートの活用など、方法は問いません。
* 貴社のソフトウェアおよび依存関係にあるすべてのサード パーティ ソフトウェアにライセンスを供与します。
* Marketplace および Azure Portal にプランが掲載されるための条件を満たすコンテンツを提供します。
* Azure Marketplace 参加ポリシーと発行者契約の条項に同意します。
* 使用条件、Microsoft のプライバシーに関する声明、および Microsoft Azure 認定プログラム契約に従うことに同意します。

また、Marketplace アカウントも持っている必要があります。 アカウントを作成するには、「[Commercial Marketplace アカウントをパートナー センターで作成する方法](../../marketplace/partner-center-portal/create-account.md)」を参照してください。

## <a name="create-a-new-azure-application-offer"></a>新しい Azure アプリケーション プランの作成

パートナー ポータル アカウントを作成したら、マネージド アプリケーション プランを作成できます。

### <a name="set-up-an-offer"></a>プランの設定

マネージド アプリケーション用のプランは、発行者から提供される製品のクラスに相当します。 Marketplace で入手できるようにする新しい種類のアプリケーションがある場合は、それを新しいプランとして設定できます。 プランとは、SKU のコレクションです。 各プランは、Marketplace で独自のエンティティとして表示されます。

1. [クラウド パートナー ポータル](https://cloudpartner.azure.com/)にサインインします。

1. 左側のナビゲーション バーで、 **[+ 新しいプラン]**  >  **[Azure Applications]\(Azure アプリケーション\)** を選択します。

1. **[エディター]** ビューに必要なフォームが表示されます。 各フォームについては、この記事の後半で説明します。

## <a name="offer-settings-form"></a>[プランの設定] フォーム

**[プランの設定]** フォームには、次のフィールドがあります。

* **プラン ID**: この一意識別子は、発行元プロファイル内のプランを特定します。 この ID は、製品 URL、Resource Manager テンプレート、課金レポートに表示されます。 小文字の英数字またはハイフン (-) のみで構成できます。 ID の末尾にはダッシュを使用できません。 最大 50 文字に制限されます。 プランの運用が開始されると、このフィールドはロックされます。
* **発行元 ID**: このドロップダウン リストを使用して、このプランを発行するための発行元プロファイルを選択します。 プランの運用が開始されると、このフィールドはロックされます。
* **Name**:このプランの表示名は、Marketplace とポータルに表示されます。 最大で 50 文字の長さにできます。 製品の覚えやすいブランド名を使用してください。 また、販売方法である場合を除き、ここでは会社名を使用しないでください。 このプランを貴社の Web サイトでマーケティングしている場合は、この名前が、貴社の Web サイトで表示される名前とまったく同じであることを確認します。

操作が終わったら、 **[保存]** を選択して進捗状況を保存します。

## <a name="skus-form"></a>[SKU] フォーム

次の手順では、作成したプラン用に SKU を追加します。

SKU とは、プランの購入可能な最小単位です。 同じ製品クラス (プラン) 内では、SKU を使用して次を区別できます。

* サポートされる各種機能
* プランが管理対象か管理対象外か
* サポートされる課金モデル

SKU は、Marketplace では親プランの下に表示されます。 Azure Portal では、独自の購入可能エンティティとして表示されます。

1. **[SKU]**  >  **[新しい SKU]** を選択します。

1. **SKU ID** を入力します。 SKU ID は、プラン内の SKU を表す一意識別子です。 この ID は、製品 URL、Resource Manager テンプレート、課金レポートに表示されます。 小文字の英数字またはハイフン (-) のみで構成できます。 ID の末尾にはダッシュを使用できず、最大 50 文字に制限されます。 プランの運用が開始されると、このフィールドはロックされます。 プラン内の SKU を複数にすることができます。 発行するイメージごとに SKU が必要です。

1. 次のフォームの **[SKU Details]\(SKU の詳細\)** セクションに入力します。

   次のフィールドに入力します。

   * **[タイトル]** :この SKU のタイトルを入力します。 このタイトルは、ギャラリーでこの項目に対して表示されます。
   * **概要**:この SKU の簡単な概要を入力します。 このテキストは、タイトルの下に表示されます。
   * **説明**:SKU に関する詳細な説明を入力します。
   * **SKU の種類**: 使用できる値は、 *[Managed Application]\(マネージド アプリケーション\)* と *[ソリューション テンプレート]* です。 この場合は、 *[Managed Application]\(マネージド アプリケーション\)* を選択します。
   * **提供先の国/地域**: マネージド アプリケーションを利用できる国/地域を選択します。
   * **価格**: アプリケーションを管理するための価格を指定します。 価格を設定する前に、利用可能な国/地域を選択します。

1. 新しいパッケージを追加します。 次のフォームの **[パッケージの詳細]** セクションに入力します。

   次のフィールドに入力します。

   * **バージョン**:アップロードするパッケージのバージョンを入力します。 `{number}.{number}.{number}{number}` 形式にする必要があります。
   * **パッケージ ファイル (.zip)** : このパッケージには、.zip パッケージに圧縮された 2 つの必須ファイルが含まれています。 1 つのファイルは、マネージド アプリケーションでデプロイするリソースを定義する Resource Manager テンプレートです。 もう 1 つのファイルは、コンシューマーがポータルを使用してマネージド アプリケーションをデプロイするための[ユーザー インターフェイス](create-uidefinition-overview.md)を定義します。 ユーザー インターフェイスでは、コンシューマーがパラメーター値を入力できるようにする要素を指定します。
   * **テナント ID**:アクセスを取得するアカウントのテナント ID。
   * **[Enable JIT Access?]\(JIT アクセスの有効化\)** :アカウントで [Just-In-Time アクセス制御](request-just-in-time-access.md)を有効にするには、 **[はい]** を選択します。 有効にすると、指定した期間、コンシューマーのアカウントへのアクセスを要求します。 マネージド アプリケーションのコンシューマーがあなたのアカウントに永続アクセスを付与するように要求するには、 **[いいえ]** を選択します。
   * **[Customize allowed customer actions?]\(許可された顧客のアクションをカスタマイズしますか?\)** : **[はい]** を選択して、コンシューマーが管理対象リソースに対して実行できるアクションを指定します。
   * **[Allowed customer actions]\(許可される顧客のアクション\)** :前の設定で **[はい]** を選択した場合は、[Azure リソースの拒否割り当て](../../role-based-access-control/deny-assignments.md)を使用して、コンシューマーに許可するアクションを指定できます。

     使用できるアクションについては、「[Azure Resource Manager のリソース プロバイダー操作](../../role-based-access-control/resource-provider-operations.md)」を参照してください。 たとえば、仮想マシンの再起動をコンシューマーに許可するには、許可されているアクションに `Microsoft.Compute/virtualMachines/restart/action` を追加します。 `*/read` アクションは自動的に許可されるので、この設定を含める必要はありません。
   * **PrincipalId**: このプロパティは、顧客のサブスクリプション内のリソースへのアクセス権が付与されているユーザー、ユーザー グループ、またはアプリケーション の Azure Active Directory (Azure AD) 識別子です。 ロールの定義では、アクセス許可について説明します。
   * **ロール定義**: このプロパティは、Azure AD によって提供されている Azure のすべての組み込みロールの一覧です。 最も適切なロールを選択して使用することで、顧客に代わってリソースを管理できます。
   * **ポリシー設定**: マネージド アプリケーションに [Azure Policy](../../governance/policy/overview.md) を適用して、デプロイしたソリューションのコンプライアンス要件を指定します。 使用可能なオプションから、適用するポリシーを選択します。 **[ポリシー パラメーター]** には、パラメーターの値を含んだ JSON 文字列を指定します。 ポリシーの定義とパラメーター値の形式については、「[Azure Policy のサンプル](../../governance/policy/samples/index.md)」を参照してください。

複数の認可を追加できますが、 AD ユーザー グループを作成し、その ID を **PrincipalId** で指定することをお勧めします。 これにより、SKU を更新せずに、より多くのユーザーをユーザー グループに追加できます。

RBAC の詳細については、[Azure Portal での RBAC の使用](../../role-based-access-control/overview.md)に関するページをご覧ください。

## <a name="marketplace-form"></a>[Marketplace] フォーム

[Marketplace] フォームでは、[Azure Marketplace](https://azuremarketplace.microsoft.com) と [Azure Portal](https://portal.azure.com/) に表示するフィールドについて確認します。

### <a name="preview-subscription-ids"></a>サブスクリプション ID をプレビュー

発行されたオファーにアクセスできる Azure サブスクリプション ID の一覧を入力します。 このホワイトリストに追加されたサブスクリプションを使用して、プレビューされたオファーを運用開始前にテストできます。 パートナー ポータルでは、最大 100 個のサブスクリプションの許可リストをコンパイルできます。

### <a name="suggested-categories"></a>推奨されるカテゴリ

プランとの最適な関連付けが可能な最大 5 つのカテゴリを、一覧から選択します。 このカテゴリは、[Azure Marketplace](https://azuremarketplace.microsoft.com) と [Azure Portal](https://portal.azure.com/) で利用可能な製品カテゴリに、プランをマッピングするときに使用されます。

#### <a name="azure-marketplace"></a>Azure Marketplace

マネージド アプリケーションの概要には、次のフィールドが表示されます。

![Marketplace の概要](./media/publish-marketplace-app/publishvm10.png)

マネージド アプリケーションの **[概要]** タブには、次のフィールドが表示されます。

![Marketplace の概要](./media/publish-marketplace-app/publishvm11.png)

マネージド アプリケーションの **[プランと価格]** タブには、次のフィールドが表示されます。

![Marketplace のプラン](./media/publish-marketplace-app/publishvm15.png)

#### <a name="azure-portal"></a>Azure portal

マネージド アプリケーションの概要には、次のフィールドが表示されます。

![ポータルの概要](./media/publish-marketplace-app/publishvm12.png)

マネージド アプリケーションの概要には、次のフィールドが表示されます。

![ポータルの概要](./media/publish-marketplace-app/publishvm13.png)

#### <a name="logo-guidelines"></a>ロゴのガイドライン

クラウド パートナー ポータルにアップロードするロゴについては、必ず以下のガイドラインに従ってください。

*   Azure の設計には簡単なカラー パレットがあります。 ロゴのプライマリ カラーとセカンダリ カラーの数は制限してください。
*   ポータルのテーマの色は白黒です。 この色を、ロゴの背景色として使用しないでください。 ポータルでロゴが目立つ色を使用します。 背景色としてはシンプルなプライマリ カラーをお勧めします。 "*透明な背景を使用している場合は、ロゴおよびテキストが白、黒、または青ではないことを確認します。* "
*   ロゴではグラデーションの背景を使用しないでください。
*   ロゴにはテキストを使用しないでください (会社またはブランドの名前であっても)。 ロゴのルック アンド フィールはフラットにして、グラデーションは避ける必要があります。
*   ロゴが伸縮されていないことを確認してください。

#### <a name="hero-logo"></a>Hero ロゴ

Hero ロゴはオプションです。 発行元は、Hero ロゴをアップロードしなくてもかまいません。 Hero アイコンがアップロードされたら、削除できません。 その時点で、パートナーは、Hero アイコンの Marketplace ガイドラインに従う必要があります。

Hero ロゴ アイコンに関するガイドラインに従ってください。

*   発行元表示名、プランのタイトル、およびオファーの長い概要は、白のフォント色で表示されます。 したがって、Hero アイコンの背景には明るい色を使用しないでください。 黒、白、または透明の背景は、Hero アイコンでは許可されていません。
*   プランが表示されると、プログラムによって Hero ロゴ内に要素が埋め込まれます。 埋め込み要素として、発行元表示名、プラン タイトル、オファーの概要 (長文)、 **[作成]** ボタンなどがあります。 したがって、Hero ロゴのデザイン時にはテキストを入力しないでください。 テキストはプログラムによってその場所に挿入されるため、右側にはスペースを空けておいてください。 右側のテキスト用の空のスペースは 415 x 100 ピクセルです。 左からのオフセットは 370 ピクセルです。

    ![Hero ロゴの例](./media/publish-marketplace-app/publishvm14.png)

## <a name="support-form"></a>[サポート] フォーム

**[サポート]** フォームには、会社のサポート連絡先情報を入力します。 たとえば、エンジニアリングやカスタマー サポートの連絡先情報です。

## <a name="publish-an-offer"></a>プランの発行

すべてのセクションを完了したら、 **[発行]** を選択して、このプランを顧客が使用できるようにするためのプロセスを開始します。

## <a name="next-steps"></a>次のステップ

* **[発行]** をクリックした後のことについては、「[Azure アプリケーション オファーを公開する](../../marketplace/partner-center-portal/create-new-azure-apps-offer.md)」を参照してください。
* マネージド アプリケーションの概要については、[マネージド アプリケーションの概要](overview.md)に関するページをご覧ください。
* サービス カタログ マネージド アプリケーションの発行については、「[サービス カタログ マネージド アプリケーションの作成と発行](publish-service-catalog-app.md)」を参照してください。
