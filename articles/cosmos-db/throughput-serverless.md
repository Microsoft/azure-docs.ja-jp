---
title: Azure Cosmos DB でのプロビジョニングされたスループットとサーバーレスの選択方法
description: ワークロードに対してプロビジョニングされたスループットとサーバーレスのどちらを選択するかについて説明します。 
author: ThomasWeiss
ms.author: thweiss
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 08/19/2020
ms.openlocfilehash: 
ms.sourcegitcommit: 
ms.translationtype: 
ms.contentlocale: ja-JP
ms.lasthandoff: 
ms.locfileid: 
---

# プロビジョニングされたスループットとサーバーレスの選択方法

Azure Cosmos DB は、[プロビジョニングされたスループット](set-throughput.md)と[サーバーレス](serverless.md)の 2 つの異なる容量モードで利用できます。どちらのモードでも全く同じデータベース操作を実行することができますが、これらの操作に対して請求される方法が根本的に異なります。次のビデオでは、これらのモードの主な違いと、それらが異なるタイプのワークロードにどのように適合するかを説明します:

> [!VIDEO https://www.youtube.com/embed/CgYQo6uHyt0]

> [!NOTE]
> サーバーレスは現在、Azure Cosmos DB Core (SQL) API でのみサポートされています。

## 詳細な比較

| 基準 | プロビジョニングされたスループット | サーバーレス |
| --- | --- | --- |
| 状態 | 一般利用可能 | プレビュー中 |
| 最適 | 予測可能なパフォーマンスを必要とするミッションクリティカルなワークロード | トラフィックが少ない中小規模の非クリティカルなワークロード |
| 使い方 | コンテナーごとに、1 秒あたりの[要求ユニット](request-units.md)表されるスループットをプロビジョニングします。プロビジョニングされたスループットは手動で更新することも、[オートスケール](provision-throughput-autoscale.md)を使用して自動的に調整することもできます。 | 容量をプロビジョニングする必要なく、コンテナーに対してデータベース操作を実行します。 |
| アカウントごとの制限 | Azure リージョンの最大数: 無制限 | Azure リージョンの最大数: 1 |
| コンテナーごとの制限 | 最大スループット: 無制限<br>最大ストレージ: 無制限 | 最大スループット: 5,000 RU/s<br>最大ストレージ: 50 GB |
| パフォーマンス | SLA でカバーされる 99.99% から 99.999% の可用性<br>SLA の対象となるポイント読み取りおよび書き込みのレイテンシは 10 ミリ秒未満<br>SLA でカバーされた 99.99% のスループットを保証 | SLA でカバーされる 99.9% から 99.99% の可用性<br>ポイント読み取りの場合は 10 ミリ秒未満の遅延、書き込みの場合は 30 ミリ秒未満が SLO の対象<br>SLO でカバーされる 95% のバースト性 |
| 課金モデル | 課金は、消費された RU の量に関係なく、プロビジョニングされた RU/s に対して 1 時間ごとに行われます。 | 課金は、データベース操作によって消費された RU の量について、1 時間ごとに行われます。 |

> [!IMPORTANT]
> サーバーレスの一般提供が開始されると、サーバーレスの制限の一部が緩和または削除される可能性があり、**あなたのフィードバック**が判断に役立つでしょう！サーバーレスの経験について、もっと詳しく教えてください: [azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com).

## バースト性と予想される消費

状況によっては、与えられたワークロードに対してプロビジョニングされたスループットとサーバーレスのどちらを選択すべきかが不明確な場合があります。この判断を支援するため、以下のように見積もることができます:

- ワークロードの**バースト性**の要件、つまり、1 秒間に消費する必要がある RU の最大量
- 全体の**予想される消費量**、つまり、1 か月に消費できる RU の総数 ([こちら](plan-manage-costs.md#estimating-serverless-costs)に示されている表の助けを借りて、これを推定することができます)

ワークロードで毎秒 5,000 RU を超えるバーストが必要な場合、サーバーレスコンテナーはこの制限を超えてバーストできないため、プロビジョニングされたスループットを選択する必要があります。そうでない場合は、予想される消費量に基づいて両方のモードのコストを比較できます。

**例 1**: ワークロードは、1 か月で最大 10,000 RU/s までバーストし、1 か月間で合計 20,000,000,000 RUs を消費することが予想される。

- プロビジョニングされたスループットモードのみが 10,000 RU/s のスループットを提供できます

**例 2**: ワークロードは、最大 500 RU/s までバーストし、1 か月で合計 20,000,000 RUs を消費すると予想される。

- プロビジョニングされたスループットモードで、500 RU/s のコンテナーをプロビジョニングした時の毎月のコスト: $0.008 * 5 * 730 = **$29.20**
- サーバーレスモードで、消費された RU へのコスト: $0.25 * 20 = **$5.00**

**例 3**: ワークロードは、最大 500 RU/s までバーストし、1 か月で合計 250,000,000 RUs を消費すると予想される。

- プロビジョニングされたスループットモードで、500 RU/s のコンテナーをプロビジョニングした時の毎月のコスト: $0.008 * 5 * 730 = **$29.20**
- サーバーレスモードで、消費された RU へのコスト: $0.25 * 250 = **$62.50**

(これらの例は、2つのモード間で同じであるストレージコストを考慮していません)

> [!NOTE]
> 前の例で示したコストは、デモンストレーションのみを目的としています。最新の料金情報については、[料金ページ](https://azure.microsoft.com/pricing/details/cosmos-db/)をご覧ください。

## 次のステップ

- [Azure Cosmos DB でのプロビジョニングスループット](set-throughput.md) の詳細を読む
- [Azure Cosmos DB サーバレス](serverless.md) の詳細を読む
- [要求ユニット](request-units.md) の概念を理解する
