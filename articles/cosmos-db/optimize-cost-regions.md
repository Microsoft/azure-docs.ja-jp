---
title: Azure Cosmos DB の複数リージョン デプロイにかかるコストを最適化する
description: この記事では、Azure Cosmos DB の複数リージョン デプロイのコストを管理する方法について説明します。
author: rimman
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 12/07/2018
ms.author: rimman
ms.openlocfilehash: b4c873e319dd611221c81deb948db3a64062631e
ms.sourcegitcommit: 8330a262abaddaafd4acb04016b68486fba5835b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/04/2019
ms.locfileid: "54032603"
---
# <a name="optimize-the-cost-for-multi-region-deployments-in-azure-cosmos-db"></a>Azure Cosmos DB の複数リージョン デプロイにかかるコストを最適化する

お客様の Azure Cosmos アカウントのリージョンは、いつでも追加したり削除したりすることができます。 Azure Cosmos の各種のデータベースとコンテナーに対してお客様が構成したスループットは、お客様のアカウントに関連付けられている各リージョンで予約されます。 プロビジョニングされる 1 時間あたりのスループット (つまり、お客様の Azure Cosmos アカウントのすべてのデータベースとコンテナーに対して構成された RU/秒の合計) が `T` で、お客様のデータベース アカウントに関連付けられている Azure リージョンの数が `N` である場合、お客様の Cosmos アカウントにプロビジョニングされる 1 時間あたりの合計スループットは、以下に相当します。

1. ` T x N RU/s` (お客様の Azure Cosmos アカウントが単一の書き込みリージョンで構成されている場合) 

1. `T x (N+1) RU/s` (すべてのリージョンが書き込みを処理できるようにお客様の Azure Cosmos アカウントが構成されている場合) 

プロビジョニング スループットのコストは、単一の書き込みリージョンの場合は 100 RU/秒で $0.008/時に、また複数の書き込みリージョンの場合は 100 RU/秒で $0.016/時になります。 詳細については、Azure Cosmos DB の[価格に関するページ](https://azure.microsoft.com/pricing/details/cosmos-db/)を参照してください。

## <a name="costs-for-multiple-write-regions"></a>複数の書き込みリージョンにおけるコスト

マルチマスター システムでは、書き込み操作に利用できる正味 RU が `N` 倍になります (`N` は書き込みリージョンの数)。 単一リージョンの書き込みとは異なり、すべてのリージョンが書き込み可能となるため、競合の解決をサポートする必要があります。 ライターのワークロード量は増加しています。 コスト計画の観点から、` M` RU/秒に相当する書き込みを全世界で実行するためには、コンテナー レベルまたはデータベース レベルで M `RUs` をプロビジョニングする必要があります。 その後、望ましい数のリージョンを追加し、書き込みに使用することで、`M` RU に相当する書き込みを全世界で実行できます。 

### <a name="example"></a>例

米国西部にコンテナーがあり、今月は 10,000 RU/秒のスループットでプロビジョニングされ、1 TB のデータが格納されているとします。 3 つのリージョン (米国東部、北ヨーロッパ、東アジア) を追加し、それぞれのストレージとスループットが同じであるとき、グローバルに分散されたお客様のアプリから 4 つすべてのリージョンのコンテナーに書き込めるようにしたいとしましょう。 月の請求書の合計金額は次のとおりです (1 か月を 31 日とした場合)。

|**項目**|**使用量 (月単位)**|**レート**|**月額料金**|
|----|----|----|----|
|米国西部のコンテナーのスループット料金 (複数の書き込みリージョン) |10,000 RU/秒 * 24 * 31 |100 RU/秒で 1 時間あたり $0.016 |$1,190.40 |
|追加された 3 つのリージョン (米国東部、北ヨーロッパ、東アジア) のスループット料金 (複数の書き込みリージョン) |(3 + 1) * 10,000 RU/秒 * 24 * 31 |100 RU/秒で 1 時間あたり $0.016 |$4,761.60 |
|米国西部のコンテナーのストレージ料金 |100 GB |$0.25/GB |$25 |
|追加された 3 つのリージョン (米国東部、北ヨーロッパ、東アジア) のストレージ料金 |3 * 1 TB |$0.25/GB |$75 |
|**合計**|||**$6,052** |

## <a name="improve-throughput-utilization-on-a-per-region-basis"></a>リージョン単位でスループット利用率を向上させる

(利用率が低すぎるリージョンまたは高すぎるリージョンが 1 つ以上あるなど) 利用に無駄がある場合は、次の手順に従って、スループット利用率を改善することができます。  

1. 先に書き込みリージョンのプロビジョニング スループット (RU) を最適化したうえで、読み取りリージョンからの変更フィードを使用するなど、読み取りリージョンの RU を最大限に活用するようにしてください。 

2. 複数の書き込みリージョンの読み取りと書き込みは、Azure Cosmos アカウントに関連付けられているすべてのリージョン全体でスケーリングできます。 

3. お客様のリージョンのアクティビティを監視すれば、オンデマンドでリージョンを追加したり削除したりして、読み取りと書き込みのスループットをスケーリングすることができます。

## <a name="next-steps"></a>次の手順

次は、先に進み、以下の各記事で Azure Cosmos DB でのコストの最適化の詳細について学習することができます。

* [開発とテストのための最適化](optimize-dev-test.md)の詳細について学習します
* [Azure Cosmos DB の課金内容の確認](understand-your-bill.md)の詳細について学習します
* [スループット コストの最適化](optimize-cost-throughput.md)の詳細について学習します
* [ストレージ コストの最適化](optimize-cost-storage.md)の詳細について学習します
* [読み取りと書き込みのコストの最適化](optimize-cost-reads-writes.md)の詳細について学習します
* [クエリのコストの最適化](optimize-cost-queries.md)について確認する

