---
title: Azure Cosmos DB の従量課金ベースのサーバーレス プラン
description: Azure Cosmos DB の従量課金ベースのサーバーレス プランの詳細について説明します。
author: ThomasWeiss
ms.author: thweiss
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 08/19/2020
ms.openlocfilehash: ef681f861a14fbbf86e7e350441d05f84fc95f58
ms.sourcegitcommit: afa1411c3fb2084cccc4262860aab4f0b5c994ef
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/23/2020
ms.locfileid: "88757899"
---
# <a name="azure-cosmos-db-serverless-preview"></a>Azure Cosmos DB サーバーレス (プレビュー)

> [!IMPORTANT]
> Azure Cosmos DB サーバーレスは現在プレビュー段階にあります。 このプレビュー バージョンはサービス レベル アグリーメントなしで提供されています。運用環境のワークロードに使用することはお勧めできません。 詳細については、「[Microsoft Azure プレビューの追加使用条件](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)」を参照してください。

Azure Cosmos DB サーバーレスでは、従量課金ベースの方法で Azure Cosmos アカウントを使用できます。この方法では、データベース操作によって消費される要求ユニットと、データによって消費されるストレージに対してのみ課金されます。 Azure Cosmos DB をサーバーレス モードで使用する場合に必要となる最小料金はありません。

> [!IMPORTANT] 
> サーバーレスに関するフィードバックはありますか。 ご意見をお待ちしています。 Azure Cosmos DB サーバーレス チーム ([azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com)) までお気軽にご連絡ください。

Azure Cosmos DB を使用すると、すべてのデータベース操作で[要求ユニット](request-units.md)数で表されるコストがかかります。 このコストの課金方法は、ご利用の Azure Cosmos アカウントの種類によって異なります。

- [プロビジョニングされたスループット](set-throughput.md) モードでは、データベースとコンテナーに対してプロビジョニングされる一定量のスループット (1 秒あたりの要求ユニット数で表される) にコミットする必要があります。 データベース操作のコストは、1 秒ごとに使用可能な要求ユニットの数から差し引かれます。 請求期間が終了すると、プロビジョニングしたスループットの量に対して課金されます。
- サーバーレス モードでは、Azure Cosmos アカウントでコンテナーを作成するときに、スループットをプロビジョニングする必要はありません。 請求期間が終了すると、データベース操作により消費された要求ユニットの数に対して課金されます。

## <a name="use-cases"></a>ユース ケース

Azure Cosmos DB サーバーレスで最適なシナリオは次のとおりです。

- **低トラフィック**:理由は、このような状況では容量をプロビジョニングは必要なく、コストが非常に高くなるからです
- **中程度のバースタビリティ**:理由は、サーバーレス コンテナーは 1 秒あたり最大 5,000 の要求ユニットを提供できるからです
- **中程度のパフォーマンス**:理由は、サーバーレス コンテナーには[固有のパフォーマンス特性](#performance)があるからです

これらの理由から、次の種類のワークロードについては、Azure Cosmos DB サーバーレスを検討する必要があります。

- 開発
- テスト
- プロトタイプ作成
- 概念実証
- 重要ではない低トラフィックのアプリケーション

ユース ケースに最適なプランを選択する方法の詳細については、「[プロビジョニングされたスループットとサーバーレスのどちらかを選択する方法](throughput-serverless.md)」を参照してください。

## <a name="using-serverless-resources"></a>サーバーレス リソースの使用

サーバーレスは、Azure Cosmos アカウントの新しい種類です。つまり、新しいアカウントを作成するときに、**プロビジョニングされたスループット**と**サーバーレス**のどちらかを選択する必要があります。 サーバーレスの使用を開始するには、新しいサーバーレス アカウントを作成する必要があります。 プレビュー リリース中は、新しいサーバーレス アカウントを作成する唯一の方法として、[Azure portal を使用](create-cosmosdb-resources-portal.md)します。 既存アカウントとサーバーレス モードとの間の移行は、現在サポートされていません。

> [!NOTE]
> 現在、サーバーレスは Azure Cosmos DB Core (SQL) API でのみサポートされています。

サーバーレス アカウントで作成されたコンテナーはすべて、サーバーレス コンテナーです。 サーバーレス コンテナーでは、プロビジョニングされたスループット モードで作成されたコンテナーと同じ機能が公開されているため、まったく同じ方法でデータの読み取り、書き込み、クエリを実行できます。 ただし、サーバーレス アカウントとコンテナーには固有の特性もあります。

> [!IMPORTANT]
> これらの制限事項の一部は、サーバーレスが一般公開されるときに緩和または削除される可能性があります。**お客様のフィードバック**を参考にして決定されます。 サーバーレス エクスペリエンスの詳細については、[azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com) までお問い合わせください。

- サーバーレス アカウントは、1 つの Azure リージョンでのみ実行できます。 サーバーレス アカウントを作成した後で、そのアカウントに Azure リージョンを追加することはできません。
- サーバーレス アカウントで [Synapse Link プレビュー機能](synapse-link.md)を有効にすることはできません。
- サーバーレス コンテナーでは、スループットのプロビジョニングは必要ないため、次の記述が該当します。
    - サーバーレス コンテナーを作成するときにスループットを渡すことはできず、これを行うとエラーが返されます。
    - サーバーレス コンテナーでスループットを読み取りまたは更新することはできず、これを行うとエラーが返されます。
    - サーバーレス アカウントに共有スループット データベースを作成することはできず、これを行うとエラーが返されます。
- サーバーレス コンテナーにより、1 秒あたり 5,000 要求ユニットの最大スループット バースタビリティが提供されます。
- サーバーレス コンテナーには、最大 50 GB のデータとインデックスを格納できます。

## <a name="monitoring-your-consumption"></a>消費量の監視

以前にプロビジョニングされたスループット モードで Azure Cosmos DB を使用したことがあれば、トラフィックがプロビジョニングされた容量に合わない場合、サーバーレスの方がコスト効率が高いことがわかるでしょう。 トレードオフは、データベースが処理した要求の数に基づいて課金されるため、コストの予測可能性が低くなることです。 そのため、現在の消費量から目を離さないことが重要です。

アカウントの **[メトリック]** ペインを参照すると、 **[概要]** タブに **Request Units consumed (消費済み要求ユニット)** という名前のグラフが表示されます。このグラフには、アカウントで消費された要求ユニットの数が示されます。

:::image type="content" source="./media/serverless/request-units-consumed.png" alt-text="消費された要求ユニットを示すグラフ" border="false":::

[こちら](monitor-request-unit-usage.md)に説明されているように、Azure Monitor を使用して同じグラフを見つけることができます。 Azure Monitor では、[アラート](../azure-monitor/platform/alerts-metric-overview.md)を設定でき、要求ユニットの消費量が特定のしきい値を越えたときに通知を受け取ることに使用できます。

## <a name="performance"></a><a id="performance"></a>パフォーマンス

サーバーレス リソースでは、プロビジョニングされたスループット リソースが提供するものとは異なる、特有のパフォーマンス特性がもたらされます。

- **稼働率**:サーバーレス オファーが一般公開されると、Availability Zones (ゾーンの冗長性) が使用されていない場合、サーバーレス コンテナーの可用性は、サービス レベル アグリーメント (SLA) に記載される 99.9% となります。 Availability Zones が使用されている場合の SLA は 99.99% です。
- **待ち時間**:サーバーレス オファーが一般公開されると、サーバーレス コンテナーの待機時間は、サービスレベル目標 (SLO) に記載されるポイント読み取り 10 ミリ秒以下、書き込み 30 ミリ秒以下になります。 ポイント読み取り操作では、1 つの項目をその ID とパーティション キー値でフェッチします。
- **バースタビリティ**:サーバーレス オファーが一般公開されると、サーバーレス コンテナーのバースタビリティは、サービスレベル目標 (SLO) に記載される 95% になります。 これは、少なくとも 95% の時間で、最大バースタビリティを達成できることを意味します。

> [!NOTE]
> Azure プレビューとして、Azure Cosmos DB サーバーレスは、サービスレベルアグリーメント (SLA) から除外されています。 上記のパフォーマンス特性は、このオファーが一般公開されるときに提供される内容のプレビューとして記載されています。

## <a name="next-steps"></a>次のステップ

サーバーレスの使用を開始するには、次の記事をご覧ください。

- [Azure Cosmos DB の要求ユニット](request-units.md)
- [プロビジョニングされたスループットとサーバーレスのどちらかを選択する](throughput-serverless.md)
- [Azure Cosmos DB の価格モデル](how-pricing-works.md)
