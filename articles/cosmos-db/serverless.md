---
title: Azure Cosmos DBの消費ベースのサーバーレスオファー
description: Azure Cosmos DBの消費ベースのサーバーレスオファーの詳細をご覧ください。
author: ThomasWeiss
ms.author: thweiss
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 08/19/2020
ms.openlocfilehash: 
ms.sourcegitcommit: 
ms.translationtype: 
ms.contentlocale: ja-JP
ms.lasthandoff: 
ms.locfileid: 
---

# Azure Cosmos DB サーバレス (プレビュー)

> [!IMPORTANT]
> Azure Cosmos DB サーバーレスは現在プレビュー段階です。このプレビューバージョンは、サービスレベルアグリーメントなしで提供され、実稼働ワークロードには推奨されません。詳細については、「[Microsoft Azure プレビューの追加使用条件](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)」を参照してください。

Azure Cosmos DB サーバーレスを使用すると、Azure Cosmos DB アカウントを消費ベースの方法で使用でき、データベース操作で消費された要求ユニットとデータによって消費されたストレージに対してのみ課金されます。Azure Cosmos DB をサーバーレスモードで使用する場合、最低料金はありません。

> [!IMPORTANT] 
> サーバーレスについてのフィードバックはありますか？私たちにそれを聞かせてください！お気軽に Azure Cosmos DB サーバーレスチームにメッセージを送ってください: [azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com).

Azure Cosmos DB を使用する場合、すべてのデータベース操作には [要求ユニット](request-units.md)で表されるコストがあります。この費用の請求方法は、使用している Azure Cosmos DB アカウントの種類によって異なります:

- [プロビジョニングされたスループット](set-throughput.md)モードでは、データベースとコンテナーにプロビジョニングされた特定量のスループット（1秒あたりの要求単位で表されます）をコミットする必要があります。データベース操作のコストは、毎秒使用可能な要求ユニットの数から差し引かれます。請求期間の最後に、プロビジョニングしたスループットの量に対して請求されます。
- サーバーレスモードでは、Azure Cosmos DB アカウントでコンテナーを作成するときにスループットをプロビジョニングする必要はありません。請求期間の最後に、データベース操作によって消費された要求ユニットの数に対して請求されます。

## ユースケース

Azure Cosmos DB サーバーレスは、予想される以下のシナリオに最適です:

- **トラフィックが少ない**: そのような状況でのプロビジョニングキャパシティは不要であり、コストが非常に高くなる可能性があるため
- **中程度のバースト性**: サーバーレスコンテナーは 1 秒あたり最大 5,000 要求ユニットを提供できるため
- **中程度のパフォーマンス**: サーバーレスコンテナーには[特定のパフォーマンス特性](#performance)があるため

これらの理由から、Azure Cosmos DB サーバーレスは、次のタイプのワークロードについて検討する必要があります:

- 開発
- テスト
- プロトタイピング
- 概念実証（PoC）
- トラフィックが少ない非クリティカルなアプリケーション

ユースケースに最適なオファーを選択する方法の詳細については、「[プロビジョニングされたスループットとサーバーレスの選択方法](throughput-serverless.md)」の記事をご覧ください。

## サーバーレスリソースの使用

サーバーレスは Azure Cosmos DB の新しいアカウント種別で、新しいアカウントを作成する際に**プロビジョニングされたスループット**と**サーバーレス**のどちらかを選択する必要があります。サーバーレスの使用を開始するには、新しいサーバーレス用のアカウントを作成する必要があります。プレビューリリースでは、新しいサーバーレスアカウントの作成方法は、[Azureポータルを使用](create-cosmosdb-resources-portal.md)した方法でのみサポートしています。サーバーレスモードと既存のアカウントとの間の移行は、現在サポートされていません。

> [!NOTE]
> サーバーレスは現在、Azure Cosmos DB Core (SQL) API でのみサポートされています。

サーバーレスアカウントで作成されたコンテナーはすべてサーバーレスコンテナーです。サーバーレスコンテナーは、プロビジョニングされたスループットモードで作成されたコンテナーと同じ機能を公開しているため、データの読み取り、書き込み、クエリを全く同じ方法で行うことができます。ただし、サーバーレスアカウントとコンテナーには特定の特性もあります:

> [!IMPORTANT]
> サーバーレスの一般提供が開始されると、これらの制限の一部が緩和または削除される可能性があり、**あなたのフィードバック** が私たちの判断に役立つでしょう！サーバーレスの経験について、もっと詳しく教えてください: [azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com).

- サーバーレスアカウントは、単一の Azure リージョンでのみ実行できます。作成後、サーバーレスアカウントに追加の Azure リージョンを追加することはできません。
- サーバーレスアカウントで [Synapse Link プレビュー機能](synapse-link.md)を有効にすることはできません。
- サーバーレスコンテナーではプロビジョニングスループットは必要ないため、次のステートメントが適用されます:
    - サーバーレスコンテナーを作成するときにスループットを渡すことはできず、それを行うとエラーが返されます。
    - サーバーレスコンテナーのスループットを読み込んだり更新したりすることができず、それを行うとエラーが返されます。
    - サーバーレスアカウントで共有スループットデータベースを作成することはできず、それを行うとエラーが返されます。
- サーバーレスコンテナーは、毎秒 5,000 要求ユニットの最大スループットのバースト性を提供できます。
- サーバーレスコンテナーには、最大 50 GBのデータとインデックスを保存できます。

## 消費量の監視

以前にプロビジョニングされたスループットモードで　Azure Cosmos DB を使用したことがある場合、トラフィックがプロビジョニングされた容量を正当化していない場合、サーバーレスの方が費用対効果が高いことがわかります。これに対するトレードオフは、データベースが処理したリクエスト数に基づいて課金されるため、コストが予測しにくくなることです。そのため、現在の消費量を監視することが重要です。

アカウントの**メトリック**ペインを閲覧すると、**概要**タブの下に **Request Units consumed** という名前のグラフがあります。このグラフは、アカウントが使用した要求ユニット数を示しています:

:::image type="content" source="./media/serverless/request-units-consumed.png" alt-text="Chart showing the consumed Request Units" border="false":::

[こちら](monitor-request-unit-usage.md)で説明されているように、Azure Monitor を使用するときに同じグラフを見つけることができます。Azure Monitor では、要求ユニットの消費量が特定のしきい値を超えたときに通知するために使用できる[アラート](../azure-monitor/platform/alerts-metric-overview.md)を設定できることに注意してください。

## <a id="performance"></a>パフォーマンス

サーバーレスリソースは、プロビジョニングされたスループットリソースが提供するものとは異なる特定のパフォーマンス特性を生み出します:

- **可用性**: サーバーレスのオファーが一般利用可能になった後、可用性ゾーン (ゾーンの冗長性) を使用しない場合、サーバーレスコンテナーの可用性は 99.9% のサービスレベルアグリーメント (SLA) でカバーされます。可用性ゾーンを使用した場合の SLA は 99.99% です。
- **待ち時間**: サーバーレスのオファーが一般利用可能になった後、ポイント読み取りでは 10 ミリ秒以下、書き込みでは 30 ミリ秒以下のサービスレベル目標 (SLO) でカバーされます。ポイント読み取り操作は、 ID とパーティションキー値によって単一のアイテムを取得することで構成されます。
- **バースト性**: サーバーレスのオファーが一般利用可能になった後、サーバーレスコンテナーのバースト性は95％のサービスレベル目標 (SLO) でカバーされます。これは、最大のバースト性を少なくとも 95% 以上の時間で達成できることを意味します。

> [!NOTE]
> 他の Azure プレビューと同様に、Azure Cosmos DB サーバーレスはサービスレベルアグリーメント (SLA) から除外されます。上記のパフォーマンス特性は、このオファーが一般利用可能になったときに提供されるもののプレビューとして提供されています。

## 次のステップ

次の記事を参考にして、サーバーレスを始めましょう:

- [Azure Cosmos DB の要求ユニット](request-units.md)
- [Choose between provisioned throughput and serverless](throughput-serverless.md)
- [Azure Cosmos DB の価格モデル](how-pricing-works.md)
