---
title: Azure Migrate アプライアンスのデプロイと検出のトラブルシューティング
description: アプライアンスのデプロイとサーバーの検出に関するヘルプを提供します。
author: vineetvikram
ms.author: vivikram
ms.manager: abhemraj
ms.topic: troubleshooting
ms.date: 01/02/2020
ms.openlocfilehash: 995914fab0e7112327ebf6ab8e32fb67181f481e
ms.sourcegitcommit: 32e0fedb80b5a5ed0d2336cea18c3ec3b5015ca1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/30/2021
ms.locfileid: "105608920"
---
# <a name="troubleshoot-the-azure-migrate-appliance-and-discovery"></a>Azure Migrate アプライアンスと検出のトラブルシューティング

この記事は、[Azure Migrate](migrate-services-overview.md) アプライアンスをデプロイし、そのアプライアンスを使用してオンプレミスのサーバーを検出する際の問題のトラブルシューティングに役立ちます。

## <a name="whats-supported"></a>サポート対象

アプライアンスのサポート要件を[確認](migrate-appliance.md)します。

## <a name="invalid-ovf-manifest-entry"></a>"Invalid OVF manifest entry (無効な OVF マニフェスト エントリ)"

"The provided manifest file is invalid: Invalid OVF manifest entry" (指定されたマニフェスト ファイルが無効です: 無効な OVF マニフェスト エントリ) というエラーを受け取る場合は、次のようにします。

1. Azure Migrate アプライアンスの OVA ファイルが正常にダウンロードされていることを、そのハッシュ値をチェックして確認します。 [詳細については、こちらを参照してください](./tutorial-discover-vmware.md)。 ハッシュ値が一致しない場合は、OVA ファイルをもう一度ダウンロードしてデプロイを再試行してください。
2. それでもデプロイが失敗する場合で、VMware vSphere クライアントを使って OVF ファイルをデプロイしている場合は、vSphere Web クライアントでデプロイしてみてください。 展開がそれでも失敗する場合は、別の Web ブラウザーをお試しください。
3. vSphere Web クライアントを使用しており、vCenter Server 6.5 または 6.7 にそれをデプロイしようとしている場合は、ESXi ホストに直接 OVA をデプロイしてみてください。
   - Web クライアント (https://<*ホスト IP アドレス*>/ui) を使用して (vCenter Server ではなく) ESXi ホストに直接接続します。
   - **[ホーム]**  >  **[インベントリ]** で、 **[ファイル]**  >  **[Deploy OVF template]\(OVF テンプレートのデプロイ\)** を選択します。 OVA を参照して、デプロイを完了する。
4. それでもデプロイが失敗する場合は、Azure Migrate のサポートにお問い合わせください。

## <a name="cant-connect-to-the-internet"></a>インターネットに接続できない

これは、アプライアンス サーバーがプロキシの内側にある場合に発生する可能性があります。

- プロキシに承認資格情報が必要な場合は、それを提供します。
- URL ベースのファイアウォール プロキシを使用して送信接続を制御している場合は、[以下の URL](migrate-appliance.md#url-access) を許可リストに追加します。
- インターネットへの接続にインターセプト プロキシを使用している場合は、[こちらの手順](./migrate-appliance.md)を使用して、プロキシの証明書をアプライアンスにインポートします。

## <a name="cant-sign-into-azure-from-the-appliance-web-app"></a>アプライアンス Web アプリから Azure にサインインできない

Azure へのサインインに正しくない Azure アカウントを使用している場合は、"申し訳ありませんが、サインイン中に問題が発生しました" というエラーが表示されます。 このエラーは、次のいくつかの理由で発生します。

- パブリック クラウド用のアプライアンス Web アプリケーションにサインインする場合に、Government クラウド ポータルのユーザー アカウント資格情報を使用している。
- Government クラウド用のアプライアンス Web アプリケーションにサインインする場合に、プライベート クラウド ポータルのユーザー アカウントの資格情報を使用している。

正しい資格情報を使用していることを確認します。

## <a name="datetime-synchronization-error"></a>日付と時刻の同期エラー

日付と時刻の同期に関するエラー (802) は、サーバー クロックが現在の時刻と同期しておらず、5 分以上ずれている可能性があることを示します。 コレクター サーバーのクロックの時刻を変更して、現在の時刻と一致させます。

1. サーバーで管理者用のコマンド プロンプトを開きます。
2. タイム ゾーンを確認するには、**w32tm /tz** を実行します。
3. 時刻を同期するには、**w32tm /resync** を実行します。

## <a name="unabletoconnecttoserver"></a>"UnableToConnectToServer"

この接続エラーを受け取る場合、vCenter Server <*サーバー名*>.com:9443 に接続できない可能性があります。 エラーの詳細では、`https://\*servername*.com:9443/sdk` でリッスンしているエンドポイントで、メッセージを受け入れることができるものがないことが示されています。

- 最新バージョンのアプライアンスを実行しているかどうかを確認します。 そうでない場合は、アプライアンスを[最新バージョン](./migrate-appliance.md)にアップグレードします。
- 最新バージョンでも引き続き問題が発生する場合は、指定された vCenter Server 名をアプライアンスで解決できないか、または指定されたポートが間違っている可能性があります。 ポートが指定されていない場合、コレクターでは既定でポート番号 443 への接続が試みられます。

    1. アプライアンスから <*サーバー名*>.com に対して ping を実行します。
    2. ステップ 1 が失敗する場合は、IP アドレスを使用して vCenter サーバーへの接続を試みます。
    3. vCenter Server に接続するための正しいポート番号を確認します。
    4. vCenter Server が起動されて実行中であることを確認します。

## <a name="error-6005260039-appliance-might-not-be-registered"></a>エラー 60052/60039: アプライアンスが登録されていない可能性がある

- エラー 60052 "The appliance might not be registered successfully to the project" (アプライアンスがプロジェクトに正常に登録されていない可能性があります) は、アプライアンスの登録に使用された Azure アカウントに十分な権限がない場合に発生します。
    - アプライアンスの登録に使用する Azure ユーザー アカウントに、少なくともサブスクリプションの共同作成者アクセス許可があることを確認します。
    - 必要な Azure ロールとアクセス許可の[詳細を参照](./migrate-appliance.md#appliance---vmware)してください。
- エラー 60039 "The appliance might not be registered successfully to the project" (アプライアンスがプロジェクトに正常に登録されていない可能性があります) は、アプライアンスの登録に使用されたプロジェクトが見つからない場合に発生する可能性があります。
    - Azure portal で、リソース グループにプロジェクトが存在するかどうかを確認してください。
    - プロジェクトが存在しない場合は、ご利用のリソース グループに新しいプロジェクトを作成して、アプライアンスをもう一度登録してください。 新しいプロジェクトを作成する[方法を参照](./create-manage-projects.md#create-a-project-for-the-first-time)してください。

## <a name="error-6003060031-key-vault-management-operation-failed"></a>エラー 60030/60031: Key Vault の管理操作が失敗した

"Azure Key Vault 管理操作に失敗しました" というエラー 60030 または 60031 を受け取る場合は、次のようにします。

- アプライアンスの登録に使用する Azure ユーザー アカウントに、少なくともサブスクリプションの共同作成者アクセス許可があることを確認します。
- エラー メッセージで指定されているキー コンテナーへのアクセス権がアカウントにあることを確認した後、操作を再試行します。
- 引き続き問題が発生する場合は、Microsoft サポートにお問い合わせください。
- 必要な Azure ロールとアクセス許可の[詳細を参照](./migrate-appliance.md#appliance---vmware)してください。

## <a name="error-60028-discovery-couldnt-be-initiated"></a>エラー 60028: 検出を開始できなかった

エラー 60028: "Discovery couldn't be initiated because of an error. The operation failed for the specified list of hosts or clusters" (エラーが発生したため、検出を開始できませんでした。指定されたホストまたはクラスターのリストに対する操作に失敗しました) は、サーバー情報のアクセスまたは取得で問題が発生したため、エラーで示されているホストで検出を開始できなかったことを示します。 残りのホストは正常に追加されました。

- **[ホストの追加]** オプションを使用して、エラーで示されているホストをもう一度追加します。
- 検証エラーが発生している場合は、修復のガイダンスを確認してエラーを修正し、 **[保存して検出を開始]** オプションをもう一度試します。

## <a name="error-60025-azure-ad-operation-failed"></a>エラー 60025: Azure AD operation failed (Azure AD の操作が失敗しました)

エラー 60025: "An Azure AD operation failed. The error occurred while creating or updating the Azure AD application" (Azure AD の操作が失敗しました。Azure AD アプリケーションを作成または更新しているときにエラーが発生しました) は、検出を開始するために使用された Azure ユーザー アカウントが、アプライアンスの登録に使用されたアカウントと異なる場合に発生します。 次のいずれかの操作を行います。

- 検出を開始するユーザー アカウントが、アプライアンスの登録に使用するものと同じであることを確認します。
- 検出操作が失敗しているユーザー アカウントに、Azure Active Directory アプリケーションのアクセス許可を提供します。
- プロジェクト用に以前に作成したリソース グループを削除します。 別のリソース グループを作成して、もう一度開始します。
- Azure Active Directory アプリケーションのアクセス許可に関する[詳細を参照](./migrate-appliance.md#appliance---vmware)してください。

## <a name="error-50004-cant-connect-to-host-or-cluster"></a>エラー 50004: ホストまたはクラスターに接続できない

エラー 50004: "Can't connect to a host or cluster because the server name can't be resolved. (サーバー名を解決できないため、ホストまたはクラスターに接続できません。) WinRM エラー コード: 0x803381B9" は、アプライアンスの要求を処理する Azure DNS で、指定されたクラスターまたはホストの名前を解決できない場合に発生する可能性があります。

- クラスターでこのエラーが発生する場合は、クラスターの FQDN。
- クラスター内のホストについても、このエラーが表示されることがあります。 これは、アプライアンスはクラスターに接続できますが、クラスターから FQDN ではないホスト名が返されることを示します。 このエラーを解決するには、IP アドレスとホスト名のマッピングを追加することでアプライアンス上の hosts ファイルを更新します。
    1. 管理者としてメモ帳を開きます。
    2. C:\Windows\System32\Drivers\etc\hosts ファイルを開きます。
    3. IP アドレスとホスト名を 1 行で追加します。 このエラーが見られるホストまたはクラスターごとに繰り返します。
    4. hosts ファイルを保存して閉じます。
    5. アプライアンス管理アプリを使用して、アプライアンスからホストに接続できるかどうかを確認します。 30 分後、これらのホストの最新情報が Azure portal に表示されるようになるはずです。

## <a name="error-60001-unable-to-connect-to-server"></a>Error 60001:サーバーに接続できない

- アプライアンスからサーバーへの接続があることを確認します
- Linux サーバーの場合は、次の手順に従ってパスワード ベースの認証が有効になっていることを確認します。
    1. Linux サーバーにログインし、コマンド 'vi /etc/ssh/sshd_config' を使用して SSH 構成ファイルを開きます
    2. "PasswordAuthentication" オプションを [はい] に設定します。 ファイルを保存します。
    3. "service sshd restart" を実行して SSH サービスを再起動します
- Windows サーバーの場合は、リモート WMI 呼び出しを許可するため、ポート 5985 が開かれていることを確認します。
- GCP Linux サーバーを検出中で、ルート ユーザーを使用している場合は、次のコマンドを使用して、ルート ログインの既定の設定を変更します
    1. Linux サーバーにログインし、コマンド 'vi /etc/ssh/sshd_config' を使用して SSH 構成ファイルを開きます
    2. "PermitRootLogin" オプションを [はい] に設定します。
    3. "service sshd restart" を実行して SSH サービスを再起動します

## <a name="error-no-suitable-authentication-method-found"></a>エラー:適切な認証方法が見つからない

次の手順に従って、Linux サーバーでパスワード ベースの認証が有効になっていることを確認します。
    1. Linux サーバーにログインし、コマンド 'vi /etc/ssh/sshd_config' を使用して SSH 構成ファイルを開きます
    2. "PasswordAuthentication" オプションを [はい] に設定します。 ファイルを保存します。
    3. "service sshd restart" を実行して SSH サービスを再起動します

## <a name="discovered-servers-not-in-portal"></a>検出されたサーバーがポータルにない

検出状態は "Discovery in progress" (検出中) だが、ポータルにサーバーがまだ表示されない場合は、数分お待ちください。

- VMware 上のサーバーでは約 15 分かかります。
- Hyper-V 上のサーバーの検出では、ホストが追加されるごとに約 2 分かかります。

待っても状態が変わらない場合は、 **[サーバー]** タブで **[最新の情報に更新]** を選択してください。これで、検出されたサーバーの数が Azure Migrate: Discovery and assessment および Azure Migrate: Server Migration に表示されるはずです。

これがうまくいかず、VMware サーバーを検出している場合は、次を実行してください。

- 指定した vCenter アカウントに、少なくとも 1 つのサーバーにアクセスできるアクセス許可が正しく設定されていることを確認してください。
- vCenter アカウントに vCenter VM フォルダー レベルでアクセス権が付与されている場合、Azure Migrate は VMware 上のサーバーを検出できません。 検出のスコープ設定についての[詳細をご覧ください](set-discovery-scope.md)。

## <a name="server-data-not-in-portal"></a>サーバー データがポータルにない

検出されたサーバーがポータルに表示されないか、サーバー データが期限切れになっている場合は、数分待ってください。 検出されたサーバー構成データの変更内容がポータルに表示されるまでには最大で 30 分かかります。 ソフトウェア インベントリ データの変更が表示されるまでに数時間かかる場合もあります。 この時間が経過してもデータがない場合は、次のように最新の情報に更新してみてください

1. **[Windows, Linux and SQL Servers]\(Windows、Linux、SQL Server\)**  >  **[Azure Migrate: Discovery and assessment]** で、 **[概要]** を選択します。
2. **[管理]** の下で、 **[Agent Health]\(エージェントの正常性\)** を選択します。
3. **[エージェントを更新する]** を選択します。
4. 更新操作が完了するまで待ちます。 これで、最新の情報が表示されるはずです。

## <a name="deleted-servers-appear-in-portal"></a>削除されたサーバーがポータルに表示される

サーバーを削除してもまだポータルに表示されている場合は、30 分待ってください。 まだ表示されている場合は、前述の説明に従って最新の情報に更新してください。

## <a name="discovered-software-inventory-and-sql-server-instances-and-databases-not-in-portal"></a>検出されたソフトウェア インベントリと SQL Server インスタンスおよびデータベースがポータルにない

アプライアンスで検出を開始した後、インベントリ データがポータルに表示され始めるまで最大 24 時間かかることがあります。

アプライアンス構成マネージャーで Windows 認証または SQL Server 認証の資格情報を指定していない場合、アプライアンスで資格情報を利用し、それぞれの SQL Server インスタンスに接続できるよう、資格情報を追加してください。

接続後、アプライアンスにより SQL Server インスタンスと SQL Server データベースの構成とパフォーマンスのデータが収集されます。 SQL Server の構成データは 24 時間ごとに更新されます。パフォーマンス データは 30 秒ごとにキャプチャされます。 そのため、データベースの状態や互換性レベルなど、SQL Server インスタンスおよびデータベースのプロパティ変更は、ポータルで更新されるまで、最大 24 時間かかることがあります

## <a name="sql-server-instance-is-showing-up-in-not-connected-state-on-portal"></a>ポータルで、SQL Server インスタンスが "未接続" ステータスで表示される

SQL Server インスタンスと SQL Server データベースの検出時に発生した問題を表示するには、プロジェクトの [検出済みサーバー] ページで、接続ステータス列の [未接続] ステータスをクリックします。

完全に検出されなかった、あるいは未接続の状態にある SQL インスタンスが含まれるサーバーに基づいて評価を作成すると、準備状態に "不明" マークが付くことがあります。

## <a name="i-do-not-see-performance-data-for-some-network-adapters-on-my-physical-servers"></a>物理サーバー上の一部のネットワーク アダプターのパフォーマンス データが表示されない

これは、物理サーバーで Hyper-V 仮想化が有効になっている場合に発生する可能性があります。 製品のギャップのため、検出された仮想ネットワーク アダプターでネットワーク スループットがキャプチャされます。

## <a name="error-the-file-uploaded-is-not-in-the-expected-format"></a>エラー:アップロードされたファイルの形式が正しくありません

一部のツールの地域設定によって、セミコロンが区切り記号として使用される CSV ファイルが作成されます。 設定を変更して、区切り記号をコンマにしてください。

## <a name="i-imported-a-csv-but-i-see-discovery-is-in-progress"></a>CSV をインポートしましたが、"検出が進行中です" と表示されます

この状態は、検証の失敗が原因で CSV のアップロードに失敗した場合に表示される可能性があります。 CSV をもう一度インポートしてみてください。 以前のアップロードのエラー レポートをダウンロードし、ファイルの修復ガイダンスに従って、エラーを修正できます。 エラー レポートは、[Discover servers] (サーバーの検出) ページの [インポートの詳細] セクションからダウンロードできます。

## <a name="do-not-see-software-inventory-details-even-after-updating-guest-credentials"></a>ゲストの資格情報を更新した後でもソフトウェア インベントリの詳細が表示されない

ソフトウェア インベントリ検出は 24 時間ごとに 1 回実行されます。 詳細をすぐに確認するには、次のように更新します。 検出された VM 数によっては、 これに数分かかる場合があります。

1. **[Windows, Linux and SQL Servers]\(Windows、Linux、SQL Server\)**  >  **[Azure Migrate: Discovery and assessment]** で、 **[概要]** を選択します。
2. **[管理]** の下で、 **[Agent Health]\(エージェントの正常性\)** を選択します。
3. **[エージェントを更新する]** を選択します。
4. 更新操作が完了するまで待ちます。 これで、最新の情報が表示されるはずです。

## <a name="unable-to-export-software-inventory"></a>ソフトウェア インベントリをエクスポートできない

ポータルからインベントリをダウンロードするユーザーに、サブスクリプションに対する共同作成者権限があることを確認します。

## <a name="no-suitable-authentication-method-found-to-complete-authentication-publickey"></a>認証を完了するための適切な認証方法が見つからない (publickey)

キーベースの認証は機能しません。パスワード認証を使用してください。

## <a name="common-app-discovery-errors"></a>一般的なアプリ検出エラー

Azure Migrate ではソフトウェア インベントリの検出がサポートされており、これには Azure Migrate: Discovery and assessment が使用されます。 現在、アプリ検出は VMware でのみサポートされています。 アプリ検出を設定するための要件と手順についての[詳細をご覧ください](how-to-discover-applications.md)。

一般的なアプリ検出エラーを表にまとめています。

| **Error** | **原因** | **操作** |
|--|--|--|
| 9000: VMware ツールの状態を検出できません。 | VMware ツールがインストールされていないか、破損している可能性があります。 | VMware ツールがサーバーにインストールされ、実行されていることを確認します。 |
| 9001: VMware ツールがインストールされていません。 | VMware ツールがインストールされていないか、破損している可能性があります。 | VMware ツールがサーバーにインストールされ、実行されていることを確認します。 |
| 9002: VMware ツールが実行されていません。 | VMware ツールがインストールされていないか、破損している可能性があります。 | VMware ツールがサーバーにインストールされ、実行されていることを確認します。 |
| 9003: オペレーティング システムの種類がゲスト サーバーの検出でサポートされていません。 | サーバーで実行されているオペレーティング システムが Windows でも Linux でもありません。 | サポートされているオペレーティング システムの種類は、Windows と Linux のみです。 サーバーが実際に Windows または Linux の場合は、vCenter Server で指定されているオペレーティング システムの種類を確認します。 |
| 9004: サーバーが実行されていません。 | サーバーの電源がオフになっています。 | サーバーの電源がオンか確認します。 |
| 9005: オペレーティング システムの種類がゲスト サーバーの検出でサポートされていません。 | オペレーティング システムの種類がゲスト サーバーの検出でサポートされていません。 | サポートされているオペレーティング システムの種類は、Windows と Linux のみです。 |
| 9006: ゲストからメタデータ ファイルをダウンロードするための URL が空です。 | これは、検出エージェントが予期したとおりに動作していない場合に発生することがあります。 | この問題は、24 時間以内に自動的に解決されます。 引き続き問題が発生する場合は、Microsoft サポートにお問い合わせください。 |
| 9007: ゲスト サーバーで検出タスクを実行しているプロセスが見つかりません。 | これは、検出エージェントが正常に動作していない場合に発生する可能性があります。 | この問題は、24 時間以内に自動的に解決されます。 引き続き問題が発生する場合は、Microsoft サポートにお問い合わせください。 |
| 9008: ゲスト サーバーのプロセスの状態を取得できません。 | この問題は、内部エラーのために発生します。 | この問題は、24 時間以内に自動的に解決されます。 引き続き問題が発生する場合は、Microsoft サポートにお問い合わせください。 |
| 9009: Windows UAC により、サーバーでの検出タスクの実行が妨げられました。 | サーバーの Windows ユーザー アカウント制御 (UAC) の設定の制限により、インストールされているソフトウェア インベントリの検出が妨げられています。 | サーバーの [ユーザー アカウント制御] の設定で、UAC のレベル設定が下位の 2 つのいずれかになるように構成します。 |
| 9010: サーバーの電源がオフになっています。 | サーバーの電源がオフになっています。 | サーバーの電源がオンか確認します。 |
| 9011: 検出されたメタデータ ファイルがゲスト サーバーのファイル システムに見つかりません。 | この問題は、内部エラーのために発生します。 | この問題は、24 時間以内に自動的に解決されます。 引き続き問題が発生する場合は、Microsoft サポートにお問い合わせください。 |
| 9012:検出されたメタデータ ファイルが空です。 | この問題は、内部エラーのために発生します。 | この問題は、24 時間以内に自動的に解決されます。 引き続き問題が発生する場合は、Microsoft サポートにお問い合わせください。 |
| 9013:ログインのたびに新しい一時プロファイルが作成されます。 | VMware 上のサーバーへのログインごとに新しい一時プロファイルが作成されます。 | Microsoft サポートに解決方法をお問い合わせください。 |
| 9014: ゲスト サーバーのファイル システムからメタデータを取得できません。 | ESXi ホストへの接続がありません | サーバーを実行している ESXi ホスト上のポート 443 にアプライアンスが接続できることを確認します |
| 9015:vCenter ユーザー アカウントでゲスト操作ロールが有効になっていません | vCenter ユーザー アカウントでゲスト操作ロールが有効になっていません。 | vCenter ユーザー アカウントでゲスト操作ロールが有効になっていることを確認してください。 |
| 9016:ゲスト操作エージェントが古くなっているため、検出できません。 | VMware ツールが正しくインストールされていないか、最新の状態ではありません。 | VMware ツールが正しくインストールされ、最新の状態になっていることを確認してください。 |
| 9017: 検出されたメタデータを含むファイルがサーバー上に見つかりません。 | この問題は、内部エラーのために発生します。 | Microsoft サポートに解決方法をお問い合わせください。 |
| 9018: PowerShell がゲスト サーバーにインストールされていません。 | PowerShell がゲスト サーバーで利用できません。 | ゲスト サーバーに PowerShell をインストールしてください。 |
| 9019: ゲスト サーバー操作エラーのため、検出できませんでした。 | サーバーで VMware ゲスト操作が失敗しました。 | サーバーの資格情報が有効であること、およびゲスト サーバーの資格情報で指定されたユーザー名が UPN 形式であることを確認してください。 |
| 9020:ファイル作成のアクセス許可が拒否されました。 | ユーザーまたはグループ ポリシーに関連付けられているロールにより、ユーザーがフォルダー内にファイルを作成することが制限されています | 指定されたゲスト ユーザーが、フォルダー内のファイルの作成アクセス許可を持っているかどうかを確認します。 フォルダーの名前については、Azure Migrate: Discovery and assessment の **[Notifications]\(通知\)** を参照してください。 |
| 9021:システムの一時パスにファイルを作成できません。 | VMware ツールで、ユーザー一時パスではなくシステム一時パスが報告されます。 | VMware ツールのバージョンを 10287 (NGC/VI クライアント形式) より上にアップグレードします。 |
| 9022:WMI オブジェクトへのアクセスが拒否されました。 | ユーザーまたはグループ ポリシーに関連付けられているロールにより、ユーザーが WMI オブジェクトにアクセスすることが制限されています。 | Microsoft サポートにお問い合わせください。 |
| 9023:SystemRoot 環境変数の値が空であるため、PowerShell を実行できません。 | SystemRoot 環境変数の値が、ゲスト サーバーの場合に空です。 | Microsoft サポートに解決方法をお問い合わせください。 |
| 9024:TEMP 環境変数の値が空であるため、検出できません。 | TEMP 環境変数の値が、ゲスト サーバーの場合に空です。 | Microsoft サポートにお問い合わせください。 |
| 9025: ゲスト サーバーで PowerShell が破損しています。 | ゲスト サーバーで PowerShell が破損しています。 | PowerShell をゲスト サーバーに再インストールし、ゲスト サーバーで PowerShell を実行できるかどうかを確認します。 |
| 9026: サーバーでゲスト操作を実行できません。 | サーバーの状態のため、サーバーでゲスト操作を実行できません。 | Microsoft サポートに解決方法をお問い合わせください。 |
| 9027: ゲスト操作エージェントがサーバーで実行されていません。 | 仮想サーバー内で実行されているゲスト操作エージェントに接続できませんでした。 | Microsoft サポートに解決方法をお問い合わせください。 |
| 9028: サーバーのディスク ストレージが不足しているため、ファイルを作成できません。 | ディスクに十分な領域がありません。 | サーバーのディスク ストレージに十分な領域があることを確認します。 |
| 9029: 指定されたゲスト サーバーの資格情報では PowerShell にアクセスできません。 | PowerShell へのアクセスはユーザーに許可されていません。 | アプライアンスで追加されたユーザーが、ゲスト サーバー上の PowerShell にアクセスできることを確認します。 |
| 9030: ESXi ホストが切断されているため、検出されたメタデータを収集できません。 | ESXi ホストは切断状態です。 | サーバーを実行している ESXi ホストが接続されていることを確認します。 |
| 9031: ESXi ホストが応答しないため、検出されたメタデータを収集できません。 | リモート ホストの状態が無効です。 | サーバーを実行している ESXi ホストが実行されていて、接続されていることを確認します。 |
| 9032: 内部エラーのため、検出できません。 | この問題は、内部エラーのために発生します。 | Microsoft サポートに解決方法をお問い合わせください。 |
| 9033: サーバーのユーザー名に無効な文字が含まれているため、検出できません。 | ユーザー名で無効な文字が検出されました。 | 無効な文字がないことを確認して、サーバーの資格情報をもう一度指定します。 |
| 9034: 指定されたユーザー名は UPN 形式ではありません。 | ユーザー名が UPN 形式ではありません。 | ユーザー名がユーザー プリンシパル名 (UPN) 形式であることを確認します。 |
| 9035: PowerShell の言語モードが "完全言語" に設定されていないため、検出できません。 | ゲスト サーバーの PowerShell の言語モードが完全言語に設定されていません。 | PowerShell の言語モードが "完全言語" に設定されていることを確認します。 |
| 9037: サーバーの応答時間が長すぎるため、データ収集が一時的に停止しました。 | 検出されたサーバーの応答に時間がかかりすぎています | 必要なアクションはありません。 ソフトウェア インベントリの検出の場合は 24 時間以内に、依存関係の分析 (エージェントレス) の場合は 3 時間以内に、再試行が行われます。 |
| 10000: オペレーティング システムの種類がサポートされていません。 | サーバーで実行されているオペレーティング システムが Windows でも Linux でもありません。 | サポートされているオペレーティング システムの種類は、Windows と Linux のみです。 |
| 10001: サーバー検出用のスクリプトがアプライアンスに見つかりません。 | 検出が正常に機能していません。 | Microsoft サポートに解決方法をお問い合わせください。 |
| 10002: 検出タスクが時間内に完了しませんでした。 | 検出エージェントが正常に機能していません。 | この問題は、24 時間以内に自動的に解決されます。 引き続き問題が発生する場合は、Microsoft サポートにお問い合わせください。 |
| 10003: 検出タスクを実行するプロセスがエラーで終了しました。 | 検出タスクを実行するプロセスがエラーで終了しました。 | この問題は、24 時間以内に自動的に解決されます。 問題が解決しない場合は、Microsoft サポートにお問い合わせください。 |
| 10004: ゲスト オペレーティング システムの種類に対する資格情報が提供されていません。 | この OS の種類のサーバーにアクセスするための資格情報が、Azure Migrate アプライアンスで指定されていません。 | アプライアンスでサーバーの資格情報を追加します |
| 10005: 指定された資格情報が無効です。 | アプライアンスがサーバーにアクセスするために指定された資格情報が正しくありません。 | アプライアンスに指定した資格情報を更新して、サーバーがその資格情報を使用してアクセスできることを確認します。 |
| 10006: ゲスト OS の種類は、資格情報ストアでサポートされていません。 | サーバーで実行されているオペレーティング システムが Windows でも Linux でもありません。 | サポートされているオペレーティング システムの種類は、Windows と Linux のみです。 |
| 10007:検出されたメタデータを処理できません。 | JSON を逆シリアル化しようとしている間にエラーが発生しました。 | Microsoft サポートに解決方法をお問い合わせください。 |
| 10008: サーバーでファイルを作成できません。 | この問題は、内部エラーのために発生する可能性があります。 | Microsoft サポートに解決方法をお問い合わせください。 |
| 10009: 検出されたメタデータをサーバー上のファイルに書き込めません。 | この問題は、内部エラーのために発生します。 | Microsoft サポートに解決方法をお問い合わせください。 |

## <a name="common-sql-server-instances-and-database-discovery-errors"></a>一般的な SQL Server インスタンスおよびデータベースの検出エラー

Azure Migrate は、Azure Migrate: Discovery and assessment を使用して、オンプレミスのマシンで実行されている SQL Server インスタンスとデータベースの検出をサポートしています。 現在、SQL 検出は VMware でのみサポートされています。 始めるには、[検出](tutorial-discover-vmware.md)に関するチュートリアルを参照してください。

一般的な SQL 検出エラーを表にまとめています。

| **Error** | **原因** | **操作** |
|--|--|--|
|30000: この SQL Server に関連付けられている資格情報が機能しませんでした。|手動で関連付けられた資格情報が無効であるか、または自動的に関連付けられた資格情報を使用して SQL Server にアクセスできなくなりました。|アプライアンス上に SQL Server の資格情報を追加し、次の SQL 検出サイクルまで待つか、強制的に更新してください。|
|30001: アプライアンスから SQL Server に接続できません。|1. アプライアンスには SQL Server へのネットワーク通信経路がありません。<br/>2. ファイアウォールが SQL Server とアプライアンス間の接続をブロックしています。|1. アプライアンスから SQL Server に到達できるようにします。<br/>2. アプライアンスから SQL Server への受信接続を許可します。|
|30003: 証明書が信頼されていません。|信頼された証明書が、SQL Server を実行しているコンピューターにインストールされていません。|信頼された証明書をサーバーに設定してください。 [詳細情報](https://go.microsoft.com/fwlink/?linkid=2153616)|
|30004: 不十分なアクセス許可。|このエラーは、SQL Server インスタンスをスキャンするために必要なアクセス許可がないために発生した可能性があります。 |SQL Server インスタンスとデータベースを検出するために、アプライアンスに指定されている資格情報またはアカウントに sysadmin ロールを付与してください。 [詳細情報](https://go.microsoft.com/fwlink/?linkid=2153511)|
|30005: SQL Server ログインの既定のマスター データベースに問題があるため接続できませんでした。|データベース自体が無効であるか、ログインにデータベースでの CONNECT 権限がありません。|ALTER LOGIN を使用して、既定のデータベースをマスター データベースに設定します。<br/>SQL Server インスタンスとデータベースを検出するために、アプライアンスに指定されている資格情報またはアカウントに sysadmin ロールを付与してください。 [詳細情報](https://go.microsoft.com/fwlink/?linkid=2153615)|
|30006: SQL Server ログインは Windows 認証では使用できません。|1. ログインが SQL Server ログインであっても、サーバーは Windows 認証のみを受け付けます。<br/>2. SQL Server 認証を使用して接続しようとしていますが、使用しているログインが SQL Server に存在しません。<br/>3. ログインで Windows 認証を使用していますが、そのログインは認識できない Windows プリンシパルです。 認識できない Windows プリンシパルは、ログインを Windows で確認できないことを意味します。 これは、信頼されていないドメインからの Windows ログインである可能性があります。|SQL Server 認証を使用して接続しようとしている場合は、SQL Server が混合認証モードで構成されていること、および SQL Server ログインが存在することを確認します。<br/>Windows 認証を使用して接続しようとしている場合は、正しいドメインに適切にログインしていることを確認します。 [詳細情報](https://go.microsoft.com/fwlink/?linkid=2153421)|
|30007: パスワードの有効期限が切れました。|このアカウントのパスワードの有効期限が切れています。|SQL Server のログイン パスワードの有効期限が切れている可能性があります。パスワードを再設定するか、パスワードの有効期限を延長してください。 [詳細情報](https://go.microsoft.com/fwlink/?linkid=2153419)|
|30008: パスワードを変更する必要があります。|このアカウントのパスワードを変更する必要があります。|SQL Server の検出用に提供した資格情報のパスワードを変更してください。 [詳細情報](https://go.microsoft.com/fwlink/?linkid=2153318)|
|30009: 内部エラーが発生しました。|SQL Server インスタンスとデータベースの検出中に内部エラーが発生しました。 |問題が解決しない場合は、Microsoft サポートにお問い合わせください。|
|30010: データベースが見つかりません。|選択されたサーバー インスタンスからデータベースが見つかりません。|SQL データベースを検出するためにアプライアンスに指定した資格情報またはアカウントに sysadmin ロールを付与してください。|
|30011: SQL インスタンスまたはデータベースの評価中に内部エラーが発生しました。|評価の実行中に内部エラーが発生しました。|問題が解決しない場合は、Microsoft サポートにお問い合わせください。|
|30012: SQL 接続できませんでした。|1. サーバー上のファイアウォールで接続が拒否されました。<br/>2. SQL Server Browser サービス (sqlbrowser) が開始されていません。<br/>3. SQL Server がクライアント要求に応答しませんでした。おそらくサーバーが起動していません。<br/>4. SQL Server クライアントがサーバーに接続できません。 このエラーは、サーバーがリモート接続を許可するように構成されていないことが原因で発生することがあります。<br/>5. SQL Server クライアントがサーバーに接続できません。 このエラーは、クライアントがサーバー名を解決できないか、サーバー名が間違っていることが原因で発生することがあります。<br/>6. TCP または名前付きパイプ プロトコルが有効ではありません。<br/>7. 指定された SQL Server インスタンス名が有効ではありません。|接続の問題のトラブルシューティングを行うには、[こちら](https://go.microsoft.com/fwlink/?linkid=2153317) の対話型ユーザー ガイドをご利用ください。 ガイドに従った後、サービスでデータが更新されるまで 24 時間お待ちください。 問題が解決しない場合は、Microsoft サポートにお問い合わせください。|
|30013: SQL Server インスタンスへの接続を確立中にエラーが発生しました。|1. SQL Server の名前をアプライアンスから解決できません。<br/>2. SQL Server でリモート接続が許可されません。|アプライアンスから SQL Server に ping を実行できる場合は、24 時間待って、この問題が自動的に解決されるかどうかを確認してください。 そうではない場合は、Microsoft サポートにお問い合わせください。 [詳細情報](https://go.microsoft.com/fwlink/?linkid=2153316)|
|30014: ユーザー名またはパスワードが無効です。| このエラーは、無効なパスワードまたはユーザー名を含む認証の失敗が原因で発生する可能性があります。|有効なユーザー名とパスワードを指定して資格情報を入力してください。 [詳細情報](https://go.microsoft.com/fwlink/?linkid=2153315)|
|30015: SQL インスタンスの検出中に内部エラーが発生しました。|SQL インスタンスの検出中に内部エラーが発生しました。|問題が解決しない場合は、Microsoft サポートにお問い合わせください。|
|30016: タイムアウトが発生したため、インスタンス '%Instance;' への接続に失敗しました。| これは、サーバーのファイアウォールによる接続の拒否が原因で発生することがあります。|SQL Server のファイアウォールが接続を受け入れるように構成されているかどうかを確認します。 エラーが解決しない場合は、Microsoft サポートにお問い合わせください。 [詳細情報](https://go.microsoft.com/fwlink/?linkid=2153611)|
|30017: 内部エラーが発生しました。|ハンドルされていない例外です。|問題が解決しない場合は、Microsoft サポートにお問い合わせください。|
|30018: 内部エラーが発生しました。|SQL インスタンスの一時 DB サイズやファイル サイズなどのデータを収集中に内部エラーが発生しました。|24 時間お待ちください。問題が解決しない場合は、Microsoft サポートにお問い合わせください。|
|30019: 内部エラーが発生しました。|データベースまたはインスタンスのメモリ使用率などのパフォーマンス メトリックを収集中に内部エラーが発生しました。|24 時間お待ちください。問題が解決しない場合は、Microsoft サポートにお問い合わせください。|

## <a name="next-steps"></a>次のステップ

[VMware](how-to-set-up-appliance-vmware.md)、[Hyper-V](how-to-set-up-appliance-hyper-v.md)、または[物理サーバー](how-to-set-up-appliance-physical.md)用にアプライアンスを設定します。
