---
title: Azure Migrate を使用した移行計画の作成 | Microsoft Docs
description: Azure Migrate を使用した移行計画の作成に関するガイダンスを提供します。
author: rashi-ms
ms.service: azure-migrate
ms.topic: conceptual
ms.date: 06/21/2020
ms.author: rajosh
ms.openlocfilehash: db1de363856fd560fea97f8f9cdf542717c4cca3
ms.sourcegitcommit: 3d79f737ff34708b48dd2ae45100e2516af9ed78
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/23/2020
ms.locfileid: "87090095"
---
# <a name="build-migration-plan-with-azure-migrate"></a>Azure Migrate を使用した移行計画の作成

この記事では、[Azure Migrate](migrate-services-overview.md) を使用して Azure への移行計画を作成するための簡単なガイドを提供します。 その他の質問については、次のリソースを確認してください。

- Azure Migrate に関する[一般的な質問](resources-faq.md)
- [Azure Migrate アプライアンス](common-questions-appliance.md)に関する質問
- [サーバー移行](common-questions-server-migration.md) に関する質問
- [Azure Migrate フォーラム](https://aka.ms/AzureMigrateForum)で質問の回答を示します。

## <a name="define-the-goals-of-cloud-migration"></a>クラウド移行の目標を定義する

移行計画を作成する前に、より満足のいくビジネス成果を生み出すために役立つ、クラウド移行の[動機](/azure/cloud-adoption-framework/strategy/motivations)を理解して評価することが重要です。 [Azure 向けのクラウド導入フレームワーク](/azure/cloud-adoption-framework)で説明されているように、ビジネスによっては別のトリガーや移行方法が適している場合もあります。  

**重要なビジネス イベント** | **移行の結果**
--- | ---
データセンターの閉鎖 | コスト削減
合併、買収、売却 | ベンダーまたは技術的な複雑さの減少
資本支出の削減 | 内部運用の最適化
ミッション クリティカルなテクノロジのサポートの終了 | ビジネスの機敏性の向上
規制コンプライアンスの変更への対応 | 新しい技術機能に対する準備
新しいデータ主権要件 | 市場需要に合わせたスケーリング
中断の削減と IT の安定性の向上 | 地理的需要に合わせたスケーリング

移行の動機は、Azure への移行によって達成したい戦略目標と結果について検討する際にも役立つ可能性があります。 次のステップでは、ご自分のワークロードに合わせた Azure への移行パスを特定して計画します。 Azure Migrate: Server Assessment ツールでは、オンプレミスのワークロードを評価し、移行の際に役立つガイダンスとツールを利用できます。

## <a name="understand-your-digital-estate"></a>デジタル資産を把握する

まず、Azure に移行するワークロードを特定してコスト予測を最適化するために、オンプレミスのインフラストラクチャ、アプリケーション、および依存関係を把握します。 Server Assessment ツールを使用すると、次の質問に答えることができます。

### <a name="what-workloads-are-in-use"></a>どのようなワークロードが使用されていますか?

軽量の Azure Migrate アプライアンスを使用して、オンプレミスの VMware VM、Hyper-V VM、および物理サーバーのエージェントレス検出を実行します。 継続的な検出により、マシンの構成とパフォーマンス メタデータが収集されます。また、インストールされているアプリケーションや、オンプレミスのマシンで実行されているロール/機能のインベントリを取得することもできます。 Azure Migrate アプライアンスにより、次のものが収集されます。

- マシン、ディスク、NIC のメタデータの詳細

- インストール済みアプリケーション (アプリケーションとロール/機能を含む)  

- CPU とメモリの使用率、ディスクの IOPS、スループットなどのパフォーマンス データ

次に、アプリケーション インベントリの一覧をエクスポートして、ワークロードで実行されているすべての SQL Server インスタンスを確認し、Azure Migrate: Database Assessment ツールを使用してそれらの対応性を確認します。

 ![Portal 上のアプリケーション インベントリ](./media/concepts-migration-planning/application-inventory-portal.png)

 ![アプリケーション インベントリのエクスポート](./media/concepts-migration-planning/application-inventory-export.png)

Server Assessment ツールで検出されたデータと共に既存の CMDB データを使用して、サーバーおよびデータベース資産のビューを作成し、ビジネス ユニット、アプリケーション所有者、地域などに分散したサーバーについて把握することができます。また、移行するワークロードの優先付けにも役立ちます。

### <a name="what-dependencies-exist-between-workloads"></a>ワークロード間にはどのような依存関係が存在しますか?

サーバーについて把握したら、相互に関連するサーバーを Azure に移行するために、エージェントレスの依存関係マッピングを使ってサーバー間の依存関係と最適化戦略を視覚化して特定します。 視覚化することにより、特定のマシンが使用されているかどうかや、それらを移行する代わりに使用停止にできるかどうかを判断することができます。  必ず依存関係を分析し、残されたものがないようにして、移行中の突然の停止を回避してください。 アプリケーション インベントリと依存関係マッピングを実行したら、信頼度の高いグループを作成してサーバーの評価を開始できます。

 ![依存関係のマッピング](./media/concepts-migration-planning/expand-client-group.png)

### <a name="are-they-optimized-and-sized-properly"></a>それらは最適化されていて、適切なサイズになっていますか?

Azure では時間の経過に伴いクラウドの容量を柔軟に変更できるため、サーバーに割り当てられている CPU およびメモリ リソースを最適化するためには、移行が良い機会になります。 前に特定したグループに対する評価を作成して、ワークロードのパフォーマンス履歴を理解しておくことが、Azure で適正サイズの VM SKU とディスクの推奨事項を得るために非常に重要になります。

## <a name="assess-your-readiness-for-migration"></a>移行への対応性を評価する

### <a name="readiness-and-suitability-analysis-for-azure"></a>Azure への対応性と適合性の分析
VM が Azure に対応しているかどうかを確認するために、Azure VM 評価レポートをエクスポートして、次の対応性のカテゴリでフィルター処理します。

- **[Azure に対応]** : これらのマシンをそのまま、変更せずに Azure に移行できます。  

- **Azure に条件付きで対応**:これらのマシンを Azure に移行することはできますが、評価で提供される修復ガイダンスに従って、これらのサーバーに軽微な変更を加える必要があります。

- **[Azure に未対応]** : これらのマシンをそのまま Azure に移行することはできません。移行する前に、修復ガイダンスに従って問題を修正する必要があります。

- **[Readiness 不明]** : メタデータが不十分なため、Azure Migrate ではマシンの対応性を判断できません。

データベース評価を使用すると、ご自分の SQL Server データ資産が Azure SQL Database または Azure SQL Managed Instance への移行に対応しているかどうかを評価できます。 各 SQL Server インスタンスについて、移行の対応状況がパーセンテージで示されます。 また、各インスタンスについて、Azure で推奨されるターゲット、移行の潜在的な阻害要因、破壊的変更の数、Azure SQL DB / Azure SQL VM への対応性、および互換性レベルが示されます。 移行の阻害要因による影響と、それらを修正するための推奨事項について理解を深めることができます。

 ![データベースの評価](./media/concepts-migration-planning/database-assessment-portal.png)

### <a name="sizing-recommendations"></a>サイズ設定に関する推奨事項

マシンが Azure に対応することが確認されると、Server Assessment によって、サイズ設定の推奨事項が作成されて、VM に対応する Azure VM とディスク SKU が特定されます。 パフォーマンス履歴に基づいたサイズ設定の推奨事項を表示することも (移行時にリソースを最適化するため)、パフォーマンス履歴を考慮せずに、オンプレミスの構成に基づいたサイズ設定の推奨事項を表示することもできます。 データベースについては、データベース評価で、データベース SKU、価格レベル、およびコンピューティング レベルに関する推奨事項を確認できます。  

### <a name="compute-assessments-to-get-estimated-costs-for-running-the-workloads-in-azure"></a>評価から Azure でワークロードを実行するための推定コストを計算する

評価の "*パフォーマンス ベース*" のサイズ設定オプションでは、Azure のワークロードを最適化できます。 適正なサイズ設定のほか、次のような方法もコスト削減に役立ちます。

- **予約インスタンス**:予約インスタンスを使用すると、Windows と Linux (VM) での 1 年間または 3 年間の従量課金制の料金と比較して、コストを大幅に削減できます。

- **Azure ハイブリッド特典**:ソフトウェア アシュアランス付きの Windows Server オンプレミス ライセンスを Azure に持ち込み、予約インスタンス オプションと組み合わせることができます。

- **マイクロソフトエンタープライズ契約プラン (EA)** :マイクロソフトエンタープライズ契約には、サブスクリプションに適用可能な割引が既に組み込まれています。

- **Offers**:Azure には複数のプランが用意されており、たとえば、開発やテスト用の VM 向けに価格を抑えた開発テスト用の従量課金制プランや Enterprise Dev/Test などがあります。

- **VM 稼働時間**: Azure VM を実行する 1 か月あたりの日数と 1 日あたりの時間数を指定すると、コストの削減になります (RI には適用されません)。

- **[Target region]\(ターゲット リージョン\)** : 異なるリージョンの複数の評価を作成し、地域内のどのリージョンへの移行がコスト効率に優れているかを比較することができます。

- **パフォーマンス ベースの推奨事項**:ベスト プラクティスとして、推奨される適切なサイズの Azure VM を使用することでクラウドのコストを削減します。

### <a name="visualize-data"></a>データの視覚化

ポータル上の Server Assessment レポートで Azure への対応性と毎月のコスト配分を確認できるほか、評価をエクスポートし、検出および評価のデータにより多くの視覚化を適用して移行計画を充実させることができます。 プロパティのさまざまな組み合わせに対して複数の評価を作成し、ご自身のビジネスに最適なプロパティのセットを選択してください。  

 ![評価の概要](./media/concepts-migration-planning/assessment-summary.png)

### <a name="evaluate-gaps-and-potential-blockers"></a>ギャップと潜在的な阻害要因を評価する

移行するアプリケーションとその基盤となるインフラストラクチャを決定する一方で、それらのアプリケーションのダウンタイムの制約を特定し、アプリケーションとその基盤となるインフラストラクチャとの間に運用上の依存関係がないかを確認します。 この分析により、目標復旧時間 (RTO) を満たす移行を計画し、データ損失を最小限に抑えることができます。 移行の前に、Server Assessment レポートと Azure Migrate: Database Assessment の推奨事項を活用し、サーバーと SQL データベースの移行を妨げる可能性のある互換性の問題や、サポートされていない機能がないかを確認し、軽減しておくことをお勧めします。

### <a name="first-workloads-to-target-and-approach"></a>対象となる最初のワークロードとアプローチ

移行に関する決定を行うために必要なすべての重要な情報が得られたので、最初にどのアプリケーションとワークロードを移行するか、優先順位を決める必要があります。 本格的な移行に着手する前に戦略の欠陥を解決できるように、目的のアプリケーションを体系的かつ制御可能な方法で移行するための "適用と学習" アプローチを開発します。 また、移行するアプリケーション グループの優先順位を決定するために、移行の複雑さや所要時間、ビジネスの緊急度、運用環境かどうか、コンプライアンス、セキュリティ要件、アプリケーションの知識などの戦略的要因を使用することもできます。

推奨される移行戦略をいくつか紹介します。

- **すぐに成果の出るものを優先する**:評価レポートを使用して、Azure への移行に完全に対応していて、最小限の労力で移行できるサーバーやデータベースなど、すぐに成果の出るものを特定します。
    - Azure 対応確認済：評価レポートをエクスポートし、"Azure 対応確認済み" になっているすべてのマシンをフィルター処理します。 これは、Azure Migrate: Server Migration ツールを使用してリフト アンド シフトできる最初のマシン グループの候補になります。サーバー移行ツール。
    - サポートが終了した OS:評価レポートをエクスポートし、Windows Server 2008 および Windows Server 2008 R2 オペレーティング システムを実行しているすべてのマシンをフィルター処理します。 これらの SKU はサポートが終了しています。これらを Azure に移行した場合に限り、3 年間セキュリティ更新プログラムが無料で提供されます。 Azure ハイブリッド特典と予約インスタンスを組み合わせて使用することで、大幅なコスト削減につながる可能性があります。
    - SQL Server の移行:データベース評価の推奨事項を使用して、Azure Migrate: Database Migration を使って Azure SQL データベース用に準備されたデータベースを移行し、Azure Migrate: Server Migration を使って Azure SQL VM 用に準備されたデータベースを移行します。
    - サポートが終了するソフトウェア:アプリケーション インベントリをエクスポートし、サポートが終了する可能性のあるソフトウェアや拡張機能をフィルター処理します。 これらのアプリケーションを優先する必要があります。
    - 過剰にプロビジョニングされた VM:評価レポートをエクスポートし、CPU 使用率 (%) とメモリ使用率 (%) が低いマシンをフィルター処理します。  この機会を利用して適切なサイズの Azure VM に移行し、使用していないリソースに対して支払っていた金額を節約しましょう。
    - 容量の制約:評価レポートをエクスポートし、CPU 使用率 (%) とメモリ使用率 (%) が高いマシンをフィルター処理します。  容量が逼迫した VM を Azure に移行し、需要に応じた自動スケーリング機能を利用することで、VM の中断を防いでパフォーマンスを向上させることができます。 また、評価レポートを調べることで、ディスクの IOPS とスループットを分析してストレージの制約を理解し、ニーズに最も合った推奨されるディスクの種類を見つけることもできます。

- **小規模から始めて拡大する**:移行戦略に対する信頼を築くために、まずはリスクが最小限であまり複雑でないアプリケーションとワークロードの移行から始めます。 また、Azure Migrate の評価の推奨事項と組織の CMDB リポジトリを併用し、パイロット移行に適した Dev/Test 環境のワークロードを見つけて移行することもできます。 これらのパイロットから学んだことを、運用環境のワークロードを移行するときに活用できます。  

- **規制および業界の要件への準拠**:Azure では、業界全体で最大級のコンプライアンス ポートフォリオを維持しており、その内容は広範かつ詳細にわたります。 これを、Azure への移行を優先的に行い、国や地域、業界に固有の標準および法律に準拠する機会として利用してください。 これは、業務上重要な情報を扱う組織、機密情報を保持している組織、規制の厳しい業界など、標準や規制が多く存在し、かつそれらが頻繁に変更される可能性がある組織には特に重要なことです。  

## <a name="finalize-the-migration-planandprepare-formigration"></a>移行計画の仕上げと移行の準備

移行計画を確定する前に、これらの移行に関する主な考慮事項を確認し、それらが移行計画の阻害要因とならないようにしてください。

- ネットワーク帯域幅と待機時間の制約を評価します。これらは予期しない遅延の原因となり、移行レプリケーションの速度を低下させる恐れがあります。

- 移行したアプリケーションのパフォーマンス テストやユーザー受け入れテストを実施したり、移行後にアプリケーションの調整 (データベース接続文字列や Web サーバー構成の更新、切り替えやクリーンアップの実行など) を行ったりできるように、バッファーを設けます。

- 推奨される Azure のアクセス許可と、移行に必要なサーバー/データベース アクセス ロールおよびアクセス許可のモデルを確認します。

- デジタル変革に向けて組織の準備を進め、従業員の足並みを揃えます。 組織改革を成功させるには、しっかりしたトレーニング基盤が重要です。  [Microsoft Learn](/learn/azure/?ocid=CM_Discovery_Checklist_PDF) の無料トレーニングで、Azure の基礎、ソリューション アーキテクチャ、セキュリティに関するコースなどを利用できます。 また、 [Azure 認定資格](https://www.microsoft.com/learning/certification-overview.aspx?ocid=CM_Discovery_Checklist_PDF) についても調べるよう勧めてください。  

- 必要に応じて、実装のサポートを受けることができます。 クラウドに移行する多くの組織が、外部からサポートを受けています。 パーソナライズされたサポートを受けながら迅速かつ自信を持って Azure に移行するには、 [Azure Expert Managed Service Provider](https://www.microsoft.com/solution-providers/search?cacheId=9c2fed4f-f9e2-42fb-8966-4c565f08f11e&ocid=CM_Discovery_Checklist_PDF)  または  [FastTrack for Azure](https://azure.microsoft.com/programs/azure-fasttrack/?ocid=CM_Discovery_Checklist_PDF) のご利用をご検討ください。  

移行するアプリケーションのリスト/グループ、アプリとデータベースの可用性とダウンタイムの制約、および必要な移行マイルストーンに関する詳細情報を含む、効果的なクラウド移行計画を作成します。 また、移行計画では、データのコピーにかかる時間を考慮し、移行後のテストや切り替えの作業に必要なバッファーを持たせる必要があります。 移行後のテストでは、機能、統合、セキュリティ、およびパフォーマンスに関するテストのユース ケースを含めて、移行されたアプリケーションが想定どおりに動作し、すべてのデータベース オブジェクトとデータのリレーションシップがクラウドに正常に転送されたことを確認する必要があります。  

この分析を使用して移行のロードマップを作成し、メンテナンス期間を宣言することで、アプリケーションとデータベースをゼロまたは最小限のダウンタイムで移行しながら、移行中の運用/ビジネスへの影響を最小限に抑えることができます。  

Azure へのフル スケールの移行を開始する前に、常に Azure Migrate の " *Test Migration*" 機能を使ってテストを実行することをお勧めします。 この実データから実際の処理時間を見積もり、移行計画に対して必要な調整を行うことができます。 また、テスト移行は、実際の移行を進める前に、移行計画に潜在的な問題があれば検出して修正する機会となります。  

移行の準備ができたら、Azure Migrate の "*Server Migration ツール*" と Azure Migrate の "*Data Migration Service*" を使用することで、エンド ツー エンドの追跡機能を備えた統合されたシームレスな移行エクスペリエンスが実現します。 Server Migration ツールを使用すると、お客様のデータセンターのほか、任意のプライベートまたはパブリック クラウド (AWS、GCP などを含む) のオンプレミスでホストされている VM とサーバーを、ほぼゼロに近いダウンタイムで移行できます。 Azure Database Migration Service は、複数のデータベース ソースから Azure データ プラットフォームへのシームレスな移行を最小限のダウンタイムで実現できるように設計された、フル マネージドのサービスです。  

> [!NOTE]
> VMware VM の場合、Server Assessment は、vCenter Server で VM に指定されているオペレーティング システムを使ってゲスト OS 分析を処理します。 VMware で実行されている Linux VM については、現在のところゲスト OS の正確なカーネル バージョンが識別されません。

## <a name="next-steps"></a>次のステップ

- Azure クラウド導入フレームワークでの [クラウド移行の工程](/azure/architecture/cloud-adoption/getting-started/migrate) を調査します。
- Azure Migrate の[使用を開始](https://youtu.be/wFfq3YPxYHE)します。
- [VMware VM](tutorial-assess-vmware.md) または [Hyper-V VM](tutorial-assess-hyper-v.md) の評価を作成します。
