---
title: Azure Migrate を使用した移行計画の作成
description: Azure Migrate を使用した移行計画の作成に関するガイダンスを提供します。
author: rashi-ms
ms.author: rajosh
ms.manager: abhemraj
ms.topic: conceptual
ms.date: 11/11/2020
ms.openlocfilehash: ef916e0e8b32c96382a731d4a307e2b2a98ba1ea
ms.sourcegitcommit: ea551dad8d870ddcc0fee4423026f51bf4532e19
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/07/2020
ms.locfileid: "96753860"
---
# <a name="build-migration-plan-with-azure-migrate"></a>Azure Migrate を使用した移行計画の作成

この記事に従って、[Azure Migrate](migrate-services-overview.md) を使用して Azure への移行計画を作成します。 

## <a name="define-cloud-migration-goals"></a>クラウド移行の目標を定義する

開始する前に、クラウド移行に対するご自身の[動機](/azure/cloud-adoption-framework/strategy/motivations)を理解し、評価することで、ビジネス成果につなげることができます。 [クラウド導入フレームワーク](/azure/cloud-adoption-framework)で説明しているように、複数のきっかけと成果があります。   

**ビジネス イベント** | **移行の結果**
--- | ---
データセンターの閉鎖 | コスト 
合併、買収、売却 | ベンダーまたは技術的な複雑さの減少
資本支出の削減 | 内部運用の最適化
ミッション クリティカルなテクノロジのサポートの終了 | ビジネスの機敏性の向上
規制コンプライアンスの変更への対応 | 新しい技術機能に対する準備
新しいデータ主権要件 | 市場需要に合わせたスケーリング
中断の減少と IT の安定性の向上 | 地理的需要に合わせたスケーリング

ご自身の動機を特定することで、戦略的な移行目標を決めることができます。 次のステップでは、ご自分のワークロードに合わせた移行パスを特定して計画します。 [Azure Migrate: Server Assessment](migrate-services-overview.md#azure-migrate-server-assessment-tool) ツールを使用すると、オンプレミスのワークロードを評価でき、移行の際に役立つガイダンスとツールを利用できます。

## <a name="understand-your-digital-estate"></a>デジタル資産を把握する

まず、現在のオンプレミスのインフラストラクチャ、アプリケーション、および依存関係を特定します。 これは、Azure への移行対象のワークロードの特定と、最適化されたコスト予測の収集に役立ちます。 Server Assessment ツールにより、使用中のワークロード、ワークロード間の依存関係、およびワークロードの最適化を特定できます。

### <a name="workloads-in-use"></a>使用中のワークロード

Azure Migrate は、軽量の Azure Migrate アプライアンスを使用して、オンプレミスの VMware VM、Hyper-V VM、その他の仮想マシン、および物理サーバーのエージェントレス検出を実行します。 継続的な検出で、マシンの構成情報、パフォーマンス メタデータ、およびアプリケーション データが収集されます。 このアプライアンスによってオンプレミスのマシンから収集されるものは次のとおりです。 

- マシン、ディスク、および NIC のメタデータ。

- インストールされているアプリケーション、ロール、および機能。

- CPU とメモリの使用率、ディスクの IOPS、スループットなどのパフォーマンス データ。

データの収集後、アプリケーション インベントリの一覧をエクスポートして、マシンで実行されているアプリと SQL Server インスタンスを確認できます。 Azure Migrate: Database Assessment ツールを使用すると、SQL Server の対応性を把握できます。

 ![Portal 上のアプリケーション インベントリ](./media/concepts-migration-planning/application-inventory-portal.png)

 ![アプリケーション インベントリのエクスポート](./media/concepts-migration-planning/application-inventory-export.png)

Server Assessment ツールで検出されたデータと共に、構成管理データベース (CMDB) のデータを使用して、サーバーおよびデータベースの資産のビューの作成や、事業単位、アプリケーション所有者、地域などでのサーバー分散状況の把握を行うことができます。これは、移行の際に優先するワークロードを決定するのに役立ちます。 

### <a name="dependencies-between-workloads"></a>ワークロード間の依存関係

サーバーの検出後、相互依存のサーバーを Azure に移行するために、[依存関係を分析し](concepts-dependency-visualization.md)、サーバー間の依存関係と最適化戦略を視覚化して特定できます。 視覚化することにより、特定のマシンが使用されているかどうかや、それらを移行する代わりに使用停止にできるかどうかを判断することができます。  依存関係を分析すると、作業漏れや移行時の突然の停止が生じないようにすることできます。 アプリケーション インベントリと依存関係の分析を実行したら、信頼度の高いサーバー グループを作成して、それらの評価を開始できます。

 ![依存関係のマッピング](./media/concepts-migration-planning/expand-client-group.png)

### <a name="optimization-and-sizing"></a>最適化とサイズ設定

Azure では、時間の経過と共にクラウドの容量を変更するという柔軟性が提供されます。また、移行により、サーバーに割り当てられている CPU およびメモリ リソースを最適化する機会が提供されます。 特定したサーバーについての評価を作成すると、ワークロードのパフォーマンス履歴を把握するのに役立ちます。 これは、Azure VM SKU の適切なサイズ設定と Azure でのディスクに関する推奨事項のために不可欠です。

## <a name="assess-migration-readiness"></a>移行の対応性を評価する


### <a name="readinesssuitability-analysis"></a>対応性/適合性の分析

評価レポートをエクスポートし、こちらのカテゴリでフィルター処理すると、Azure 対応性を把握できます。

- **[Azure に対応]** : マシンを変更せずに Azure にそのまま移行できます。 
- **Azure に条件付きで対応**:マシンは Azure に移行できますが、評価で提供されている修復ガイダンスに従って軽微な変更が必要です。
- **[Azure に未対応]** : マシンをそのまま Azure に移行することはできません。 移行前に、修復ガイダンスに従って問題を修正する必要があります。 
- **[Readiness 不明]** : メタデータが不十分なため、Azure Migrate はマシンの対応性を判断できません。

データベース評価を使用すると、Azure SQL Database または Azure SQL Managed Instance への移行について SQL Server データ資産の対応性を評価できます。 この評価では、SQL サーバー インスタンスごとに移行対応状況がパーセンテージで示されます。 さらに、インスタンスごとに、Azure で推奨されるターゲット、移行の潜在的な阻害要因、破壊的変更の数、Azure SQL DB または Azure SQL VM への対応性、および互換性レベルが示されます。 移行の阻害要因による影響と、それらの修正に関する推奨事項について理解を深めることができます。

 ![データベースの評価](./media/concepts-migration-planning/database-assessment-portal.png)

### <a name="sizing-recommendations"></a>サイズ設定に関する推奨事項

マシンが Azure に対応することが示されると、Server Assessment からサイズ設定に関する推奨事項が示され、ご使用のマシンの Azure VM SKU とディスクの種類が特定されます。 サイズ設定に関する推奨事項は、(移行時にリソースを最適化するために) パフォーマンス履歴に基づいて、またはパフォーマンス履歴を使用せずにオンプレミスのマシン設定に基づいて取得できます。 データベース評価で、データベース SKU、価格レベル、およびコンピューティング レベルに関する推奨事項を確認できます。  

### <a name="get-compute-costs"></a>コンピューティング コストを取得する

Azure Migrate による評価でのパフォーマンス ベースのサイズ設定オプションは、VM の適切なサイズ設定に役立ちます。Azure でのワークロード最適化のベスト プラクティスとして使用してください。 適切なサイズ設定に加えて、Azure のコスト節約に役立つその他のオプションがいくつかあります。 

- **予約インスタンス**:[予約インスタンス (RI)](https://azure.microsoft.com/pricing/reserved-vm-instances/) を使用すると、[従量課金制の価格](https://azure.microsoft.com/pricing/purchase-options/pay-as-you-go/)と比較して、コストを大幅に削減できます。
- **[Azure ハイブリッド特典]** : [Azure ハイブリッド特典](https://azure.microsoft.com/pricing/purchase-options/pay-as-you-go/)を利用すると、アクティブなソフトウェア アシュアランスを含むオンプレミスの Windows Server ライセンス、または Linux サブスクリプションを Azure に取り込み、予約インスタンス オプションと組み合わせることができます。
- **マイクロソフト エンタープライズ契約**:Azure [Enterprise Agreement (EA)](../cost-management-billing/manage/ea-portal-agreements.md) を利用すると、Azure のサブスクリプションおよびサービスを節約できます。
- **Offers**:複数の [Azure プラン](https://azure.microsoft.com/support/legal/offer-details/)があります。 たとえば、開発/テスト用 VM 向けに低料金を提供する[開発テスト用の従量課金制プラン](https://azure.microsoft.com/pricing/dev-test/)や [Enterprise Dev/Test プラン](https://azure.microsoft.com/offers/ms-azr-0148p/)
- **VM のアップタイム**:1 か月あたりの Azure VM 実行日数と 1 日あたりの時間を確認できます。 使用していないときにマシンをシャットダウンすると、コストを削減できます (RI には適用されません)。
- **[Target region]\(ターゲット リージョン\)** :さまざまなリージョンで評価を作成して、特定のリージョンへの移行でコスト効率がより高くなる可能性があるかどうかを見極めることができます。 

### <a name="visualize-data"></a>データの視覚化

ポータルで、Server Assessment レポート (Azure 対応性の情報と月単位のコストの分布を含みます) を表示できます。 また、評価をエクスポートし、視覚エフェクトを追加して移行計画を充実させることもできます。 さまざまな組み合わせのプロパティで複数の評価を作成し、ご自身のビジネスに最適なプロパティのセットを選択できます。  

 ![評価の概要](./media/concepts-migration-planning/assessment-summary.png)

### <a name="evaluate-gapsblockers"></a>ギャップ/阻害要因を評価する

移行するアプリとワークロードを把握する中で、それらのダウンタイムの制約を特定し、アプリと基になるインフラストラクチャとの間の運用上の依存関係を探します。 この分析により、目標復旧時間 (RTO) を満たす移行を計画し、データ損失を最小限に抑えることができます。 移行する前に、サーバーや SQL データベースの移行を妨げる可能性のある互換性の問題、サポートされていない機能を確認し、緩和することをお勧めします。 これには、Azure Migrate Server Assessment レポートと Azure Migrate Database Assessment が役立ちます。 

### <a name="prioritize-workloads"></a>ワークロードの優先度を付ける

インベントリに関する情報を収集したら、最初に移行するアプリとワークロードを特定できます。 本格的な移行を開始する前にすべての欠陥を解決できるように、体系的かつ制御可能な方法でアプリを移行するための "適用と学習" アプローチを策定します。

移行順序の優先度付けには、複雑さ、移行時間、ビジネスの緊急度、運用/非運用環境に関する考慮事項、コンプライアンス、セキュリティ要件、アプリケーションの知識などの戦略的要因を使用できます。 

いくつかの推奨事項を次に示します。

- **すぐに成果の出るものを優先する**:評価レポートを使用して、Azure への移行に完全に対応していて、最小限の労力で移行できるサーバーやデータベースなど、すぐに成果の出るものを特定します。 これを行うための方法を次の表にまとめます。

    **State** | **操作**
    --- | ---
    **Azure 対応確認済の VM** | 評価レポートをエクスポートし、状態が *[Azure に対応]* であるすべてのマシンをフィルター処理します。 これは、次のものを使用して、Azure にリフトアンドシフトするマシンの最初のグループである可能性があります。[Azure Migrate:Server Migration](migrate-services-overview.md#azure-migrate-server-migration-tool) ツールを使用したエージェントベースのレプリケーションに対して使用されるアーキテクチャとプロセスの概要を示します。
    **サポート終了のオペレーティング システム** | 評価レポートをエクスポートし、Windows Server 2008 R2 または Windows Server 2008 を実行しているすべてのマシンにフィルターを適用します。 これらのオペレーティング システムはサポートが終了しています。これらを Azure に移行した場合に限り、3 年間のセキュリティ更新プログラムが無料で提供されます。 Azure ハイブリッド特典を組み合わせて、RI を使用すると、大幅なコスト削減につながる可能性があります。
    **SQL Server の移行** | データベース評価の推奨事項を使用して、Azure SQL Database に対応しているデータベースを移行します。これには次のものを使用します。Azure Migrate:Database Migration ツール。 Azure SQL VM に対応しているデータベースを移行します。これには次のものを使用します。Azure Migrate:サーバー移行ツール。
    **サポートが終了するソフトウェア** | アプリケーション インベントリをエクスポートし、サポート終了になる可能性のあるソフトウェアや拡張機能をフィルター処理します。 移行のために、これらのアプリケーションに優先度を付けます。
    **過少にプロビジョニングされているマシン** | 評価レポートをエクスポートし、CPU 使用率 (%) とメモリ使用率 (%) が低いマシンをフィルター処理します。  適切なサイズの Azure VM に移行し、使用率の低いリソースのコストを節約します。
    **過剰にプロビジョニングされているマシン** | 評価レポートをエクスポートし、CPU 使用率 (%) とメモリ使用率 (%) が高いマシンをフィルター処理します。  容量の制約を解決し、容量が逼迫したマシンを Azure に移行することで、これらのマシンの中断を防ぎ、パフォーマンスを向上させます。 Azure では、要求を満たすために自動スケール機能を使用してください。<br/><br/> 評価レポートを分析して、ストレージの制約を調査します。 ディスクの IOPS とスループット、推奨されるディスクの種類を分析します。

- **小規模から始めて拡大する**:移行戦略に対する信頼を築くために、リスクや複雑さが最小限であるアプリとワークロードの移行から始めます。 CMDB リポジトリと共に Azure Migrate による評価の推奨事項を分析し、パイロット移行の候補となる可能性がある開発/テスト ワークロードを探して移行します。 運用環境のワークロードの移行を開始するときに、パイロット移行からのフィードバックと知識を役立てることができます。  
- **準拠**:Azure では、業界で最大級のコンプライアンス ポートフォリオを維持しており、その内容は広範かつ詳細にわたります。 コンプライアンス要件を使用して移行の優先順位を付けて、アプリとワークロードが自国、地域、および業界に固有の標準と法に準拠するようにします。 これは、ビジネスに不可欠なプロセスを処理する組織、機密情報を保持する組織、または規制の厳しい業界に属する組織に特に当てはまります。 このようなタイプの組織では、標準や規制が多く、頻繁に変更される可能性があり、後れを取らずについていくことは困難です。  

## <a name="finalize-the-migration-plan"></a>移行計画を仕上げる

移行計画を仕上げる前に、次のようなその他の潜在的な阻害要因を検討し、緩和するようにしてください。 

- **ネットワークの要件**: ネットワーク帯域幅および待機時間の制約を評価します。これらは、予期しない遅延や、移行レプリケーションの速度低下の原因となる可能性があります。
- **テスト/移行後の微調整**:移行されたアプリのパフォーマンスおよびユーザー受け入れのテストを実行したり、移行後にアプリの構成や微調整 (データベース接続文字列の更新、Web サーバーの構成、カットオーバーまたはクリーンアップの実行など) を行ったりするための時間バッファーを配分します。
- **アクセス許可**:推奨される Azure のアクセス許可と、移行に必要なサーバー/データベース アクセス ロールおよびアクセス許可を確認します。
- **トレーニング**:デジタル変革に向けて組織を準備します。 組織改革を成功させるには、しっかりしたトレーニング基盤が重要です。 [Microsoft Learn](/learn/azure/?ocid=CM_Discovery_Checklist_PDF) の無料トレーニング (Azure の基礎、ソリューション アーキテクチャ、セキュリティに関するコースなど) をご確認ください。  [Azure 認定資格](https://www.microsoft.com/learning/certification-overview.aspx?ocid=CM_Discovery_Checklist_PDF)について検討するようチームに勧めてください。  
- **実装のサポート**:必要に応じて、実装のサポートを受けます。 クラウドに移行する多くの組織が、外部からサポートを受けています。 個別支援を受けながら迅速かつ自信を持って Azure に移行するには、 [Azure Expert マネージド サービス プロバイダー](https://www.microsoft.com/solution-providers/search?cacheId=9c2fed4f-f9e2-42fb-8966-4c565f08f11e&ocid=CM_Discovery_Checklist_PDF) または  [FastTrack for Azure](https://azure.microsoft.com/programs/azure-fasttrack/?ocid=CM_Discovery_Checklist_PDF) のご利用をご検討ください。  


移行するアプリ、アプリとデータベースの可用性、ダウンタイムの制約、および移行マイルストーンに関する詳細情報を含む、効果的なクラウド移行計画を作成します。 計画では、データのコピーにかかる時間を考慮し、移行後のテストやカットオーバーの作業に現実的なバッファーを含めます。 

移行後のテスト計画では、機能、統合、セキュリティ、およびパフォーマンスに関するテストおよびユース ケースを含めて、移行されたアプリが想定どおりに動作し、すべてのデータベース オブジェクトとデータのリレーションシップがクラウドに正常に転送されたことを確認する必要があります。  

移行のロードマップを作成し、メンテナンス期間を宣言してアプリとデータベースを最小限のダウンタイムで移行し、移行時における運用およびビジネスへの潜在的な影響を抑えます。  

## <a name="migrate"></a>移行

本格的な移行を開始する前に、Azure Migrate でテスト移行を実行することをお勧めします。 テスト移行は、所要時間の見積もりと、移行計画の微調整に役立ちます。 これにより、完全な移行の前に潜在的な問題を検出して修正できます。

移行の準備ができたら、Azure Migrate:Server Migration ツールと Azure Data Migration Service (DMS) を使用して、エンド ツー エンドの追跡機能を備えた統合されたシームレスな移行エクスペリエンスを実現します。

- Server Migration ツールを使用すると、オンプレミスの VM とサーバー、または他のプライベートまたはパブリックのクラウド (AWS、GCP など) に配置されている VM をほぼゼロのダウンタイムで移行できます。
- Azure DMS は、複数のデータベース ソースから Azure Data プラットフォームへのシームレスな移行を最小限のダウンタイムで実現できるように設計された、フル マネージド サービスを提供します。  

## <a name="next-steps"></a>次のステップ

- Azure クラウド導入フレームワークでの [クラウド移行の工程](/azure/architecture/cloud-adoption/getting-started/migrate) を調査します。
- Azure Migrate の[簡単な概要](migrate-services-overview.md)を把握し、[作業の開始のビデオ](https://youtu.be/wFfq3YPxYHE)を視聴します。
- [Azure VM](concepts-assessment-calculation.md) への移行のための VM の評価について理解します。
