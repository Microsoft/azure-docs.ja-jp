---
title: "一般的なクラウド サービス管理タスク (クラシック) | Microsoft Docs"
description: "Azure クラシック ポータルでクラウド サービスを管理する方法について説明します。"
services: cloud-services
documentationcenter: 
author: Thraka
manager: timlt
editor: 
ms.assetid: 41a30e50-067c-485b-96fd-434a6d057abc
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/27/2016
ms.author: adegeo
translationtype: Human Translation
ms.sourcegitcommit: c2a9a14891f197ae442c41668229d4a7610ba248
ms.openlocfilehash: 17270815b6278ec6b36a134c313cd543622dd9f4


---
# <a name="how-to-manage-cloud-services"></a>Cloud Services の管理方法
> [!div class="op_single_selector"]
> * [Azure ポータル](cloud-services-how-to-manage-portal.md)
> * [Azure クラシック ポータル](cloud-services-how-to-manage.md)
>
>

Azure クラシック ポータルの **[Cloud Services]** 領域では、サービス ロールまたはデプロイメントの更新、ステージングされたデプロイメントの運用環境への昇格、クラウド サービスに対するリソースのリンク (リソースの依存関係を把握してリソースの規模をまとめて設定するため)、およびクラウド サービスまたはデプロイメントの削除ができます。

## <a name="how-to-update-a-cloud-service-role-or-deployment"></a>方法: クラウド サービス ロールまたはデプロイメントの更新
クラウド サービスのアプリケーション コードを更新する必要がある場合は、ダッシュボード、**[Cloud Services]** ページ、または **[インスタンス]** ページの **[更新]** を使用します。 1 つのロールを更新することも、すべてのロールを更新することもできます。 新しいサービス パッケージとサービス構成ファイルをアップロードする必要があります。

1. [Azure クラシック ポータル](https://manage.windowsazure.com/)のダッシュボード、**[Cloud Services]** ページ、または **[インスタンス]** ページで、**[更新]** をクリックします。

    ![UpdateDeployment](./media/cloud-services-how-to-manage/CloudServices_UpdateDeployment.png)

2. **[デプロイ ラベル]**ボックスに、デプロイメントを識別する名前を入力します (たとえば、mycloudservice4)。 デプロイ ラベルはダッシュボードの **[クイック スタート]** に表示されます。
3. **[パッケージ]** で、**[参照]** を使ってサービス パッケージ ファイル (.cspkg) をアップロードします。
4. **[構成]** で、**[参照]** を使ってサービス構成ファイル (.cscfg) をアップロードします。
5. **[ロール]** で、クラウド サービスのすべてのロールをアップグレードする場合は、**[すべて]** をクリックします。 1 つのロールの更新を実行するには、更新するロールを選択します。 特定のロールを選択して更新した場合でも、サービス構成ファイルの更新内容はすべてのロールに適用されます。
6. 更新によってロールの数またはロールのサイズが変わる場合は、 **[ロールのサイズまたは数が変更された場合に更新を許可する]** チェック ボックスをオンにしないと更新を続行できません。

    ロールのサイズ (つまり、ロール インスタンスをホスティングする仮想マシンのサイズ) またはロールの数を変更した場合、各ロール インスタンス (仮想マシン) にイメージを再適用する必要があり、ローカル データがすべて失われることに注意してください。

7. ロール インスタンスが&1; つしかないサービス ロールがある場合は、 **[1 つ以上のロールに単一のインスタンスが含まれている場合でも更新する]** チェック ボックスをオンにして、アップグレードを続行できるようにします。

    Azure でクラウド サービスの更新中に 99.95% の可用性を保証できるのは、各ロールに少なくとも 2 つのロール インスタンス (仮想マシン) がある場合だけです。 この場合、1 台の仮想マシンでクライアントからの要求を処理し、もう&1; 台で更新を行うことができます。

8. **[OK]** (チェックマーク) をクリックして、サービスの更新を開始します。

## <a name="how-to-swap-deployments-to-promote-a-staged-deployment-to-production"></a>方法: デプロイメントをスワップしてステージングされたデプロイメントを運用環境に昇格
**[スワップ]** を使用して、クラウド サービスのステージング デプロイメントを運用環境に昇格します。 クラウド サービスの新しいリリースをデプロイするときは、顧客が運用環境で現在のリリースを使用しながら、クラウド サービスのステージング環境で新しいリリースをステージングしテストできます。 新しいリリースを運用環境に昇格する準備ができたら、 **[スワップ]** を使用して&2; つのデプロイメントのアドレスである URL を切り替えることができます。

デプロイメントのスワップは、 **[Cloud Services]** ページまたはダッシュボードから実行できます。

1. [Azure クラシック ポータル](https://manage.windowsazure.com/)で、 **[Cloud Services]**をクリックします。
2. クラウド サービスの一覧で、クラウド サービスをクリックして選択します。
3. **[スワップ]**をクリックします。

    次のような確認ダイアログが表示されます。

    ![Cloud Services のスワップ](./media/cloud-services-how-to-manage/CloudServices_Swap.png)

4. デプロイメント情報を確認した後、 **[はい]** をクリックしてデプロイメントをスワップします。

    変更されるのはデプロイメントの仮想 IP アドレス (VIP) だけであるため、デプロイメントのスワップは直ちに実行されます。

    コンピューティング費用を節約するために、新しい運用環境のデプロイメントが予想どおりに動作することが確認できたら、ステージング環境のデプロイメントを削除することができます。

### <a name="common-questions-about-swapping-deployments"></a>デプロイのスワップについてよく寄せられる質問

**デプロイをスワップするための前提条件は何にですか。**

デプロイのスワップを成功させるための重要な前提条件は&2; つあります。

- 運用スロット用の静的 IP アドレスを使用する場合は、ステージング スロット用の静的 IP アドレスも予約する必要があります。 これを行わなかった場合、スワップは失敗します。

- スワップを実行する前に、ロールのすべてのインスタンスを実行する必要があります。 インスタンスの状態は、Azure クラシック ポータルで、または [Windows PowerShell で Get-AzureRole コマンド](https://docs.microsoft.com/en-us/powershell/servicemanagement/azure.service/v3.1.0/get-azurerole)を使用して確認できます。

ゲスト OS の更新とサービス復旧操作も、デプロイのスワップを失敗させる可能性があります。 詳細については、「[クラウド サービスのデプロイメントに関する問題のトラブルシューティング](cloud-services-troubleshoot-deployment-problems.md)」を参照してください。

**スワップで、アプリケーションのダウンタイムは発生しますか。どのように対応する必要がありますか。**

直前のセクションで説明したように、デプロイのスワップは、Azure ロード バランサーの構成を変更するだけなので、通常は非常に高速で実行されます。 ただし、場合によっては&10; 数秒かかることがあり、その結果、一時的な接続エラーが発生します。 お客様への影響を制限するために、[クライアント再試行ロジック](../best-practices-retry-general.md)の実装を検討してください。

## <a name="how-to-link-a-resource-to-a-cloud-service"></a>方法: クラウド サービスに対するリソースのリンク
使用しているクラウド サービスと他のリソースとの依存関係を示すために、Azure SQL Database インスタンスまたはストレージ アカウントをクラウド サービスにリンクすることができます。 リソースのリンクとリンク解除は **[リンク済みリソース]** ページで実行できます。利用状況はクラウド サービスのダッシュボードで監視します。 リンクされているストレージ アカウントで監視が有効になっている場合は、クラウド サービスのダッシュボードで要求数合計を監視できます。

**[リンク]** を使用して、新規または既存の SQL Database インスタンスまたはストレージ アカウントをクラウド サービスにリンクします。 その後、**[スケール]** ページで、クラウド サービスのロールと共にデータベースの規模を変更できます。 (ストレージ アカウントは、使用量の変動に伴い自動的に規模が変更されます)。詳細については、[クラウド サービスおよびリンクされたリソースのスケールの設定方法](cloud-services-how-to-scale.md)に関するページを参照してください。

また、Azure クラシック ポータルの **[データベース]** ノードでデータベースの監視、管理、および規模の設定ができます。

この意味でリソースの "リンク" を行ってもアプリケーションはリソースに接続されません。 **[リンク]**を使用して新しいデータベースを作成した場合、アプリケーション コードに接続文字列を追加して、クラウド サービスをアップグレードする必要があります。 また、リンクされたストレージ アカウントのリソースをアプリケーションで使用している場合も、接続文字列を追加する必要があります。

以下の手順では、新しい SQL Database サーバーにデプロイされた新しい SQL Database インスタンスをクラウド サービスにリンクする方法を説明しています。

### <a name="to-link-a-sql-database-instance-to-a-cloud-service"></a>クラウド サービスに SQL Database インスタンスをリンクするには
1. [Azure クラシック ポータル](http://manage.windowsazure.com/)で、 **[Cloud Services]**をクリックします。 目的のクラウド サービスの名前をクリックして、ダッシュボードを開きます。
2. **[リンク済みリソース]**をクリックします。

    **[リンク済みリソース]** ページが開きます。

    ![LinkedResourcesPage](./media/cloud-services-how-to-manage/CloudServices_LinkedResourcesPage.png)

3. **[リソースをリンクします]** または **[リンク]** をクリックします。

    **リソースのリンク** ウィザードが起動します。

    ![リンク ページ&1;](./media/cloud-services-how-to-manage/CloudServices_LinkedResources_LinkPage1.png)

4. **[新しいリソースを作成する]** または **[既存のリソースをリンクする]** をクリックします。
5. リンクするリソースの種類を選択します。 [Azure クラシック ポータル](http://manage.windowsazure.com/)で、 **[SQL Database]**をクリックします。 (プレビューの Azure クラシック ポータルは、ストレージ アカウントをクラウド サービスにリンクする機能をサポートしていません)。
6. データベースの構成を完了するには、Azure クラシック ポータルの **[SQL Database]** 領域のヘルプに記載された指示に従ってください。

    リンク操作の進捗状況はメッセージ領域で知ることができます。

    リンク操作が完了すると、リンクされたリソースの状態をクラウド サービスのダッシュボードで監視できます。 リンクされた SQL Database の規模設定の詳細については、「 [クラウド サービスおよびリンクされたリソースの規模の設定方法](cloud-services-how-to-scale.md)」を参照してください。

### <a name="to-unlink-a-linked-resource"></a>リンク済みリソースのリンクを解除するには
1. [Azure クラシック ポータル](http://manage.windowsazure.com/)で、 **[Cloud Services]**をクリックします。 目的のクラウド サービスの名前をクリックして、ダッシュボードを開きます。
2. **[リンク済みリソース]**をクリックして、リソースを選択します。
3. **[リンクの解除]**をクリックします。 次に、確認ダイアログで **[はい]** をクリックします。

    SQL Database のリンクを解除しても、データベースまたはデータベースに対するアプリケーションの接続は影響を受けません。 引き続き、Azure クラシック ポータルの **[SQL Database]** 領域でデータベースを管理できます。

## <a name="how-to-delete-deployments-and-a-cloud-service"></a>方法: デプロイメントとクラウド サービスの削除
クラウド サービスを削除する前に、既存のデプロイメントをそれぞれ削除する必要があります。

コンピューティング費用を節約するために、運用環境のデプロイメントが予想どおりに動作することが確認できたら、ステージング環境のデプロイメントを削除することができます。 クラウド サービスが実行中でない場合でも、ロール インスタンスのコンピューティング費用は請求されます。

以下の手順を使用して、デプロイメントまたはクラウド サービスを削除します。

1. [Azure クラシック ポータル](http://manage.windowsazure.com/)で、 **[Cloud Services]**をクリックします。
2. 目的のクラウド サービスを選択して、**[削除]** をクリックします。 (ダッシュボードを開かないでクラウド サービスを選択するには、クラウド サービスの名前以外の場所をクリックします)。

    ステージング環境または運用環境のデプロイメントがある場合、ウィンドウの下部に次のような選択肢のメニューが表示されます。 クラウド サービスを削除する前に、既存のデプロイメントをすべて削除する必要があります。

    ![削除メニュー](./media/cloud-services-how-to-manage/CloudServices_DeleteMenu.png)

3. デプロイを削除するには、**[Delete production deployment (運用環境のデプロイの削除)]** または **[Delete staging deployment (ステージング環境のデプロイの削除)]** をクリックします。 次に、確認ダイアログで **[はい]**をクリックします。
4. クラウド サービスの削除を予定している場合は、必要に応じて手順 3. を繰り返して、その他のデプロイもすべて削除します。
5. クラウド サービスを削除するには、 **[クラウド サービスの削除]**をクリックします。 次に、確認ダイアログで **[はい]**をクリックします。

> [!NOTE]
> Azure でクラウド サービスに詳細監視が構成されている場合、クラウド サービスを削除しても、ストレージ アカウントから監視データは削除されません。 データは手作業で削除する必要があります。 メトリック テーブルのある場所については、「 [クラウド サービスの監視方法](cloud-services-how-to-monitor.md)」の「方法: Azure クラシック ポータル外で詳細監視データにアクセス」を参照してください。
>
>

## <a name="next-steps"></a>次のステップ
* [クラウド サービスの一般的な構成](cloud-services-how-to-configure.md)
* 方法: [クラウド サービスをデプロイする](cloud-services-how-to-create-deploy.md)
* [カスタム ドメイン名を構成する](cloud-services-custom-domain-name.md)
* [SSL 証明書を構成する](cloud-services-configure-ssl-certificate.md)



<!--HONumber=Jan17_HO1-->


