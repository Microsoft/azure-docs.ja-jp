---
title: StorSimple 8000 シリーズ デバイスの監視
description: StorSimple デバイス マネージャー サービスを使用して、使用状況、I/O パフォーマンス、および容量使用率を監視する方法について説明します。
author: alkohli
ms.service: storsimple
ms.topic: how-to
ms.date: 10/17/2017
ms.author: alkohli
ms.openlocfilehash: 1c2df017a9af47bfa330c8e0fa7561bf5b2d5bae
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/02/2020
ms.locfileid: "85514693"
---
# <a name="use-the-storsimple-device-manager-service-to-monitor-your-storsimple-device"></a>StorSimple デバイス マネージャー サービスを使用して StorSimple デバイスを監視する

## <a name="overview"></a>概要
StorSimple デバイス マネージャー サービスを使用して、StorSimple ソリューション内にある特定のデバイスを監視できます。 I/O パフォーマンス、容量使用率、ネットワーク スループット、およびデバイスのパフォーマンス メトリックに基づいてカスタム グラフを作成し、それらのグラフをダッシュボードにピン留めすることができます。 詳細については、[ポータル ダッシュボードをカスタマイズする](../azure-portal/azure-portal-dashboards.md)ことに関するページを参照してください。

特定のデバイスの監視情報を表示するには、Azure Portal で StorSimple デバイス マネージャー サービスを選択します。 デバイスの一覧から目的のデバイスを選択したら、 **[監視]** に移動します。 選択したデバイスの**容量**、**使用状況**、および**パフォーマンス**のグラフを表示できます。

## <a name="capacity"></a>容量
**[容量]** では、プロビジョニング済みの容量と、デバイスに残っている領域が追跡されます。 残っている容量は、次に、ローカル固定または階層化として表示されます。

プロビジョニング済みの残っている容量はさらに、階層化ボリュームとローカル固定ボリュームに分類されます。 ボリュームごとに、プロビジョニング済みの容量と、デバイスに残っている容量が表示されます。

![I/O の容量](./media/storsimple-8000-monitor-device/device-capacity.png)



## <a name="usage"></a>使用法
**[使用状況]** では、ボリューム、ボリューム コンテナー、デバイスで使用されるデータ ストレージ領域の容量に関連するメトリックが追跡されます。 プライマリ ストレージ、クラウド ストレージ、またはデバイス ストレージの容量の使用率に基づいて、レポートを作成できます。 容量使用率は、特定のボリューム、特定のボリューム コンテナー、またはすべてのボリューム コンテナーについて測定できます。
既定では、過去 24 時間の使用状況が報告されます。 以下から選択してグラフを編集し、使用状況が報告される期間を変更できます。
* 過去 24 時間
* 過去 7 日間
* 過去 30 日間
* 過去 90 日間
* 過去 1 年間

2 つのキー メトリックである増加量と範囲は、使用状況グラフで報告されます。 範囲は、選択した期間 (過去 7 日間など) にわたって報告された使用状況の最大値および最小値を示します。

増加量は、選択した期間の最初の日から最後の日までの使用量の増加を示します。 

増加量と範囲は、次の数式で表すこともできます。

```
Range = {Usage(minimum), Usage(maximum)}

Growth = Usage(Last day) - Usage(first day)

Growth (%) = [{Usage(last day) - Usage(first day)} X 100]/Usage(first day)
```

使用済みのプライマリ、クラウド、およびローカルのストレージは次のように説明できます。

### <a name="primary-storage-usage"></a>プライマリ ストレージの使用状況
これらのグラフは、StorSimple ボリュームに書き込まれたデータが重複除去されて圧縮される前のデータ量を示しています。 1 つのボリューム コンテナー内または 1 つのボリュームのすべてのボリュームで使用済みプライマリ ストレージを確認できます。 使用済みプライマリ ストレージはさらに、使用済みプライマリ階層化ストレージと、使用済みプライマリ ローカル固定ストレージに分類されます。

以下のグラフは、クラウド スナップショットが作成された前後に StorSimple デバイスのために使用されたプライマリ ストレージを示しています。 これは単なるボリューム データであるため、クラウド スナップショットによってプライマリ ストレージは変更されません。 グラフに示すとおり、クラウド スナップショットを作成した結果として使用された、プライマリ階層化ストレージやローカル固定ストレージに違いは見られません。 クラウド スナップショットは、そのデバイスで午後 11 時 50 分ごろに開始されました。

![クラウド スナップショット後のプライマリの容量使用率](./media/storsimple-8000-monitor-device/device-primary-storage-after-cloudsnapshot.png)

StorSimple デバイスに接続されているホストで I/O を実行すると、どの (階層化またはローカル固定の) ボリュームにデータを書き込んだかに応じて、使用済みのプライマリ階層化ストレージまたはプライマリ ローカル固定ストレージが増加することがわかります。 ここでは、StorSimple デバイスのプライマリ ストレージの使用状況グラフを示しています。 このデバイスに対して、StorSimple ホストは、午後 2 時 30 分ごろ、デバイス上の階層化ボリュームへの書き込みサービスを開始しました。 ホストで実行中の I/O に対応する書き込みバイト数/秒のピークを確認することができます。

![階層化ボリュームで I/O を実行しているときのパフォーマンス](./media/storsimple-8000-monitor-device/device-io-from-initiator.png)

使用済みのプライマリ階層化ストレージを見ると、その量は増加しています。それに対してプライマリ ローカル固定ストレージの使用状況は、そのデバイス上でローカル固定ストレージに対して行われた書き込みが存在しなかったため、変化していません。

![階層化ボリュームで I/O を実行しているときのプライマリの容量使用率](./media/storsimple-8000-monitor-device/device-primary-storage-io-from-initiator.png)

Update 3 以降を使用している場合は、次に示すように、個々のボリューム、全ボリューム、全階層化ボリューム、全ローカル固定ボリュームの単位でプライマリ ストレージ容量の使用率を表示できます。 全ローカル固定ボリュームで表示すると、使用されているローカル階層の量を簡単に把握できます。

![全階層化ボリュームのプライマリの容量使用率](./media/storsimple-8000-monitor-device/monitor-usage3.png)

![全ローカル固定ボリュームのプライマリの容量使用率](./media/storsimple-8000-monitor-device/monitor-usage4.png)

さらに、リスト内の各ボリュームをクリックすると、対応する使用状況を表示できます。

![全ローカル固定ボリュームのプライマリの容量使用率](./media/storsimple-8000-monitor-device/device-primary-storage-usage-by-volume.png)

### <a name="cloud-storage-usage"></a>クラウド ストレージの使用状況
これらのグラフは、クラウド ストレージの使用量を示します。 このデータは、重複除去されて圧縮されています。 この容量に含まれるクラウド スナップショットには、過去の目的や必須の保有期間のために保持されており、どのプライマリ ボリュームにも反映されていないデータが含まれている可能性があります。 プライマリ ストレージとクラウド ストレージの消費量の数値を比較して、データの削減率を把握できます。ただし、この数値は正確なものではありません。

以下のグラフは、クラウド スナップショットが作成されたときの StorSimple デバイスのクラウド ストレージの使用量を示しています。

* そのデバイスでは、午前 11 時 50 分ごろにクラウド スナップショットが開始されました。そのクラウド スナップショットの前には、使用済みのクラウド ストレージがないことがわかります。 
* クラウド スナップショットが完了したときに、クラウド ストレージの使用量は 0.89 GB まで跳ね上がりました。 
* クラウド スナップショットの処理は進行中ですが、デバイスからクラウドへの I/O にも対応するピークがあります。

    ![クラウド スナップショット前のクラウド ストレージの使用量](./media/storsimple-8000-monitor-device/device-cloud-storage-before-cloudsnapshot.png)

    ![クラウド スナップショット後のクラウド ストレージの使用量](./media/storsimple-8000-monitor-device/device-cloud-storage-after-cloudsnapshot.png)

    ![クラウド スナップショット処理中のデバイスからクラウドへの I/O](./media/storsimple-8000-monitor-device/device-io-to-cloud-during-cloudsnapshot.png)


### <a name="local-storage-usage"></a>ローカル ストレージの使用状況
これらのグラフは、デバイスの合計使用量を示しています。これには SSD リニア層が含まれているため、プライマリ ストレージの使用量よりも大きくなります。 この層には、デバイスの他の層にあるデータの容量も含まれています。 SSD リニア層の容量は、新しいデータが入ってくると古いデータが HDD 層に、その後クラウドに移動されて循環します (このときデータは重複除去されて圧縮されます)。

時間の経過とともに、使用済みのプライマリ ストレージと使用済みのローカル ストレージが一緒に増加してゆく場合がほとんどです。その後、データがクラウドへと階層化され始めます。 その時点で、使用済みのローカル ストレージはおそらく一定になり始めますが、さらに多くのデータが書き込まれると、使用済みのプライマリ ストレージが増加します。

以下のグラフは、クラウド スナップショットが作成されたときに StorSimple デバイスのために使用されたプライマリ ストレージを示しています。 クラウド スナップショットは午前 11 時 50 分に開始され、その時点でローカル ストレージは減少し始めました。 使用済みのローカル ストレージは、1.445 GB から 1.09 GB に減少しました。 ほとんどの場合、これは SSD リニア層の圧縮されていないデータが重複除去されて、圧縮され、HDD 層に移動したことを示しています。 デバイスの SSD 層と HDD 層の両方に既に大量のデータがあると、この減少が発生しない場合があることにご注意ください。 この例では、デバイスに少量のデータがあります。

![クラウド スナップショット後のローカル ストレージの使用量](./media/storsimple-8000-monitor-device/device-local-storage-after-cloudsnapshot.png)

## <a name="performance"></a>パフォーマンス
**[パフォーマンス]** では、ホスト サーバーの iSCSI イニシエーター インターフェイスとデバイスとの間またはデバイスとクラウドとの間の読み取り操作と書き込み操作の数に関連するメトリックが追跡されます。 このパフォーマンスは、特定のボリューム、特定のボリューム コンテナー、またはすべてのボリューム コンテナーについて測定できます。 [パフォーマンス] には、CPU 使用率と、デバイス上のさまざまなネットワーク インターフェイスのネットワーク スループットの情報も含まれます。

### <a name="io-performance-for-initiator-to-device"></a>イニシエーターからデバイスへの I/O パフォーマンス
次の図では、運用環境のデバイスの全ボリュームに対する、デバイスへのイニシエーター用 I/O を示しています。 プロットされているメトリックは、1 秒あたりの書き込みおよび読み込みのバイト数です。 読み取り、書き込み、および未処理の I/O をグラフにしたり、読み取りや書き込みの待機時間をグラフにしたりすることもできます。

![イニシエーターからデバイスへの I/O パフォーマンス](./media/storsimple-8000-monitor-device/device-io-from-initiator.png)

### <a name="io-performance-for-device-to-cloud"></a>デバイスからクラウドへの I/O パフォーマンス
同じデバイスの場合、すべてのボリューム コンテナーに対して、デバイスからクラウドのデータについて I/O 操作がプロットされます。 このデバイスでは、データはリニア層のみなので、クラウドには何も書き込まれません。 デバイスからクラウドへの読み取りと書き込み操作は実行されません。 そのため、グラフのピークは 5 分間隔で発生し、デバイスとサービス間でハートビートが確認される頻度に対応します。

同じデバイスで、ボリューム データのクラウド スナップショットの作成が、午前 11 時 50 分から開始されています。 これにより、デバイスからクラウドへのデータ フローが発生します。 書き込みはこの期間に、クラウドに対して行われます。 I/O グラフには、スナップショットが作成されたときに対応する、1 秒あたりの書き込みバイト数のピークが示されています。

![クラウド スナップショット処理中のデバイスからクラウドへの I/O](./media/storsimple-8000-monitor-device/device-io-to-cloud-during-cloudsnapshot.png)

### <a name="network-throughput-for-device-network-interfaces"></a>デバイス ネットワーク インターフェイスでのネットワーク スループット
**ネットワーク スループット** は、ホスト サーバーの iSCSI イニシエーター ネットワーク インターフェイスからデバイス、デバイスとクラウドとの間で転送されたデータ量に関連するメトリックを追跡します。 デバイス上の iSCSI ネットワーク インターフェイスごとに、このメトリックを監視できます。

以下のグラフは、デバイス上の Data 0 および Data 1 の 1 GbE ネットワークのネットワーク スループットを示しています。これらはどちらも、クラウド対応 (既定) および iSCSI 対応です。 このデバイスでは、6 月 14 日午後 9 時ごろにデータがクラウドに階層化されました (その時点でクラウド スナップショットは作成されず、それは、階層化が、クラウドにデータを移動するメカニズムであることを示しています)。この結果、クラウドに対して実行される I/O が発生することになりました。 ネットワークのスループットのグラフでは、同じ時間に、対応するピークがあり、ネットワーク トラフィックのほとんどはクラウドに送信されています。

![Data 0 のネットワーク スループット](./media/storsimple-8000-monitor-device/device-network-throughput-data0.png)

iSCSI にのみ対応する別の 1 GbE ネットワーク インターフェイスである Data 1 インターフェイスのスループット グラフを見ると、この期間中、ネットワーク トラフィックはほとんど存在しません。

![Data 1 のネットワーク スループット](./media/storsimple-8000-monitor-device/device-network-throughput-data1.png)


## <a name="cpu-utilization-for-device"></a>デバイスの CPU 使用率
**[CPU 使用率]** では、デバイスで利用される CPU に関連するメトリックが追跡されます。 次のグラフは、運用環境のデバイスに対する CPU 使用率の統計値を示しています。

![デバイスの CPU 使用率](./media/storsimple-8000-monitor-device/device-cpu-utilization.png)



## <a name="next-steps"></a>次のステップ
* [StorSimple デバイス マネージャー サービスのデバイス ダッシュボードを使用する](storsimple-device-dashboard.md)方法について説明します。
* [StorSimple デバイス マネージャー サービスを使用して StorSimple デバイスを管理する](storsimple-manager-service-administration.md)方法について説明します。

