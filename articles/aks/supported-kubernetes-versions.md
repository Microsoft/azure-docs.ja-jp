---
title: Azure Kubernetes Service でサポートされている Kubernetes のバージョン
description: Azure Kubernetes Service (AKS) の Kubernetes バージョン サポート ポリシーとクラスターのライフサイクルを理解する
services: container-service
ms.topic: article
ms.date: 07/08/2020
author: palma21
ms.author: jpalma
ms.openlocfilehash: 273c41a523de8b2776982e5229c5a8b618b82c19
ms.sourcegitcommit: 5f7b75e32222fe20ac68a053d141a0adbd16b347
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/31/2020
ms.locfileid: "87475194"
---
# <a name="supported-kubernetes-versions-in-azure-kubernetes-service-aks"></a>Azure Kubernetes Service (AKS) でサポートされている Kubernetes のバージョン

Kubernetes コミュニティでは、おおよそ 3 か月おきにマイナー バージョンをリリースしています。 これらのリリースには、新しい機能と機能強化が含まれます。 修正プログラムのリリースは、より頻繁で (場合によっては毎週)、マイナー バージョンでの重要なバグ修正のみを目的としています。 これらの修正プログラムのリリースには、セキュリティの脆弱性または重大なバグの修正が含まれています。

## <a name="kubernetes-versions"></a>Kubernetes のバージョン

Kubernetes では、標準の[セマンティック バージョニング](https://semver.org/)のバージョン管理スキームが使用されています。つまり、各バージョンの Kubernetes は、以下の番号付けスキームに従います。

```
[major].[minor].[patch]

Example:
  1.17.7
  1.17.8
```

バージョンのそれぞれの数字は、前のバージョンとの一般的な互換性を示します。

* メジャー バージョンは、互換性のない API の変更や下位互換性が破棄されている可能性があるときに変更されます。
* マイナー バージョンは、その他のマイナー リリースに対する下位互換性のある機能の変更が行われたときに変更されます。
* 修正プログラムのバージョンは、下位互換性のあるバグ修正が行われたときに変更されます。

ユーザーは、実行中のマイナー バージョンの最新の修正プログラムのリリースを実行するよう努める必要があります。たとえば、運用環境クラスターが **`1.17.7`** 上にあり、 **`1.17.8`** が *1.17* シリーズ用に使用できる最新の使用可能な修正プログラムのバージョンである場合は、クラスターに完全にパッチが適用されサポートされていることを確認できるようになったらすぐに **`1.17.8`** にアップグレードする必要があります。

## <a name="kubernetes-version-support-policy"></a>Kubernetes バージョン サポート ポリシー

AKS では、すべての SLO または SLA 測定で有効なバージョン、およびすべてのリージョンで利用可能になった際に、一般提供バージョンとして定義されます。 AKS では、Kubernetes の 3 つの GA マイナー バージョンがサポートされています。

* AKS でリリースされた最新の GA マイナー バージョン (N と呼ばれます)。 
* 2 つの以前のマイナー バージョン。 
* サポートされている各マイナー バージョンでは、最大 2 つの安定性の高い修正プログラムもサポートされています。
* さらに、AKS では、明示的にラベル付けされ、[プレビューの利用規約][preview-terms]の対象となるプレビュー バージョンがサポートされる場合もあります。

> [!NOTE]
> AKS では、段階的なリージョン デプロイを含む安全なデプロイ プラクティスを使用します。 つまり、新しいリリースまたは新しいバージョンをすべてのリージョンで利用できるようになるまでに、最大で 10 営業日かかることがあるということです。

AKS でサポートされている Kubernetes バージョンの対象期間は、"N-2" と呼ばれます:(N (最新リリース) - 2 (マイナー バージョン))。

たとえば、AKS で *1.17.a* が本日導入された場合は、次のバージョンのサポートが提供されます。

新しいマイナー バージョン    |    サポートされているバージョンの一覧
-----------------    |    ----------------------
1.17.a               |    1.17.a、1.17.b、1.16.c、1.16.d、1.15.e、1.15.f

ここで、".<英字>" はパッチ バージョンを表します。

新しいマイナー バージョンが導入されると、サポートされている最も古いマイナー バージョンと修正プログラムのリリースは、非推奨となり削除されます。 たとえば、現在次のバージョンがサポートされているとします。

```
1.17.a
1.17.b
1.16.c
1.16.d
1.15.e
1.15.f
```

そして、AKS で 1.18.\* がリリースされます。これは、すべての1.15.\* のバージョンは削除され、30 日以内にサポートされなくなることを意味します。

> [!NOTE]
> なお、お客様がサポートされていない Kubernetes バージョンを実行している場合は、クラスターのサポートを要求したときにアップグレードするよう求められます。 サポートされていない Kubernetes リリースを実行しているクラスターは、[AKS サポート ポリシー](./support-policies.md)の対象ではありません。

上記に加えて、AKS では、特定のマイナー バージョンのリリースの**修正プログラム**が最大 2 つサポートされています。 次のようなサポートされているバージョンがあるとします。

```
Current Supported Version List
------------------------------
1.17.8, 1.17.7, 1.16.10, 1.16.9
```

AKS で `1.17.9` と `1.16.11` がリリースされた場合、最も古い修正プログラムのバージョンは非推奨となって削除され、サポートされているバージョンの一覧は次のようになります。

```
New Supported Version List
----------------------
1.17.*9*, 1.17.*8*, 1.16.*11*, 1.16.*10*
```

### <a name="supported-kubectl-versions"></a>サポートされている `kubectl` バージョン

*kube-apiserver* バージョンに対して 1 つ新しいまたは古い `kubectl` のマイナー バージョンを使用します。これは、[kubectl の Kubernetes サポート ポリシー](https://kubernetes.io/docs/setup/release/version-skew-policy/#kubectl)に一致しています。

たとえば、*kube-apiserver* が *1.17* の場合は、その *kube-apiserver* と共に `kubectl` の *1.16* から *1.18* を使用できます。

`kubectl` のバージョンをインストールまたは更新するには、`az aks install-cli` を実行します。

## <a name="release-and-deprecation-process"></a>リリースと非推奨のプロセス

今後のバージョンのリリースと非推奨は、「[AKS Kubernetes リリース予定表](#aks-kubernetes-release-calendar)」で参照できます。

新しい**マイナー** バージョンの Kubernetes の場合
1. AKS では、新しいバージョンのリリース予定日と、その旧バージョンの非推奨予定日を含む事前通知を、削除日の 30 日前までに [AKS リリース ノート](https://aka.ms/aks/releasenotes)で公開します。
2. AKS によって、AKS とポータルのアクセス権を持つすべてのユーザーが使用できる[サービスの正常性通知](../service-health/service-health-overview.md)が発行され、サブスクリプション管理者宛にバージョンの削除予定日が記載されたメールが送信されます。
3. 今後もサポートを受けるには、ユーザーは、バージョンの削除から **30 日**以内にサポートされるマイナー バージョンのリリースにアップグレードする必要があります。

新しい**修正プログラム**のバージョンの Kubernetes の場合
  * 修正プログラムのバージョンは緊急を要するため、これらは利用可能になり次第サービスに導入されることがあります。
  * 一般的に、AKS では、新しい修正プログラムのバージョンのリリースについて大々的な通知は行っていません。 しかし、AKS では、利用可能な CVE を AKS でタイムリーにサポートできるよう、この修正プログラムを常に監視および検証しています。 重要な修正プログラムが見つかった場合、またはユーザー アクションが必要な場合、AKS では、使用可能な新しい修正プログラムにアップグレードするようユーザーに通知します。
  * サポートを継続して受けるには、AKS から修正プログラムのリリースが削除されてから **30 日**以内に、サポートされている修正プログラムにアップグレードする必要があります。

### <a name="supported-versions-policy-exceptions"></a>サポートされているバージョン ポリシーの例外

AKS は、バグまたはセキュリティの問題に影響を与える 1 つ以上の重要な運用があることが識別された新しいバージョンまたは既存のバージョンを、予告なしに追加または削除する権利を留保します。

特定の修正プログラムのリリースは、バグまたはセキュリティの問題の重大度に応じて、スキップされるか、ロールアウトが高速になる場合があります。

## <a name="azure-portal-and-cli-versions"></a>Azure portal と CLI のバージョン

ポータルまたは Azure CLI を使用して AKS クラスターをデプロイする場合、クラスターは既定で N-1 マイナー バージョンおよび最新修正プログラムに設定されます。 たとえば、AKS でサポートされているのが *1.17.a*、*1.17.b*、*1.16.c*、*1.16.d*、*1.15.e*、および *1.15.f* であれば、選択される既定のバージョンは *1.16.c* となります。

ご使用のサブスクリプションとリージョンで現在使用可能なバージョンを確認するには、[az aks get-versions][az-aks-get-versions] コマンドを使用します。 次の例では、*EastUS* リージョンで使用可能な Kubernetes のバージョンが一覧表示されます。

```azurecli-interactive
az aks get-versions --location eastus --output table
```

## <a name="aks-kubernetes-release-calendar"></a>AKS Kubernetes リリース予定表

過去のリリース履歴については、[こちら](https://en.wikipedia.org/wiki/Kubernetes#History)を参照してください。

|  K8s バージョン | アップストリームのリリース  | AKS プレビュー  | AKS GA  | 有効期限切れ |
|--------------|-------------------|--------------|---------|-------------|
| 1.17  | 2019 年 12 月 9 日  | 2019 年 1 月   | 2020 年 7 月  | 1.20 GA | 
| 1.18  | 2020 年 3 月 23 日  | 2020 年 5 月   | 2020 年 8 月  | 1.21 GA | 
| 1.19  | 2020 年 8 月 4 日  | 2020 年 8 月   | 2020 年 11 月  | 1.22 GA | 
| 1.20  | *2020 年 11 月    | *2020 年 12 月   | *2021 年 1 月  | 1.23 GA | 

\* アップストリームのリリース日の確定が保留中です。

## <a name="faq"></a>よく寄せられる質問

**ユーザーがサポートされていないマイナー バージョンの Kubernetes クラスターをアップグレードするとどうなりますか。**

*n-3* バージョン以前を使用している場合は、サポート外であり、アップグレードするよう求められます。 バージョン n-3 から n-2 へのアップグレードに成功すると、サポート ポリシーの対象になります。 次に例を示します。

- サポートされている最も古い AKS のバージョンが *1.15.a* で、使用しているバージョンが *1.14.b* 以前の場合は、サポート対象外です。
- *1.14.b* から *1.15.a* 以降へのアップグレードが成功すると、サポート ポリシー対象に戻ります。

ダウングレードはサポートされていません。

**"サポート外" とは**

"サポート外" とは、実行しているバージョンがサポートされているバージョンの一覧に含まれていないことを意味し、サポートを要求すると、クラスターをサポートされているバージョンにアップグレードするよう求められます。ただし、バージョンの非推奨後、30 日間の猶予期間中である場合を除きます。 さらに、AKS では、サポートされているバージョンの一覧に含まれていないクラスターのランタイムなどは保証されません。

**ユーザーがサポートされていないマイナー バージョンの Kubernetes クラスターをスケールするとどうなりますか。**

AKS でサポートされていないマイナー バージョンの場合、スケールインまたはスケールアウトは引き続き機能しますが、サービスの品質は保証されないため、アップグレードしてクラスターをサポート対象に戻すことを強くお勧めします。

**ユーザーが Kubernetes バージョンをそのまま永久に使用し続けることはできますか。**

3 つ以上のマイナー バージョンにわたってクラスターがサポート外であり、セキュリティ リスクが生じることがわかっている場合、Azure はクラスターを事前にアップグレードするようにお客様に連絡します。 お客様が措置を講じない場合、Azure は、お客様に代わってクラスターを自動的にアップグレードする権利を保持します。

**ノード プールがサポートされている AKS バージョンのいずれかにない場合、コントロール プレーンはどのバージョンをサポートしますか。**

コントロール プレーンは、すべてのノード プールのバージョンの期間内になければなりません。 コントロール プレーンまたはノード プールのアップグレードの詳細については、[ノード プールのアップグレード](use-multiple-node-pools.md#upgrade-a-cluster-control-plane-with-multiple-node-pools)に関するドキュメントを参照してください。

**クラスターのアップグレード中に複数の AKS バージョンをスキップできますか。**

サポートされている AKS クラスターをアップグレードする場合は、Kubernetes マイナー バージョンをスキップすることはできません。 たとえば、*1.12.x* -> *1.13.x* または *1.13.x* -> *1.14.x* の間のアップグレードは許可されていますが、*1.12.x* -> *1.14.x* は許可されていません。

*1.12.x* -> *1.14.x* にアップグレードするには、まず *1.12.x* -> *1.13.x* にアップグレードしてから、*1.13.x* -> *1.14.x* にアップグレードします。

複数のバージョンのスキップは、サポートされていないバージョンからサポートされているバージョンにアップグレードする場合にのみ可能です。 たとえば、サポートされていない *1.10.x* からサポートされている *1.15.x* へのアップグレードは実行することができます。

## <a name="next-steps"></a>次のステップ

クラスターをアップグレードする方法の詳細については、「[Azure Kubernetes Service (AKS) クラスターのアップグレード][aks-upgrade]」をご覧ください。

<!-- LINKS - External -->
[aks-engine]: https://github.com/Azure/aks-engine
[azure-update-channel]: https://azure.microsoft.com/updates/?product=kubernetes-service

<!-- LINKS - Internal -->
[aks-upgrade]: upgrade-cluster.md
[az-aks-get-versions]: /cli/azure/aks#az-aks-get-versions
[preview-terms]: https://azure.microsoft.com/support/legal/preview-supplemental-terms/
