---
title: Azure Kubernetes Service (AKS) サポート ポリシー
description: Azure Kubernetes Service (AKS) のサポート ポリシー、共同責任、プレビュー/アルファ/ベータの機能について説明します。
services: container-service
author: jnoller
ms.service: container-service
ms.topic: article
ms.date: 04/01/2019
ms.author: jenoller
ms.openlocfilehash: f173fc7c794729eae8c60cceefa88d153800a816
ms.sourcegitcommit: 1a19a5845ae5d9f5752b4c905a43bf959a60eb9d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/11/2019
ms.locfileid: "59501840"
---
# <a name="azure-kubernetes-service-aks-support-policies"></a>Azure Kubernetes Service (AKS) サポート ポリシー

この記事では、AKS のテクニカル サポート ポリシー、制限事項、およびワーカー ノードの管理、マネージド コントロール プレーン コンポーネント、サード パーティ製オープン ソース コンポーネント、セキュリティ/パッチの管理などの詳細について詳しく説明します。

## <a name="service-updates--releases"></a>サービスの更新とリリース

* リリースについては、[AKS のリリース ノート][1]をご覧ください
* パブリック プレビュー段階の機能については、「[AKS Preview Features and Related Projects (AKS のプレビュー機能と関連プロジェクト)][2]」をご覧ください

## <a name="what-is-managed"></a>"マネージド" の意味

ユーザーが利用できるように下位レベルの制御とカスタマイズ オプションが公開されているコンピューティングやネットワーキングなどの基本的な IaaS クラウド コンポーネントとは異なり、AKS サービスでは、Kubernetes に必要な構成と機能の共通セットを表す Kubernetes のターンキー デプロイが提供されます。 このサービスを使用するお客様に提供されるカスタマイズ、デプロイ、その他のオプションの数は限られています。 これはまた、お客様が Kubernetes クラスターについて直接配慮または管理する必要がないことを意味します。

AKS では、完全に管理された**コントロール プレーン**がお客様に提供されます。コントロール プレーンには、Kubernetes クラスターを操作してエンド ユーザーに提供するために必要なすべてのコンポーネントとサービスが含まれています。 Kubernetes のすべてのコンポーネントは Microsoft によって維持管理および運営されます。

マネージド **コントロール プレーン**では、次のコンポーネントが Microsoft によって管理および監視されます。

* Kubelet/Kubernetes API サーバー
* etcd またはそれと互換性のあるキー/値ストア – サービス、スケーラビリティ、ランタイムの品質を含みます
* DNS サービス (kube-dns/CoreDNS など)
* Kubernetes プロキシ/ネットワーク

AKS は、100% マネージドの**クラスター** ソリューションではありません。 一部のコンポーネント (ワーカー ノードなど) には一定の**共同責任**が適用される場合があり、AKS クラスターを維持するためのアクションにはユーザーによる操作が必要です。 たとえば、ワーカー ノードの OS のセキュリティ更新プログラムの適用などです。

 **マネージド**とは、Microsoft と AKS チームがこれらのサービスをデプロイして運用し、その可用性と機能に対して責任を負うことを意味します。 **お客様は、これらのコンポーネントを変更できません**。 カスタマイズは、一貫したスケーラブルなユーザー エクスペリエンスを保証することを目的としたものに限られます。 完全にカスタマイズ可能なソリューションについては、「[AKS-Engine (AKS エンジン)](https://github.com/Azure/aks-engine)」をご覧ください。

> [!NOTE]
> Azure Kubernetes Service のワーカー ノードは Azure Portal では通常の Azure IaaS リソースとして表示されますが、これらの仮想マシンはカスタム Azure リソース グループにデプロイされているということを、理解しておくことが重要です (前に MC\\* が付いています)。 ユーザーは、それらを変更したり、通常の仮想マシンと同じように SSH で接続したりできる場合があり (ただし、基本 OS イメージを変更することはできず、更新または再起動すると変更が失われる可能性があります)、他の Azure リソースをそれらにアタッチしたり、それ以外の変更を行ったりできます。 **ただし、このような帯域外の管理やカスタマイズを行うと、AKS クラスター自体がサポート不可能になる場合あることを意味します。 Microsoft サポートから指示されない限り、ワーカー ノードを変更しないでください。**

## <a name="what-is-shared-responsibility"></a>共同責任とは

クラスターの作成時に、AKS ではお客様によって定義された多数の Kubernetes ワーカー ノードが作成されます。 説明したように、これらのノードでお客様のワークロードが実行されます。 お客様はこれらのワーカー ノードを所有し、表示または変更できます。

これらのノードではプライベート コードが実行され、機密データが格納されるため、Microsoft サポートはお客様のすべてのクラスター ノードへの**アクセスを制限**されています。 Microsoft サポートは、お客様による明確な許可があった場合、およびサポート チームによる指示に従ってデバッグ コマンドの実行を補助する場合を除き、これらのノードにログインしたり、ノードに対してコマンドを実行したり、ノードのログを表示したりすることはできません。

これらのワーカー ノードの機密性のため、Microsoft はこれらのノードの "水面下での" 管理を制限するよう十分な注意を払っています。 Kubernetes マスター ノード、etcd、および (Microsoft によって管理されている) 他のコンポーネントで障害が発生した場合でも、多くの場合、お客様のワークロードの実行は継続されます。 ワーカー ノードがよく注意せずに変更されていると、データやワークロードが失われて、クラスターがサポート不可能な状態になる可能性があります。

## <a name="azure-kubernetes-service-support-coverage"></a>Azure Kubernetes Service のサポートの対象範囲

**Microsoft は、以下に関するテクニカル サポートを提供します。**

* Kubernetes Service によって提供およびサポートされるすべての Kubernetes コンポーネントへの接続 (API サーバーなど)
* Kubernetes コントロール プレーン サービスの管理、アップタイム、QoS、操作 (Kubernetes マスター ノード、API サーバー、etcd、kube-dns など)。
* etcd のサポートには、障害計画とクラスターの状態復元のために 30 分ごとに行われる、etcd のすべてのデータの自動的で透過的なバックアップが含まれます。 これらのバックアップは、お客様/ユーザーが直接使用することはできず、データの信頼性と一貫性を確保するために使用されます
* ロード バランサー、永続ボリューム、ネットワーク (Kubernetes と Azure CNI) などの他の Azure サービスへの統合のような、Azure クラウド プロバイダー ドライバー内の Kubernetes 用の統合ポイント
* Kubernetes API サーバー、etcd、kube-dns などのコントロール プレーン コンポーネントのカスタマイズに関する質問または問題。
* Azure CNI、Kubenet、他のネットワーク アクセスなどのネットワークのトピックに関する問題、および機能の問題 (DNS の解決、パケット損失、ルーティングなど)。
  * サポートされるネットワークのシナリオには、クラスターおよび関連するコンポーネント内の Kubenet (基本) および高度なネットワーク (Azure CNI)、他の Azure サービスやアプリケーションへの接続が含まれます。 さらに、イングレス コント ローラーとイングレス/ロード バランサーの構成、ネットワークのパフォーマンス、待機時間は、Microsoft によってサポートされます。

**以下に関するテクニカル サポートは、Microsoft からは提供されません。**

* アドバイザリ/Kubernetes を使用する "方法" に関する質問 (カスタム イングレス コントローラーの作成方法など)、アプリケーションのワークロードに関する質問、サード パーティ/OSS のパッケージやツールは、対象外です。
  * AKS クラスターの機能、カスタマイズ、チューニングに関するアドバイザリ チケット (Kubernetes の操作の問題/方法など) は、対象範囲に含まれます。
* Kubernetes コントロール プレーンの一部として提供されない、または AKS クラスターと共にデプロイされない、サード パーティのオープン ソース プロジェクト (Istio、Helm、Envoy など)。
  * Helm や Kured などのサード パーティのオープン ソース プロジェクトの場合は、Microsoft のドキュメントで提供される例とアプリケーションについて、およびサード パーティ製オープン ソース ツールと Kubernetes Azure クラウド プロバイダーが統合される場所または他の AKS に固有のバグについて、ベスト エフォートのサポートが提供されます。
* サード パーティのクローズド ソース ソフトウェア。これには、セキュリティ スキャン ツール、ネットワーク デバイス、またはソフトウェアが含まれる場合があります。
* "マルチ クラウド" またはマルチ ベンダーの構築に関する問題はサポートされません。たとえば、フェデレーション マルチ パブリック クラウド ベンダーのソリューションの実行はサポートされません。
* 公式の [AKS ドキュメント][3]に記載されているもの以外の、特定のネットワークのカスタマイズ。
  > [!NOTE]
  > ネットワーク セキュリティ グループに関する問題とバグはサポートされます。 たとえば、NSG の更新の失敗や、NSG または Load Balancer の予期しない動作に関する質問には、サポートはお答えできます。

## <a name="azure-kubernetes-service-support-coverage-worker-nodes"></a>Azure Kubernetes Service のサポートの対象範囲 (ワーカー ノード)

### <a name="microsoft-responsibilities-for-azure-kubernetes-service-worker-nodes"></a>Azure Kubernetes Service のワーカー ノードに関する Microsoft の責任

「`shared responsibility`」セクションで説明したように、Kubernetes のワーカー ノードは次のような共同責任モデルに該当します。

* 基本オペレーティング システム イメージと必要な追加機能 (監視エージェントやネットワーク エージェントなど) を提供します
* ワーカー ノードに対するオペレーティング システムの修正プログラムの自動配布
* 次のような、ワーカー ノード上で実行されている Kubernetes コントロール プレーン コンポーネントに関する問題の自動修復
  * kube-proxy
  * Kubernetes マスター コンポーネントへの通信パスを提供するネットワーク トンネル
  * kubelet
  * Docker/Moby デーモン

> [!NOTE]
> コントロール プレーン コンポーネントがワーカー ノード上で動作不能になった場合、AKS チームは、問題を解決するためにワーカー ノード全体を再起動することが必要な場合があります。 これはユーザーに代わって行われることであり、お客様のエスカレーションが行われない限り実行されません (お客様のアクティブなワークロードとデータにアクセスするため)。 AKS の担当者は、可能な場合は常に、必要な再起動によってアプリケーションが影響受けないように作業します。

### <a name="customer-responsibilities-for-azure-kubernetes-service-worker-nodes"></a>Azure Kubernetes Service のワーカー ノードに関するお客様 の責任

**Microsoft は以下のことを行いません。**

- OS レベルの修正プログラムを有効にするためのワーカー ノードの自動再起動 **(現在は以下を参照)**

オペレーティング システムの修正プログラムはワーカー ノードに配信されますが、ワーカー ノードを再起動して変更を有効にするのは**お客様の責任**です。 この自動修正プログラム適用には、共有ライブラリ、SSHD などのデーモン、およびその他のシステム/OS レベルのコンポーネントが含まれます。

Kubernetes のアップグレードでは、Azure コントロール パネルまたは Azure CLI を使って**アップグレードを実行するのはお客様の責任**です。 これは、Kubernetes に対するセキュリティまたは機能の強化を含む更新プログラムに適用されます。

> [!NOTE]
> AKS は`managed service`なので、サービスの最終的な目標には、サービスをさらに完全な手のかからないマネージド サービスにするための、修正プログラム、更新プログラム、ログ収集、その他に関する責任の除去が含まれます。 これらの項目 (ノードの再起動、自動修正プログラム適用) は、エンドツーエンドの管理を行う機能が強化されたら、今後のリリースでなくなる可能性があります。

### <a name="security-issues-and-patching"></a>セキュリティの問題と修正プログラムの適用

場合によっては (CVE など)、AKS サービスの 1 つ以上のコンポーネントでセキュリティ上の欠陥が見つかる可能性があります。 このようなシナリオでは、AKS は、影響を受けるすべてのクラスターに修正プログラムを適用して問題を軽減するか (可能な場合)、またはアップグレードのガイダンスをユーザーに提供します。

そのようなセキュリティ ホールの影響を受けるワーカー ノードについて、ダウンタイムが発生しない問題の修正プログラムがある場合は、AKS チームはその修正プログラムを適用して、変更をユーザーに通知します。

セキュリティ修正プログラムでワーカー ノードの再起動が必要な場合は、Microsoft はお客様にそれが必要であることを通知しますが、再起動または更新を実行してクラスターの修正プログラムを取得するのはお客様の責任です。 ユーザーが AKS のガイダンスに従って修正プログラムを適用しない場合、クラスターは問題に対して脆弱なままになります。

### <a name="node-maintenance-and-access"></a>ノードのメンテナンスとアクセス

ワーカー ノードは共同責任であり、お客様の所有権の下にあるため、お客様はこれらのワーカーにログインし、カーネルの更新、パッケージの削除、新しいパッケージのインストールなど、問題を起こす可能性のある変更を実行できます。

お客様が、破壊的なアクションや、コントロール プレーン コンポーネントをオフラインやそれ以外の機能不能な状態にするアクションを実行した場合、AKS サービスはこの障害を検出し、自動修復を実行して、ワーカー ノードを以前の動作状態に復元します。

お客様はワーカー ノードにログインして変更できますが、そのような行為は、クラスターをサポート不可能にする可能性があるため、"*お勧めできません*"。

## <a name="network-ports-access-and-network-security-groups"></a>ネットワーク ポート、アクセス、ネットワーク セキュリティ グループ

マネージド サービスである AKS には、ネットワークと接続に関して固有の要件があります。 これらの要件は、通常の IaaS コンポーネントほど柔軟ではありません。 他の IaaS コンポーネントとは異なり、特定の操作 (ネットワーク セキュリティ グループ規則のカスタマイズ、特定のポートのブロック、URL のホワイトリスト登録など) を行うと、クラスターがサポート不可能になる可能性があります (たとえば、送信ポート 443 をブロックするファイアウォール規則など)。

> [!NOTE]
> クラスターからのエグレスを完全にロックダウンすることは (たとえば、明示的なドメイン/ポートのホワイトリスト登録)、現時点では AKS のシナリオとしてサポートされていません。 URL とポートの一覧は、警告なしに変更される可能性があり、チケットを使用して Azure サポートから入手できます。 提供される一覧は、"*クラスターの可用性が影響を受ける可能性が常にある*" ことを受け入れる用意があるお客様だけを対象としたものです。

## <a name="alphabeta-kubernetes-features-not-supported"></a>アルファ/ベータの Kubernetes 機能 (非サポート)

AKS では、アップストリームの Kubernetes プロジェクト内の安定した機能のみがサポートされます。 そうでないことが通知および文書化されている場合を除き、アップストリームの Kubernetes で利用可能なアルファ/ベータ機能はサポートされていません。

GA 前にアルファ版またはベータ版の機能がロールアウトされる可能性があるケースが 2 つあります。

* お客様が AKS の製品、サポート、またはエンジニアリング チームと会って、これらの新機能を試すことを明示的に要求した。
* これらの機能が[機能フラグによって有効にされている][2] (明示的なオプトイン)

## <a name="preview-features--feature-flags"></a>プレビュー機能/機能フラグ

拡張テスト、コミュニティ、ユーザー フィードバックを必要とする機能の場合、Microsoft は新しいプレビュー機能または機能フラグの背後にある機能をリリースします。 これらの機能はプレリリース/ベータと見なす必要があり、これらの新機能を試す機会をユーザーに提供するために公開されます。

ただし、これらのプレビュー/機能フラグ機能は、運用環境で使用するためのものではありません。API や動作の変更、バグの修正、その他の変更が行われて、クラスターが不安定になったり、ダウンタイムが発生したりする可能性があります。 これらの機能のサポートは、バグ/問題の報告に限定されます。 運用システムまたはサブスクリプションでこれらの機能を有効にしないでください。

> [!NOTE]
> プレビュー機能の有効化は、Azure **サブスクリプション** レベルで行われます。 運用サブスクリプションにはプレビュー機能をインストールしないでください。API の既定の動作が変更されて、通常の操作に影響する可能性があります。

## <a name="upstream-bugs-and-issues"></a>アップストリームのバグと問題

アップストリームの Kubernetes プロジェクトにおける開発の速度のため、AKS システム内で修正プログラムを適用したり回避したりできないバグが常に存在し、代わりに、より大規模な修正プログラムがアップストリームのプロジェクト (Kubernetes、ノード/ワーカー、OS、カーネルなど) に対して必要です。 Microsoft が所有するコンポーネント (Azure クラウド プロバイダーなど) については、AKS/Azure の担当者がコミュニティのアップストリームで問題の修正に努めます。

テクニカル サポートの問題の根本原因が 1 つ以上のアップストリームのバグである場合、AKS のサポートおよびエンジニアリングは次のことを行います。

* アップストリームのバグを特定し、それがお客様のクラスターやワークロードに影響する理由についてのサポートの詳細にリンクします。 お客様には、問題を監視し、新しい Kubernetes/その他のリリースに修正が組み込まれる時期を確認するために、必要なリポジトリ/問題へのリンクが提供されます
* 潜在的な回避策または軽減策:場合によっては、問題を回避できる可能性があります。その場合は、次のことが説明された "[既知の問題](https://github.com/Azure/AKS/issues?q=is%3Aissue+is%3Aopen+label%3Aknown-issue)" が、AKS リポジトリに登録されます。
  * 問題、およびアップストリームのバグへのリンク
  * 回避策、およびアップグレードや解決策のその他の永続化に関する詳細情報
  * アップストリームのリリース周期に基づく組み込みの大まかなタイムライン

[1]: https://github.com/Azure/AKS/releases
[2]: https://github.com/Azure/AKS/blob/master/previews.md
[3]: https://docs.microsoft.com/azure/aks/
