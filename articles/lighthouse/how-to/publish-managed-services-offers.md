---
title: Azure Marketplace にマネージド サービス オファーを発行する
description: Azure の委任されたリソース管理に顧客をオンボードするマネージド サービス オファーを発行する方法について説明します。
ms.date: 01/16/2020
ms.topic: conceptual
ms.openlocfilehash: 841cb52791709be5649d66b72f5c18ef35b740ef
ms.sourcegitcommit: 276c1c79b814ecc9d6c1997d92a93d07aed06b84
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/16/2020
ms.locfileid: "76155249"
---
# <a name="publish-a-managed-services-offer-to-azure-marketplace"></a>Azure Marketplace にマネージド サービス オファーを発行する

この記事では、[Cloud パートナー ポータル](https://cloudpartner.azure.com/)を使用して、パブリックまたはプライベートのマネージド サービス オファーを [Azure Marketplace](https://azuremarketplace.microsoft.com) に発行し、そのオファーを購入した顧客が Azure の委任されたリソース管理のリソースをオンボードできるようにする方法について説明します。

> [!NOTE]
> これらのオファーを作成して発行するには、[パートナー センターの有効なアカウント](../../marketplace/partner-center-portal/create-account.md)が必要です。 まだアカウントをお持ちでない場合は、[サインアップ プロセス](https://aka.ms/joinmarketplace)に従って、パートナー センターのアカウントを作成し、商業マーケットプレース プログラムに登録する手順を進めてください。 顧客エンゲージメント全体に対するお客様の影響を追跡するために、ご使用の Microsoft Partner Network (MPN) ID はお客様が発行したオファーに[自動的に関連付けられます](../../billing/billing-partner-admin-link-started.md)。
>
> オファーを Azure Marketplace に発行しない場合は、Azure Resource Manager テンプレートを使用して、顧客を手動でオンボードできます。 詳細については、「[Azure の委任されたリソース管理に顧客をオンボードする](onboard-customer.md)」を参照してください。

マネージド サービス オファーの発行は、他の種類のオファーを Azure Marketplace に発行する場合と同様です。 そのプロセスについては、「[Azure Marketplace と AppSource の公開ガイド](../../marketplace/marketplace-publishers-guide.md)」および「[Azure Marketplace と AppSource Marketplace のオファーを管理する](../../marketplace/cloud-partner-portal/manage-offers/cpp-manage-offers.md)」を参照してください。 さらに、「[商業マーケットプレースの認定ポリシー](https://docs.microsoft.com/legal/marketplace/certification-policies)」(特に「[マネージド サービス](https://docs.microsoft.com/legal/marketplace/certification-policies#700-managed-services)」セクション) も確認してください。

顧客がオファーを追加すると、1 つまたは複数の特定のサブスクリプションまたはリソース グループを委任できるようになります。これらは、[Azure の委任されたリソース管理のためにオンボード](#the-customer-onboarding-process)されます。 サブスクリプション (またはサブスクリプション内のリソース グループ) をオンボードできるようにするには、先に **Microsoft.ManagedServices** リソース プロバイダーを手動で登録して、サブスクリプションのオンボードを承認する必要があることに注意してください。

> [!IMPORTANT]
> マネージド サービス オファー内の各プランには、 **[Manifest Details]\(マニフェストの詳細\)** セクションが含まれています。そこでは、そのプランを購入した顧客に代わり、委任されたリソース グループやサブスクリプションへのアクセス権を持つ Azure Active Directory (Azure AD) エンティティをお客様のテナント内に定義します。 ここに含めたグループ (またはユーザーまたはサービス プリンシパル) は、そのプランを購入したすべての顧客に対して同じアクセス許可を持つことに注意する必要があります。 顧客ごとに異なる担当グループを割り当てるには、各顧客に限定された個別のプライベート プランを発行する必要があります。

## <a name="create-your-offer-in-the-cloud-partner-portal"></a>Cloud パートナー ポータル内で実際のオファーを作成する

1. [クラウド パートナー ポータル](https://cloudpartner.azure.com/)にサインインします。
2. 左側のナビゲーション メニューから **[新しいプラン]** を選択し、 **[マネージド サービス]** を選択します。
3. お客様のオファーの **[エディター]** セクションが表示されます。入力が必要な箇所が 4 つあります。 **[プランの設定]** 、 **[プラン]** 、 **[Marketplace]** 、 **[サポート]** です。 これらのセクションに入力する方法のガイダンスについては、そのまま読み進めてください。

## <a name="enter-offer-settings"></a>オファーの設定を入力する

**[プランの設定]** セクションでは、次を指定します。

|フィールド  |説明  |
|---------|---------|
|**[プラン ID]**     | (お客様の発行元プロファイル内の) 実際のオファーの一意識別子。 この ID には、最長 50 文字で、小文字の英数字、ダッシュ、アンダースコアのみを含めることができます。 オファー ID は、製品 URL や請求レポートなどの場所で顧客に表示されることがあります。 オファーの発行後は、この値を変更することはできません。        |
|**[発行元 ID]**     | オファーに関連付けられる発行元 ID。 複数の発行元 ID がある場合は、このオファーに使用するものを選択できます。       |
|**Name**     | Azure Marketplace と Azure portal 内で顧客に表示される実際のオファーの名前 (最長 50 文字)。 顧客が理解できる認識可能なブランド名を使用します。お客様自身の Web サイトを通じてこのオファーを宣伝している場合は、ここでまったく同じ名前を必ず使用してください。        |

完了したら、 **[保存]** を選択します。 これで、 **[プラン]** セクションに進む準備ができました。

## <a name="create-plans"></a>プランを作成する

各オファーには 1 つ以上のプラン (SKU と呼ばれることもあります) が必要です。 異なる価格で異なる機能セットをサポートする複数のプランを追加したり、特定の顧客の限られた対象ユーザーに合わせて特定のプランをカスタマイズしたりすることができます。 顧客は、親オファーに含まれている、自分が利用可能なプランを表示できます。

[プラン] セクションで、 **[新しいプラン]** を選択します。 次に、**プラン ID** を入力します。 この ID には、最長 50 文字で、小文字の英数字、ダッシュ、アンダースコアのみを含めることができます。 プラン ID は、製品 URL や請求レポートなどの場所で顧客に表示されることがあります。 オファーの発行後は、この値を変更することはできません。

### <a name="plan-details"></a>プランの詳細

**[プランの詳細]** セクションで、次のセクションに入力します。

|フィールド  |説明  |
|---------|---------|
|**Title**     | 表示されるプランのフレンドリ名。 最大長は 50 文字です。        |
|**まとめ**     | タイトルの下に表示されるプランの簡潔な説明。 最大長は 100 文字です。        |
|**説明**     | プランについてのより詳しい説明を提供する説明テキスト。         |
|**課金モデル**     | ここには課金モデルが 2 つ表示されますが、マネージド サービス オファーの場合は **[ライセンス持ち込み]** を選択する必要があります。 これは、このオファーに関連するコストはお客様が顧客に直接請求し、Microsoft はお客様に料金を一切請求しないことを意味します。   |
|**Is this a private plan? (プライベート プランか)**     | SKU がプライベートかパブリックかどうかを示します。 既定値は **[いいえ]** です。 この選択のままにした場合、実際のプランは特定の顧客 (または特定の数の顧客) に制限されません。パブリック プランを発行後にプライベートに変更することはできません。 このプランを特定の顧客だけが利用できるようにするには、 **[はい]** を選択します。 その場合は、顧客のサブスクリプション ID を指定して顧客を特定する必要があります。 これらは、1 つずつ (最大 10 件のサブスクリプション)、または .csv ファイルのアップロード (最大 20,000 件のサブスクリプション) によって入力できます。 オファーをテストして検証できるように、ここではお客様自身のサブスクリプションを必ず含めてください。 詳細については、「[プライベート SKU とプラン](../../marketplace/cloud-partner-portal-orig/cloud-partner-portal-azure-private-skus.md)」を参照してください。  |

> [!IMPORTANT]
> プランをパブリックとして公開した後でプライベートに変更することはできません。 どの顧客がプランを受け入れて、リソースを委任できるようにするかを制御するには、プライベート プランを使用します。 パブリック プランの場合、対象範囲を特定の顧客に制限したり、対象となる顧客数を限定したりできません (ただし、必要に応じてプランの販売を完全に中止することはできます)。 オファーを発行し、カスタマーがそれを受け入れた後に[委任へのアクセス権を削除](onboard-customer.md#remove-access-to-a-delegation)できるのは、 その**ロールの定義**セットに「[管理されたサービスの登録割り当て削除ロール](../../role-based-access-control/built-in-roles.md#managed-services-registration-assignment-delete-role)」の**承認**を含めた場合に限ります。 また、カスタマーに連絡して、[アクセスを削除](view-manage-service-providers.md#add-or-remove-service-provider-offers)するよう依頼することもできます。

### <a name="manifest-details"></a>マニフェストの詳細

プランの **[Manifest Details]\(マニフェストの詳細\)** セクションを設定します。 これにより、顧客リソースを管理するための承認情報を含むマニフェストが作成されます。 この情報は、Azure の委任されたリソース管理を有効にするために必要です。

> [!NOTE]
> 前に説明したように、 **[承認]** エントリのユーザーとロールは、プランを購入したすべての顧客に適用されます。 特定の顧客にアクセスを制限する場合は、専用のプライベート プランを発行する必要があります。

最初に、マニフェストの**バージョン**を指定します。 *n.n.n* という形式を使用します (たとえば、1.2.5)。

次に、お客様の**テナント ID** を指定します。 これは、お客様の組織 (つまり、実際の顧客のリソースを管理するために使用するテナント) の Azure Active Directory テナント ID に関連付けられている GUID です。 これが手元にない場合は、Azure portal の右上にあるお客様のアカウント名をポイントするか、 **[ディレクトリの切り替え]** を選択することで確認できます。

最後に、1つ以上の**承認**エントリを実際のプランに追加します。 承認では、プランを購入した顧客のリソースとサブスクリプションにアクセスできるエンティティを定義し、特定のレベルのアクセス権を付与するロールを割り当てます。

> [!TIP]
> ほとんどの場合、一連の個々のユーザー アカウントではなく、Azure AD のユーザー グループまたはサービス プリンシパルにアクセス許可を割り当てます。 これにより、実際のアクセス要件が変更されたときに、プランを更新して再発行することなく、個々のユーザーのアクセス権を追加または削除できます。 その他の推奨事項については、「[Azure Lighthouse のシナリオにおけるテナント、ロール、ユーザー](../concepts/tenants-users-roles.md)」をご覧ください。

**承認**ごとに、以下を指定する必要があります。 その後、必要なだけ **[New authorization]\(新しい承認\)** を選択して、ユーザーやロールの定義を追加できます。

- **Azure AD Object ID (Azure AD オブジェクト ID)** :実際の顧客のリソースに対する特定のアクセス許可を付与される (ロールの定義で表される) ユーザー、ユーザー グループ、またはアプリケーションの Azure AD 識別子です。
- **Azure AD Object Display Name (Azure AD オブジェクトの表示名)** :顧客がこの承認の目的を理解するのに役立つフレンドリ名。 この名前は、顧客がリソースを委任するときに表示されます。
- **ロール定義**: 一覧から、使用可能な Azure AD の組み込みロールのいずれかを選択します。 このロールにより、 **[Azure AD Object ID]\(Azure AD オブジェクト ID\)** フィールド内のユーザーに与えられる、実際の顧客のリソースに対するアクセス許可が決定されます。 これらのロールについては、[組み込みロール](../../role-based-access-control/built-in-roles.md)に関する記事と、「[Azure の委任されたリソース管理でのロールのサポート](../concepts/tenants-users-roles.md#role-support-for-azure-delegated-resource-management)」をご覧ください。
  > [!NOTE]
  > 適用される新しい組み込みロールが Azure に追加されると、ここで使用できるようになりますが、表示されるまでに時間がかかる場合があります。
- **Assignable Roles (割り当て可能なロール)** :この承認の **[ロール定義]** で [ユーザー アクセス管理者] を選択した場合は、これは必須です。 その場合、割り当て可能なロールをここで 1 つ以上追加する必要があります。 **[Azure AD Object ID]\(Azure AD オブジェクト ID\)** フィールド内のユーザーは、これらの**割り当て可能なロール**を[マネージド ID](../../active-directory/managed-identities-azure-resources/overview.md) に割り当てることができます。これは、[修復可能なポリシーをデプロイする](deploy-policy-remediation.md)ために必要です。 ユーザー アクセス管理者ロールに通常関連付けられている他のアクセス許可はこのユーザーに適用されないことに注意してください。 ここで 1 つ以上のロールを選択しない場合、送信の認定は成功しません。 (このユーザーの [ロール定義] に対して [ユーザーアクセス管理者] を選択しなかった場合、このフィールドは無効になります)。

> [!TIP]
> 必要に応じて[委任へのアクセス権を削除](onboard-customer.md#remove-access-to-a-delegation)できるようにするには、 その**ロールの定義**セットに、 [「管理されたサービスの登録割り当て削除ロール」](../../role-based-access-control/built-in-roles.md#managed-services-registration-assignment-delete-role)の**承認**を含めます。 このロールが割り当てられていない場合、委任されたリソースは顧客のテナント内のユーザーによってのみ削除できます。

情報の入力が終わったら、必要な回数だけ **[新しいプラン]** を選択して、追加のプランを作成できます。 完了したら、 **[保存]** を選択し、 **[Marketplace]** セクションに進みます。

## <a name="provide-marketplace-text-and-images"></a>Marketplace のテキストと画像を指定する

**[Marketplace]** セクションでは、Azure marketplace と Azure portal 内で顧客に表示されるテキストと画像を指定します。

**[概要]** セクションで、次のフィールドを設定します。

|フィールド  |説明  |
|---------|---------|
|**Title**     |  プランのタイトル。通常は長い正式な名前。 このタイトルは、マーケットプレースで目立つように表示されます。 最大長は 50 文字です。 ほとんどの場合、これは **[プランの設定]** セクションで入力した**名前**と同じにします。       |
|**まとめ**     | 実際のオファーの簡潔な目的または機能。 通常、これはタイトルの下に表示されます。 最大長は 100 文字です。        |
|**Long Summary (長い要約)**     | 実際のオファーの目的または機能のより長い概要。 最大長は 256 文字です。        |
|**説明**     | オファーについての詳細。 このフィールドは、最大長が 3,000 文字で、単純な HTML 書式がサポートされています。 説明のどこかに、"マネージド サービス" という語を含める必要があります。       |
|**Marketing Identifier (マーケティング識別子)**     | 一意の URL フレンドリ識別子。 この識別子には、小文字の英数字とダッシュのみを使用できます。 このオファーの Marketplace URL で使用されます。 たとえば、お客様の発行元 ID が *contoso* で、お客様のマーケティング識別子が *sampleApp* の場合、Azure Marketplace 内では、実際のオファーの URL は *https://azuremarketplace.microsoft.com/marketplace/apps/contoso-sampleApp* になります。        |
|**Preview Subscription IDs (プレビュー サブスクリプション ID)**     | 1 から 100 個のサブスクリプション識別子を追加します。 これらのサブスクリプションに関連付けられている顧客は、オファーの一般公開前に、Azure Marketplace 内でそのオファーを表示することができるようになります。 実際のオファーを顧客が購入できるようにする前に、そのオファーが Azure Marketplace 内でどのように表示されるかをプレビューできるように、ここでお客様自身のサブスクリプションを含めることをお勧めします  (Microsoft のサポートとエンジニアリング チームも、このプレビュー期間中にお客様のオファーを表示することができるようになります)。   |
|**役に立つリンク**     | ドキュメント、リリース ノート、FAQ など、実際のオファーに関連する URL。        |
|**推奨されるカテゴリ (最大 5 個)**     | 実際のオファーに該当する 1 つ以上のカテゴリ (最大 5 つ)。 これらのカテゴリは、顧客が Azure Marketplace と Azure portal 内でお客様のプランを見つけるのに役立ちます。        |

**[Marketing Artifacts]\(マーケティングの成果物\)** セクションでは、お客様のプランと共に表示されるロゴとその他のアセットをアップロードできます。 必要に応じて、顧客がお客様のプランを理解するのに役立つスクリーンショットやビデオへのリンクをアップロードできます。

4 つのロゴ サイズが必要です。**小型 (40x40)** 、**中型 (90x90)** 、**大型 (115x115)** 、**ワイド (255x115)** です。 お客様のロゴについては、これらのガイドラインに従ってください。

- Azure の設計には簡単なカラー パレットがあります。 ロゴのプライマリ カラーとセカンダリ カラーの数は制限してください。
- ポータルのテーマの色は白黒です。 この色を、ロゴの背景色として使用しないでください。 ポータルでロゴが目立つ色を使用します。 背景色としてはシンプルなプライマリ カラーをお勧めします。
- 透明な背景を使用している場合は、ロゴおよびテキストが白、黒、または青ではないことを確認します。
- ロゴのルック アンド フィールはフラットにして、グラデーションは避ける必要があります。 ロゴではグラデーションの背景を使用しないでください。
- ロゴにはテキストを使用しないでください (会社またはブランドの名前であっても)。
- ロゴが伸縮されていないことを確認してください。

**ヒーロー (815x290)** ロゴは省略可能ですが、お勧めします。 ヒーロー ロゴを含める場合は、これらのガイドラインに従ってください。

- ヒーロー ロゴにはテキストを含めず、ロゴの右側には 415 ピクセルの空のスペースを必ず空けてください。 これは、プログラムによって埋め込まれるテキスト要素 (実際の発行元の表示名、プランのタイトル、プランの長い概要) 用のスペースを残しておくために必要です。
- お客様のヒーロー ロゴの背景を黒、白、または透明にすることはできません。 埋め込まれるテキストは白で表示されるため、背景色が明るすぎないことを確認してください。
- ヒーロー アイコンを含めて発行したプランは削除できません (ただし、必要に応じて別のバージョンを使用して更新することはできます)。

**[Lead Management]\(リード管理\)** セクションでは、お客様のリードを保存する CRM システムを選択できます。 [マネージド サービスの認定ポリシー](https://docs.microsoft.com/legal/marketplace/certification-policies#700-managed-services)上、 **[Lead Destination]\(リードのターゲット\)** は必須であることに注意してください。

最後に、 **[Legal]\(リーガル\)** セクションにお客様の**プライバシー ポリシーの URL** と**利用規約**を入力します。 また、このオファーに[標準契約](../../marketplace/standard-contract.md)を使用するかどうかを指定することもできます。

**[サポート]** セクションに進む前に、必ず変更内容を保存してください。

## <a name="add-support-info"></a>サポート情報を追加する

**[サポート]** では、エンジニアリングの連絡先や顧客サポートの連絡先の名前、メール、電話番号を入力します。 また、サポートの URL も指定する必要があります。 Microsoft は、ビジネスやサポートの問題についてお客様に連絡する必要がある場合に、この情報を使用することがあります。

この情報を追加したら、 **[保存]** を選択します。

## <a name="publish-your-offer"></a>実際のオファーを発行する

すべてのセクションの指定が済んだら、Azure Marketplace にオファーを発行します。 **[発行]** ボタンを選択して、お客様のオファーを一般公開するプロセスを始めます。 このプロセスの詳細については、「[Azure Marketplace および AppSource のオファーを発行する](../../marketplace/cloud-partner-portal/manage-offers/cpp-publish-offer.md)」を参照してください。

いつでも[更新済みバージョンのオファー](../../marketplace/cloud-partner-portal/manage-offers/cpp-update-offer.md)を公開できます。 たとえば、以前に公開されたオファーに新しいロールの定義を追加したい場合があります。 そうすると、オファーを既に追加している顧客には、Azure portal の [ **[サービス プロバイダー]** ](view-manage-service-providers.md) ページに、更新が利用可能であることを知らせるアイコンが表示されます。 各顧客は、[変更を確認](view-manage-service-providers.md#update-service-provider-offers)して、新しいバージョンに更新するかどうかを決定できます。 

## <a name="the-customer-onboarding-process"></a>顧客オンボーディング プロセス

顧客がオファーを追加すると、[1 つまたは複数の特定のサブスクリプションまたはリソース グループを委任](view-manage-service-providers.md#delegate-resources)できるようになります。これらは、Azure の委任されたリソース管理のためにオンボードされます。 顧客がオファーを承諾しても、まだリソースを委任していなければ、Azure portal の [ **[サービス プロバイダー]** ](view-manage-service-providers.md) ページの **[プロバイダーのオファー]** セクションの上部に注意書きが表示されます。

> [!IMPORTANT]
> 委任は、ゲスト以外のアカウントが、オンボード対象のサブスクリプションで[所有者の組み込みコール](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#owner)を持っている (またはオンボード対象のリソース グループを含む) 顧客のテナントで実行する必要があります。 サブスクリプションを委任できるすべてのユーザーを表示するには、顧客のテナントのユーザーが Azure portal でサブスクリプションを選択し、 **[アクセス制御 (IAM)]** を開くと、[所有者ロールを持つすべてのユーザーを表示](../../role-based-access-control/role-assignments-list-portal.md#list-owners-of-a-subscription)することができます。

顧客がサブスクリプション (またはサブスクリプション内の 1 つまたは複数のリソース グループ) を委任すると、そのサブスクリプションに **Microsoft. ManagedServices** リソースプロバイダーが登録され、テナント内のユーザーは、オファー内の承認に従って、委任されたリソースにアクセスできるようになります。

> [!NOTE]
> 現在のところ、サブスクリプションで Azure Databricks が使用されている場合、そのサブスクリプション (またはサブスクリプション内のリソース グループ) は委任できません。 同様に、サブスクリプション (またはサブスクリプション内のリソース グループ) が既に委任されている場合、現在のところ、そのサブスクリプションで Databricks ワークスペースを作成することはできません。

## <a name="next-steps"></a>次のステップ

- [テナント間の管理エクスペリエンス](../concepts/cross-tenant-management-experience.md)について学習します。
- Azure portal の **[マイ カスタマー]** に移動して、[顧客を表示および管理](view-manage-customers.md)します。
