---
title: "Azure AD アプリ プロキシのコネクタ グループを使用して別のネットワークや場所にアプリケーションを発行する | Microsoft Docs"
description: "Azure AD アプリケーション プロキシにおけるコネクタのグループの作成と管理の方法について説明します。"
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/22/2017
ms.author: kgremban
ms.custom: H1Hack27Feb2017
translationtype: Human Translation
ms.sourcegitcommit: 53fa0876ce1e3e2b2ac47316f37c5a0de2591d41
ms.openlocfilehash: 2a050e5817ab884c9d4337cc1cc76e298299dba3
ms.lasthandoff: 02/28/2017

---

# <a name="publish-applications-on-separate-networks-and-locations-using-connector-groups---public-preview"></a>コネクタ グループを使用して別のネットワークや場所にアプリケーションを発行する - パブリック プレビュー
> [!div class="op_single_selector"]
> * [Azure ポータル](active-directory-application-proxy-connectors-azure-portal.md)
> * [Azure クラシック ポータル](active-directory-application-proxy-connectors.md)
>

## <a name="azure-ad-application-proxy-and-connector-groups"></a>Azure AD アプリケーション プロキシとコネクタ グループ

Azure AD のアプリケーション プロキシは、ますます多くのシナリオやアプリケーションで利用されるようになっています。 そのため、Microsoft では、より多くのトポロジを有効にすることでアプリ プロキシの柔軟性をさらに高めました。 アプリケーション プロキシのコネクタ グループを作成できます。これは、特定のアプリケーションに対応する特定のコネクタを割り当てることのできる新しい機能です。 この機能により、これまでは不可能だったアプリケーション プロキシのさまざまなユース ケースが実現されます。 プライベート プレビュー段階では、規模の大きいお客様がコネクタ グループを使用してライブ アプリケーション プロキシのデプロイを促進した事例がありました。 

基本的な概念として、各アプリケーション プロキシ コネクタは、コネクタ グループに割り当てられます。 同じコネクタ グループに属するすべてのコネクタは、高可用性と負荷分散のために別個のグループとして動作します。 既定では、すべてのコネクタが既定のグループに属します。 管理者は、Azure Portal で新しいグループを作成し、これらの割り当てを変更することができます。 

既定では、すべてのアプリケーションが既定のコネクタ グループに割り当てられます。 管理者によって何も変更されない場合、システムはこれまでと同じように動作します。 何も変更しない場合、既定のコネクタ グループに割り当てられているすべてのアプリケーションにはすべてのコネクタが含まれます。 ただし、コネクタをグループに分けることで、特定のコネクタ グループと連携するように各アプリケーションを設定できます。 この場合、そのグループ内のコネクタのみが、要求に応じてアプリケーションに対応します。


>[!NOTE] 
>新しいコネクタは既定のコネクタ グループに自動的に割り当てられるため、大規模なデプロイの場合は、アプリケーションを既定のグループに割り当てないようにすることをお勧めします。 その場合、インストールされた新しいコネクタは、ライブ トラフィックを受信しません。 コネクタは、いずれかのアクティブなグループに割り当てられた後でのみ、ライブ トラフィックを提供できます。 この方法を使って、メンテナンスの目的でコネクタをアイドル モードにすることもできます。
>

## <a name="prerequisite-create-your-connector-groups"></a>前提条件: コネクタ グループを作成する
コネクタをグループ化するには、 [複数のコネクタがインストールされている](active-directory-application-proxy-enable.md)ことを確認する必要があります。 新しいコネクタをインストールすると、そのコネクタは自動的に **Default** コネクタ グループに追加されます。

## <a name="step-1-create-connector-groups"></a>手順 1: コネクタ グループを作成する
コネクタ グループは必要な数だけ作成できます。 コネクタ グループの作成は、 [Azure Portal](https://portal.azure.com) で実行します。

1. **[Azure Active Directory]** を選択して、ディレクトリの管理ダッシュボードに移動します。 管理ダッシュボードで、**[Enterprise applications (エンタープライズ アプリケーション)]** > **[アプリケーション プロキシ]** の順に選択します。
2. **[コネクタ グループ]** ボタンをクリックします。 [New Connector Group (新しいコネクタ グループ)] ブレードが表示されます。
3. 新しいコネクタ グループに名前を付け、ドロップダウン メニューを使用して、このグループに含めるコネクタを選択します。
4. コネクタ グループが完成したら、 **[保存]** をクリックします。

## <a name="step-2-assign-applications-to-your-connector-groups"></a>手順 2: コネクタ グループにアプリケーションを割り当てる
最後の手順は、アプリケーションにサービスを提供するコネクタ グループへの各アプリケーションの設定です。

1. ディレクトリの管理ダッシュボードで、**[Enterprise applications (エンタープライズ アプリケーション)]** > **[すべてのアプリケーション]**、コネクタ グループに割り当てるアプリケーション、**[アプリケーション プロキシ]** の順に選択します。
2. **[コネクタ グループ]**のドロップダウン メニューで、アプリケーションで使用するグループを選択します。
3. **[保存]** をクリックして変更を適用します。

## <a name="use-cases-for-connector-groups"></a>コネクタ グループのユース ケース 

コネクタ グループは、次のようなさまざまなシナリオで役立ちます。

###<a name="sites-with-multiple-interconnected-datacenters"></a>複数のデータセンターが相互接続されたサイト

複数のデータセンターを相互接続している組織は多数あります。 この場合、データセンター間リンクはコストがかかり、低速であるため、できるだけ多くのトラフィックをデータセンター内に留める必要があります。 各データセンターにコネクタをデプロイして、データセンター内にあるアプリケーションにのみサービスを提供できます。 この方法で、データセンター間のリンクを最小限に抑えて、ユーザーに完全に透過的なエクスペリエンスを提供できます。

### <a name="applications-installed-on-isolated-networks"></a>分離されたネットワークにインストールされたアプリケーション

メインの企業ネットワークの一部ではない分離されたネットワークでアプリケーションをホストすることができます。 コネクタ グループを使用して、分離されたネットワークに専用のコネクタをインストールし、そのネットワークに対してアプリケーションの分離も実現できます。 これは通常、サード パーティ ベンダーが組織の特定のアプリケーションを管理している場合に行います。 

コネクタ グループを使用すると、特定のアプリケーションのみを発行するネットワーク専用のコネクタをインストールできるため、アプリケーション管理をより簡単かつ安全にサード パーティ ベンダーに委託できます。

### <a name="applications-installed-on-iaas"></a>IaaS 上にインストールされたアプリケーション 

クラウド アクセスを実現するためにアプリケーションが IaaS 上にインストールされている場合。コネクタ グループは、すべてのアプリケーションへのアクセスをセキュリティで保護する共通サービスを提供します。 コネクタ グループによって、企業ネットワークに対する追加の依存関係が生じることも、アプリケーション エクスペリエンスが分断されることもありません。 各クラウド データセンターにコネクタをインストールし、このネットワーク上にあるアプリケーションにのみサービスを提供できます。 複数のコネクタをインストールして、高可用性を実現できます。

この場合、組織は、独自の IaaS 上でホストされている仮想ネットワークに接続された複数の仮想マシンを利用します。 従業員がこれらのアプリケーションを使用できるようにするために、これらのプライベート ネットワークは、サイト間 VPN を使用して企業ネットワークに接続されます。 これにより、オンプレミスの従業員に良好なエクスペリエンスが提供されます。 しかし、これはリモートの従業員にとっては必ずしも理想的な方法ではありません。次の図に示すように、追加のオンプレミス インフラストラクチャが必要になるためです。

![Azure AD IaaS ネットワーク](./media/application-proxy-publish-apps-separate-networks/application-proxy-iaas-network.png)
  
この場合、多くの組織が複数のクラウド ベンダーを利用するようになり、アプリケーションが多数のデータセンターに存在するようになると、問題が発生します。 Azure AD アプリケーション プロキシ コネクタ グループを使用すると、一般的なサービスですべてのアプリケーションへのアクセスを保護できます。企業ネットワークに対する依存関係がそれ以上生じることもありません。

![Azure AD IaaS の複数クラウド ベンダー](./media/application-proxy-publish-apps-separate-networks/application-proxy-multiple-cloud-vendors.png)

### <a name="multi-forest--different-connector-groups-for-each-forest"></a>マルチフォレスト - フォレストごとに異なるコネクタ グループ

アプリケーション プロキシをデプロイしているほとんどのお客様は、Kerberos の制約付き委任 (KCD) を実行してシングル サインオン (SSO) 機能を使用しています。 これを実現するには、ユーザーをアプリケーションに委任できるドメインにコネクタのマシンを参加させる必要があります。 KCD は、フォレスト間の機能をサポートしています。 しかし、企業の個々のマルチフォレスト環境の間に信頼関係がない場合、単一のコネクタをすべてのフォレストに使用することはできません。 

この場合、特定のコネクタをフォレスト単位でデプロイし、その特定のフォレストのユーザーに対応範囲が限定される、発行済みのアプリケーションに対応するように設定できます。 それぞれのコネクタ グループは異なるフォレストを表します。 エクスペリエンスのほとんどとテナントはすべてのフォレストで統一されますが、Azure AD グループを使用してユーザーをフォレストのアプリケーションに割り当てることができます。
 
### <a name="disaster-recovery-sites"></a>障害復旧サイト

障害復旧 (DR) サイトに対しては、サイトの実装方法に応じて&2; つの異なるアプローチを使用できます。

* DR サイトが (メイン サイトとまったく同じで、同じネットワークおよび AD 設定が使用される) アクティブ/アクティブ モードで構築されている場合、メイン サイトと同じコネクタ グループの DR サイトにコネクタを作成できます。 これにより、Azure AD はフェールオーバーを検出できます。
* DR サイトがメイン サイトから切り離されている場合は、DR サイトに異なるコネクタ グループを作成し、1) アプリケーションを追加するか、2) 必要に応じて既存のアプリケーションを DR コネクタ グループに手動で切り替えることができます。
 
### <a name="serve-multiple-companies-from-a-single-tenant"></a>単一のテナントから複数の企業にサービスを提供する

単一のサービス プロバイダーが複数の企業向けに Azure AD 関連サービスをデプロイして維持するモデルを実装するには、さまざまな方法があります。 コネクタ グループは、管理者がコネクタとアプリケーションを異なるグループに分けるのに役立ちます。 小規模な企業に適した&1; つの方法として、Azure AD テナントを&1; つ用意し、企業ごとに独自のドメイン名とネットワークを提供する方法があります。 これは、M&A のシナリオや、単一の IT 部門が規制または事業上の理由で複数の企業にサービスを提供する状況にも当てはまります。 

## <a name="sample-configurations"></a>サンプルの構成

実装できるいくつかの例には、次のコネクタ グループが含まれています。
 
### <a name="default-configuration--no-use-for-connector-groups"></a>既定の構成 – コネクタ グループを使用しない

コネクタ グループを使用しない場合、構成は次のようになります。

![Azure AD: コネクタ グループなし](./media/application-proxy-publish-apps-separate-networks/application-proxy-sample-config-1.png)
 
小規模なデプロイとテストにはこの構成で十分です。 また、この構成は、組織のネットワーク トポロジがフラットな場合にも効果的に動作します。
 
### <a name="default-configuration-and-an-isolated-network"></a>既定の構成と分離されたネットワーク

この構成は既定の構成を発展させたものです。この構成には、IaaS 仮想ネットワークなどの分離されたネットワークで実行される特定のアプリケーションがあります。 

![Azure AD: コネクタ グループなし](./media/application-proxy-publish-apps-separate-networks/application-proxy-sample-config-2.png)
 
### <a name="recommended-configuration--several-specific-groups-and-a-default-group-for-idle"></a>推奨構成 - 複数の特定のグループとアイドル コネクタ用の既定のグループ

大規模で複雑な組織に対しては、アプリケーションに対応しないグループを既定のコネクタ グループとして構成し、これをアイドル コネクタまたは新規にインストールされたコネクタ用に使用することをお勧めします。 すべてのアプリケーションへの対応は、カスタマイズされたコネクタ グループを通じて行われます。 これにより、上記の複雑なシナリオすべてに対応可能です。

2 つのデータセンター A と B を保有している企業の例を次に示します。各サイトへの対応は&2; つのコネクタによって行われています。 各サイトでは、それぞれ異なるアプリケーションが実行されています。 

![Azure AD: コネクタ グループなし](./media/application-proxy-publish-apps-separate-networks/application-proxy-sample-config-3.png)
 
## <a name="next-steps"></a>次のステップ
* [アプリケーション プロキシを有効にする](active-directory-application-proxy-enable.md)
* [シングル サインオンを有効にする](active-directory-application-proxy-sso-using-kcd.md)
* [条件付きアクセスを有効にする](active-directory-application-proxy-conditional-access.md)
* [アプリケーション プロキシで発生した問題のトラブルシューティングを行う](active-directory-application-proxy-troubleshoot.md)


