---
title: 条件付きアクセスでマネージド デバイスを必須にする - Azure Active Directory
description: クラウド アプリへのアクセスにマネージド デバイスを要求する Azure Active Directory (Azure AD) デバイスベースの条件付きアクセス ポリシーを構成する方法を説明します。
services: active-directory
ms.service: active-directory
ms.subservice: conditional-access
ms.topic: how-to
ms.date: 06/08/2020
ms.author: joflore
author: MicrosoftGuyJFlo
manager: daveba
ms.reviewer: jairoc
ms.collection: M365-identity-device-management
ms.openlocfilehash: 7d3fbb06355772794fbe3fab5cdf3c8622c2baf4
ms.sourcegitcommit: e69bb334ea7e81d49530ebd6c2d3a3a8fa9775c9
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/27/2020
ms.locfileid: "88948829"
---
# <a name="how-to-require-managed-devices-for-cloud-app-access-with-conditional-access"></a>方法:条件付きアクセスを使用してクラウド アプリへのアクセスにマネージド デバイスを要求する

モバイル ファースト、クラウド ファーストの世界では、Azure Active Directory (Azure AD) を使用して、アプリおよびサービスにどこからでもシングル サインオンできます。 承認されたユーザーはモバイル デバイスと個人デバイスを含むさまざまなデバイスからクラウド アプリにアクセスできます。 ただし、多くの環境では、セキュリティとコンプライアンスの基準を満たすデバイスのみがアクセスする必要があるアプリが少なくともいくつかはあります。 これらのデバイスはマネージド デバイスとも呼ばれます。 

この記事では、環境内の特定のクラウド アプリへのアクセスにマネージド デバイスを要求する条件付きアクセス ポリシーを構成する方法について説明します。 

## <a name="prerequisites"></a>前提条件

クラウド アプリへのアクセスにマネージド デバイスを要求すると、**Azure AD の条件付きアクセス**と **Azure AD のデバイス管理**が連携します。 これらの領域を十分に理解してない場合は、次のトピックを先に読んでおく必要があります。

- **[Azure Active Directory の条件付きアクセス](./overview.md)** - この記事は、条件付きアクセスと関連する用語の概念的な概要を説明しています。
- **[Azure Active Directory のデバイス管理の概要](../devices/overview.md)** - この記事は、組織の管理下にあるデバイスを取得する際に使用できるさまざまなオプションの概要を説明しています。 
- **Windows 10 Creators Update (バージョン 1703)** 以降で Chrome をサポートするには、[Windows 10 Accounts 拡張機能](https://chrome.google.com/webstore/detail/windows-10-accounts/ppnbnpeolgkicgegkbkbjmhlideopiji)をインストールしてください。 条件付きアクセス ポリシーでデバイス固有の詳細が必要な場合は、この拡張機能が必要です。

>[!NOTE] 
> Azure AD デバイスベースの条件付きアクセス ポリシーを使用して、最初のデバイス認証後に最適な実施を行うことをお勧めします。 これには、デバイスが準拠していない場合のセッションの終了とデバイス コード フローが含まれます。


## <a name="scenario-description"></a>シナリオの説明

セキュリティと生産性のバランスを極めるのは困難です。 クラウド リソースへのアクセスでサポートされるデバイスの急増は、ユーザーの生産性の向上に役立ちます。 その一方で、環境内の特定のリソースは、保護レベルが不明なデバイスからアクセスされるのは望ましくない可能性があります。 影響を受けるリソースについては、ユーザーがマネージド デバイスを使用してのみアクセスできることを要求する必要があります。 

Azure AD 条件付きアクセスを使用すると、アクセス許可を付与するための次に示すポリシーを 1 つ使って、この要件に対応できます。

- 選択したクラウド アプリに対して
- 選択したユーザーおよびグループに対して
- マネージド デバイスの要求

## <a name="managed-devices"></a>マネージド デバイス  

簡単に言えば、マネージド デバイスとは、*何らかの*組織的な管理下に置かれたデバイスのことです。 Azure AD では、マネージド デバイスの前提条件は、デバイスが Azure AD に登録されていることです。 デバイスを登録すると、デバイスの ID がデバイス オブジェクトの形式で作成されます。 このオブジェクトは、デバイスに関する状態情報を追跡するために Azure によって使用されます。 Azure AD 管理者は既に、このオブジェクトを使用してデバイスの状態を切り替える (有効化/無効化する) ことができます。
  
![デバイス ベースの条件](./media/require-managed-devices/32.png)

Azure AD に登録されているデバイスを取得するには、次の 3 つのオプションがあります: 

- **Azure AD 登録済みデバイス** - Azure AD に登録されたパーソナル デバイスを取得します
- **Azure AD 参加済みデバイス** - Azure AD に登録されたオンプレミス AD に参加していない、組織の Windows 10 デバイスを取得します。 
- **ハイブリッド Azure AD 参加済みデバイス** - Azure AD に登録されたオンプレミス AD に参加している Windows 10 デバイスまたはサポートされるダウンレベルのデバイスを取得します。

これらの 3 つのオプションについては、「[デバイス ID とは](../devices/overview.md)」という記事で説明されています。

マネージド デバイスになることができる登録済みデバイスは、**ハイブリッド Azure AD 参加済みデバイス**または**準拠とマークされたデバイス**である必要があります。  

![デバイス ベースの条件](./media/require-managed-devices/47.png)
 
## <a name="require-hybrid-azure-ad-joined-devices"></a>ハイブリッド Azure AD 参加済みデバイスが必要

条件付きアクセス ポリシーで、選択されたクラウド アプリにはマネージド デバイスを使用しなければアクセスできないことを宣言するために、 **[ハイブリッド Azure AD 参加済みのデバイスが必要]** を選択できます。 

![デバイス ベースの条件](./media/require-managed-devices/10.png)

この設定は、オンプレミス AD に参加している Windows 10 デバイス、または Windows 7 または Windows 8 などのダウンレベルのデバイスにのみ適用されます。 ハイブリッド Azure AD 参加を使用する方法でのみ、これらのデバイスを Azure AD に登録することができ、これは Windows 10 デバイスを登録するための[自動プロセス](../devices/hybrid-azuread-join-plan.md)です。 

![デバイス ベースの条件](./media/require-managed-devices/45.png)

ハイブリッド Azure AD 参加済みデバイスをマネージド デバイスにする条件は何でしょうか?  オンプレミス AD に参加しているデバイスの場合、これらのデバイスに対する統制は、**Configuration Manager** などの管理ソリューションや、それらを管理するための**グループ ポリシー (GP)** を使用して適用されると想定されます。 これらの方法のいずれかがデバイスに適用されているかどうか Azure AD で判断する方法がないため、ハイブリッド Azure AD 参加済みデバイスを要求することは、マネージド デバイスを要求するための比較的弱いメカニズムです。 当該デバイスがハイブリッド Azure AD 参加済みデバイスでもある場合、オンプレミスのドメイン参加済みデバイスに適用されている方法がマネージド デバイスを構成するために十分に強いかどうかを判断することは管理者の責任です。

## <a name="require-device-to-be-marked-as-compliant"></a>デバイスは準拠としてマーク済みである必要がある

*デバイスは準拠としてマーク済みである必要がある*というオプションは、マネージド デバイスを要求するための最も厳密な形式です。

![デバイス ベースの条件](./media/require-managed-devices/11.png)

このオプションでは、デバイスが Azure AD に登録されている必要があり、次のものによって準拠とマークされている必要もあります。
         
- Intune
- Azure AD 統合によって Windows 10 デバイスを管理するサードパーティ製のモバイル デバイス管理 (MDM) システム。 Windows 10 以外のデバイスの OS の種類のサードパーティ製 MDM システムはサポートされていません。
 
![デバイス ベースの条件](./media/require-managed-devices/46.png)

準拠としてマークされているデバイスの場合、次のことを想定できます。 

- 会社のデータにアクセスするために従業員が使用するモバイル デバイスが管理されている
- 従業員が使用するモバイル アプリが管理されている
- 従業員が情報にアクセスして共有する方法の統制を補助することによって、会社の情報が保護されている
- デバイスとそのアプリが会社のセキュリティ要件に準拠している

### <a name="scenario-require-device-enrollment-for-ios-and-android-devices"></a>シナリオ:iOS および Android デバイスのデバイス登録が必要

このシナリオでは、Office 365 リソースへのすべてのモバイル アクセスで、登録されたデバイスを使用する必要があると判断されました。 すべてのユーザーは既に Azure AD 資格情報でサインインしていて、Azure AD Premium P1 または P2、および Microsoft Intune を含むライセンスが割り当てられています。

組織は、登録済みモバイル デバイスの使用を必須とするために、以下の手順を完了する必要があります。

1. **Azure portal** にグローバル管理者、セキュリティ管理者、または条件付きアクセス管理者としてサインインします。
1. **[Azure Active Directory]**  >  **[セキュリティ]**  >  **[条件付きアクセス]** の順に移動します。
1. **[新しいポリシー]** を選択します。
1. ポリシーに名前を付けます。 ポリシーの名前に対する意味のある標準を組織で作成することをお勧めします。
1. **[割り当て]** で、 **[ユーザーとグループ]** を選択します。
   1. **[Include]\(含める\)** で、 **[すべてのユーザー]** を選択するか、このポリシーを適用する特定の**ユーザーとグループ**を選択します。 
   1. **[Done]** を選択します。
1. **[クラウド アプリまたは操作]**  >  **[Include]\(含める\)** で、 **[Office 365 (プレビュー)]** を選択します。
1. **[条件]** で、 **[デバイス プラットフォーム]** を選択します。
   1. **[構成]** を **[はい]** に設定します。
   1. **Android** と **iOS** を含めます。
1. **[アクセス制御]**  >  **[付与]** で、次のオプションを選択します。
   - **デバイスは準拠としてマーク済みである必要があります**
1. 設定を確認し、 **[Enable policy]\(ポリシーの有効化\)** を **[オン]** に設定します。
1. **[作成]** を選択し、ポリシーを作成して有効にします。

### <a name="known-behavior"></a>既知の動作

[デバイスコードの OAuth フロー](../develop/v2-oauth2-device-code.md)を使用する場合、マネージド デバイスを要求する許可コントロールや、デバイスの状態の条件は、サポートされません。 これは、認証を実行するデバイスがそのデバイスの状態を、コードを提供するデバイスに提供できず、トークン内のデバイスの状態が、認証を行うデバイスにロックされるためです。 代わりに、多要素認証を要求する許可コントロールを使用してください。

Windows 7、iOS、Android、macOS、および一部のサードパーティ製 Web ブラウザーでは、Azure AD によって、デバイスが Azure AD に登録されるときにプロビジョニングされたクライアント証明書を使用してデバイスが識別されます。 ユーザーは、ブラウザーで最初にサインインするときに、証明書の選択を求められます。 エンド ユーザーは、ブラウザーを引き続き使用する前に、この証明書を選択する必要があります。

## <a name="next-steps"></a>次のステップ

環境内でデバイスベースの条件付きアクセス ポリシーを構成する前に、「[Azure Active Directory の条件付きアクセスのベスト プラクティス](best-practices.md)」を参照してください。