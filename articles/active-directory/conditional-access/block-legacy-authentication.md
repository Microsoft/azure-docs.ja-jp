---
title: 条件付きアクセスを利用して Azure Active Directory (Azure AD) へのレガシ認証をブロックする方法 | Microsoft Docs
description: 信頼されていないネットワークからのアクセスの試行に対して、Azure Active Directory (Azure AD) で条件付きアクセス ポリシーを構成する方法を説明します。
services: active-directory
keywords: アプリへの条件付きアクセス, Azure AD での条件付きアクセス, 企業リソースへの安全なアクセス, 条件付きアクセス ポリシー
documentationcenter: ''
author: MarkusVi
manager: mtillman
editor: ''
ms.component: conditional-access
ms.assetid: 8c1d978f-e80b-420e-853a-8bbddc4bcdad
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 12/06/2018
ms.author: markvi
ms.reviewer: calebb
ms.openlocfilehash: 2abf0afb3b6e1cd80168fa3f295297551b9bf7ce
ms.sourcegitcommit: 7862449050a220133e5316f0030a259b1c6e3004
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/22/2018
ms.locfileid: "53755157"
---
# <a name="how-to-block-legacy-authentication-to-azure-ad-with-conditional-access"></a>方法:条件付きアクセスを使用して Azure AD へのレガシ認証をブロックする   

指定したユーザーがお使いのクラウド アプリに簡単にアクセスできるように、Azure Active Directory (Azure AD) ではレガシ認証を含め、幅広い認証プロトコルをサポートしています。 ただし、従来のプロトコルでは、多要素認証 (MFA) をサポートしていません。 MFA は多くの環境で、なりすましに対処するための一般的な要件になっています。 

お使いの環境で、テナントの保護を向上させるためにレガシ認証をブロックする準備ができている場合は、条件付きアクセスによってこの目標を達成できます。 この記事では、テナントのレガシ認証をブロックする条件付きアクセス ポリシーを構成する方法について説明します。



## <a name="prerequisites"></a>前提条件

この記事では、次の内容を熟知していることを前提としています。 

- Azure AD の条件付きアクセスの[基本的な概念](overview.md) 
- Azure portal における条件付きアクセス ポリシーの構成に関する[ベスト プラクティス](best-practices.md)



## <a name="scenario-description"></a>シナリオの説明

Azure AD では、レガシ認証を含め、最も広く使用されている認証および承認のプロトコルを複数サポートしています。 レガシ認証とは、基本認証を使用するプロトコルのことです。 通常、これらのプロトコルでは、第 2 要素の認証はどれも適用できません。 レガシ認証に基づくアプリの例を次に示します。

- 従来の Microsoft Office アプリ

- POP、IMAP、SMTP などの電子メール プロトコルを使用するアプリ

最近は、単一要素認証 (たとえば、ユーザー名とパスワード) では不十分です。 パスワードは、簡単に推測できるうえに、適切なパスワードの選定は難しいため、不十分です。 また、パスワードは、フィッシングやパスワード スプレーなどの幅広い攻撃に対しては脆弱です。 パスワードの脅威から保護できる最も簡単な方法の 1 つは、MFA を実装することです。 MFA を使用すれば、攻撃者がユーザーのパスワードを入手したとしても、認証に成功してデータにアクセスするには、パスワードだけでは不十分です。

レガシ認証を使用しているアプリからはテナントのリソースにアクセスできないようにするには、どうしたらいいでしょうか。 お勧めは、単純に条件付きアクセス ポリシーを使用して、それらのアプリをブロックすることです。 必要に応じて、特定のユーザーと特定のネットワークの場所だけに、レガシ認証に基づいたアプリの使用を許可します。




## <a name="implementation"></a>実装

このセクションでは、レガシ認証をブロックするために条件付きアクセス ポリシーを構成する方法について説明します。 

### <a name="block-legacy-authentication"></a>レガシ認証をブロックする 

条件付きアクセス ポリシーでは、リソースへのアクセスに使用するクライアント アプリに関連付ける条件を設定できます。 クライアント アプリの条件を使用すると、**[Mobile apps and desktop clients]/(モバイル アプリとデスクトップ クライアント/)** に **[Other clients]\(その他のクライアント\)** を選択して、対象範囲をレガシ認証を使用しているアプリに絞り込むことができます。

![その他のクライアント](./media/block-legacy-authentication/01.png)

これらのアプリへのアクセスをブロックするには、**[アクセスのブロック]** を選択する必要があります。

![アクセスのブロック](./media/block-legacy-authentication/02.png)


### <a name="select-users-and-cloud-apps"></a>ユーザーとクラウド アプリを選択する

組織へのレガシ認証をブロックする場合、恐らくは、以下を選択してこれを行うことを検討するでしょう。

- すべてのユーザー

- すべてのクラウド アプリ

- アクセスのブロック
 

![割り当て](./media/block-legacy-authentication/03.png)



この構成は、条件付きアクセス ポリシーの[ベスト プラクティス](best-practices.md)に違反するので、Azure には、このようなポリシーを作成しないための安全機能が用意されています。
 
![サポートされていないポリシー構成](./media/block-legacy-authentication/04.png)


"*すべてのユーザーとすべてのクラウド アプリのブロック*" では、組織全体をテナントへのサインオンからブロックする可能性があるため、安全機能が必要です。 ベスト プラクティスの最小要件を満たすには、少なくとも 1 人のユーザーを除外する必要があります。 ディレクトリ ロールを除外することもできます。

![サポートされていないポリシー構成](./media/block-legacy-authentication/05.png)


1 人のユーザーをポリシーから除外することで、この安全機能を利用できます。 理想的には、数個の [Azure AD の緊急アクセス管理アカウント](../users-groups-roles/directory-emergency-access.md)を定義し、それらのアカウントをポリシーから除外します。
 

## <a name="policy-deployment"></a>ポリシーの展開

ポリシーを運用環境に導入する前に、次の点に注意します。
 
- **サービス アカウント** -サービス アカウントとして使用されるユーザー アカウント、または会議室の電話などのデバイスによって使用されるユーザー アカウントを特定します。 これらのアカウントに必ず強固なパスワードを設定して、除外されるグループに追加します。
 
- **サインイン レポート** - サインイン レポートを確認して、**その他のクライアント**のトラフィックを検索します。 最上位の使用率を特定して、なぜそれが使用されているのかを調査します。 通常、トラフィックは、最新の認証を使用していない従来の Office クライアント、またはサードパーティの電子メール アプリによって生成されています。 これらのアプリからの使用がなくなるように、計画を立てます。あるいは、影響が少ない場合は、これらのアプリを今後は使用できないことをユーザーに通知します。
 
詳細については、「[新しいポリシーはどのように展開する必要がありますか。](best-practices.md#how-should-you-deploy-a-new-policy)」を参照してください。



## <a name="what-you-should-know"></a>知っておくべきこと

**その他のクライアント**を対象とするポリシーを構成すると、SPConnect などの特定のクライアントから組織全体がブロックされます。 このブロックは、旧バージョンのクライアントが想定していない方法で認証されるために発生します。 この問題は、古い Office クライアントなどの重要な Office アプリケーションには適用されません。

ポリシーが有効になるまで、最大で 24 時間かかる可能性があります。

その他のクライアント条件には、利用可能なすべての制御の許可を選択できます。ただし、エンドユーザーのエクスペリエンスは常に同じ、つまり、アクセスがブロックされます。

その他のクライアント条件の横にあるその他の条件はすべて、構成可能です。




## <a name="next-steps"></a>次の手順

条件付きアクセス ポリシー構成についてまだよく知らない場合は、「[Azure Active Directory の条件付きアクセスを使用して特定のアプリケーションに対して MFA を必要にする](app-based-mfa.md)」で例を参照してください。
