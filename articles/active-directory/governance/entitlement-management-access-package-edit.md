---
title: Azure AD エンタイトルメント管理 (プレビュー) で既存のアクセス パッケージを編集および管理する - Azure Active Directory
description: Azure Active Directory エンタイトルメント管理 (プレビュー) で既存のアクセス パッケージを編集および管理する方法を説明します。
services: active-directory
documentationCenter: ''
author: msaburnley
manager: daveba
editor: ''
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.subservice: compliance
ms.date: 09/26/2019
ms.author: ajburnle
ms.reviewer: ''
ms.collection: M365-identity-device-management
ms.openlocfilehash: 864a6476ad894952a2ef877d534ffe8a86e07819
ms.sourcegitcommit: aef6040b1321881a7eb21348b4fd5cd6a5a1e8d8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/09/2019
ms.locfileid: "72170024"
---
# <a name="edit-and-manage-an-existing-access-package-in-azure-ad-entitlement-management-preview"></a>Azure AD エンタイトルメント管理 (プレビュー) で既存のアクセス パッケージを編集および管理する

> [!IMPORTANT]
> Azure Active Directory (Azure AD) のエンタイトルメント管理は現在、パブリック プレビュー段階です。
> このプレビュー バージョンはサービス レベル アグリーメントなしで提供されています。運用環境のワークロードに使用することはお勧めできません。 特定の機能はサポート対象ではなく、機能が制限されることがあります。
> 詳しくは、[Microsoft Azure プレビューの追加使用条件](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)に関するページをご覧ください。

アクセス パッケージを使用すると、アクセス パッケージの存続期間にわたってアクセスを自動的に管理するリソースとポリシーの 1 回限りのセットアップを行うことができます。 アクセス パッケージ マネージャーは、新規のリソースへのユーザーのアクセスのプロビジョニングや以前のリソースからのアクセスの削除について心配することなく、アクセス パッケージ内のリソースをいつでも変更できます。 ポリシーはいつでも更新できます。ただし、ポリシーの変更は新しいアクセスのみに影響を与えます。

この記事では、既存のアクセス パッケージを編集および管理する方法について説明します。

## <a name="add-resource-roles"></a>リソース ロールを追加する

リソース ロールは、リソースに関連付けられたアクセス許可を集めたものです。 ユーザーがリソースを要求できるようにする方法は、アクセス パッケージにリソース ロールを追加することです。 追加できるリソース ロールは、グループ、Teams、アプリケーション、SharePoint サイトです。

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. 左側のメニューで **[リソース ロール]** をクリックします。

1. **[リソース ロールの追加]** をクリックして、[リソースのロールをアクセス パッケージに追加する] ページを開きます。

    ![アクセス パッケージ - リソース ロールの追加](./media/entitlement-management-access-package-edit/resource-roles-add.png)

1. グループ、チーム、アプリケーション、または SharePoint サイトのどれを追加するかに応じて、次のリソース ロールのセクションのいずれかの手順を行います。

### <a name="add-a-group-or-team-resource-role"></a>グループまたはチームのリソース ロールを追加する

ユーザーにアクセス パッケージが割り当てられているときは、エンタイトルメント管理で自動的にユーザーをグループまたは Microsoft Team に追加することができます。 

- グループまたはチームがアクセス パッケージに含まれていて、ユーザーがそのアクセス パッケージに割り当てられている場合、まだ存在しない場合はユーザーがそのグループまたはチームに追加されます。
- ユーザーのアクセス パッケージの割り当てが期限切れになると、現時点でユーザーに同じグループまたはチームが含まれている別のアクセス パッケージへの割り当てがある場合を除き、ユーザーはその同じグループまたはチームから削除されます。

あらゆる [Azure AD セキュリティ グループまたは Office 365 グループ](../fundamentals/active-directory-groups-create-azure-portal.md)を選択できます。  管理者はカタログにグループを追加することができます。カタログ所有者は、グループの所有者である場合は、カタログにグループを追加することができます。 グループを選択する際は、次の Azure AD の制約に注意してください。

- メンバーとしてグループまたはチームに追加されたユーザー (ゲストを含む) は、そのグループまたはチームの他のすべてのメンバーを表示できます。
- Azure AD では、Azure AD Connect を使用して Windows Server Active Directory から同期されたグループまたは、Exchange Online で配布グループとして作成されたグループのメンバーシップを変更できません。  
- 動的グループのメンバーシップはメンバーの追加または削除によって更新することはできないため、動的グループのメンバーシップはエンタイトルメント管理での使用には適していません。

詳細については、「[グループを比較する](/office365/admin/create-groups/compare-groups)」と「[Office 365 Groups および Microsoft Teams](/microsoftteams/office-365-groups)」を参照してください。

1. **[リソースのロールをアクセス パッケージに追加する]** ページで、 **[Groups and Teams]\(Groups と Teams\)** をクリックして [グループの選択] ウィンドウを開きます。

1. アクセス パッケージに含めるグループと Teams を選択します。

    ![アクセス パッケージ - リソース ロールの追加 - グループの選択](./media/entitlement-management-access-package-edit/group-select.png)

1. **[選択]** をクリックします。

    グループまたはチームを選択すると、 **[サブ タイプ]** 列に次のいずれかのサブタイプが表示されます。

    |  |  |
    | --- | --- |
    | セキュリティ | リソースにアクセスを付与するために使用されます。 |
    | ディストリビューション | ユーザー グループに通知を送信するために使用されます。 |
    | O365 | Teams が有効になっていない Office 365 グループ。 社内と社外の両方でユーザー間の共同作業に使用されます。 |
    | チーム | Teams が有効になっている Office 365 グループ。 社内と社外の両方でユーザー間の共同作業に使用されます。 |

1. **[ロール]** 一覧で **[所有者]** または **[メンバー]** を選択します。

    通常は [メンバー] ロールを選択します。 所有者ロールを選択すると、ユーザーが他のメンバーまたは所有者を追加または削除できるようになります。

    ![アクセス パッケージ - グループまたはチームのリソース ロールの追加](./media/entitlement-management-access-package-edit/group-role.png)

1. **[追加]** をクリックします。

    アクセス パッケージへの既存の割り当てがあるユーザーは、追加されると自動的にこのグループまたはチームのメンバーになります。

### <a name="add-an-application-resource-role"></a>アプリケーションのリソース ロールを追加する

ユーザーにアクセス パッケージが割り当てられている場合は、Azure AD で、Azure AD エンタープライズ アプリケーション (SaaS アプリケーションと、Azure AD との間で認証連携された組織のアプリケーションの両方を含む) へのアクセスを、ユーザーに自動的に割り当てることができます。 フェデレーション シングル サインオンを使用して Azure AD と統合されるアプリケーションでは、Azure AD で、アプリケーションに割り当てられたユーザーに対するフェデレーション トークンが発行されます。

アプリケーションには複数のロールを割り当てることができます。 アプリケーションをアクセス パッケージに追加する場合、そのアプリケーションに複数のロールがある場合は、それらのユーザーに適切なロールを指定する必要があります。  アプリケーションを開発する場合、これらのロールをアプリケーションに指定する方法の詳細については、[SAML トークン内に発行されるロール要求を構成する](../develop/active-directory-enterprise-app-role-management.md)方法に関する記事をご覧ください。

アプリケーション ロールがアクセス パッケージに含められたら、次のようになります。

- ユーザーがそのアクセス パッケージに割り当てられると、まだ存在しない場合は、ユーザーがそのグループに追加されます。
- ユーザーのアクセス パッケージの割り当てが期限切れになると、ユーザーがそのアプリケーション ロールが含まれている別のアクセス パッケージへの割り当てを持っている場合を除き、ユーザーのアクセス権はそのアプリケーションから削除されます。

アプリケーションを選択する際は、次の点を考慮します。

- アプリケーションは、グループもそのロールに割り当てられている場合もあります。  アクセス パッケージ内のアプリケーション ロールの代わりにグループを追加することができます。ただし、そのアプリケーションは、ユーザーにはマイ アクセス ポータルでアクセス パッケージの一部として表示されません。

1. **[リソースのロールをアクセス パッケージに追加する]** ページで、 **[アプリケーション]** をクリックして [Select applications]\(アプリケーションの選択) ウィンドウを開きます。

1. アクセス パッケージに含めるアプリケーションを選択します。

    ![アクセス パッケージ - リソース ロールの追加 - アプリケーションの選択](./media/entitlement-management-access-package-edit/application-select.png)

1. **[選択]** をクリックします。

1. **[ロール]** 一覧でアプリケーション ロールを選択します。

    ![アクセス パッケージ - アプリケーションのリソース ロールの追加](./media/entitlement-management-access-package-edit/application-role.png)

1. **[追加]** をクリックします。

    アクセス パッケージへの既存の割り当てがあるユーザーは、追加されると自動的にこのアプリケーションへのアクセス権が付与されます。

### <a name="add-a-sharepoint-site-resource-role"></a>SharePoint サイトのリソース ロールを追加する

Azure AD では、ユーザーにアクセス パッケージが割り当てられたときに、そのユーザーに自動的に SharePoint Online サイトまたは SharePoint Online のサイト コレクションへのアクセス権を割り当てられることができます。

1. **[リソースのロールをアクセス パッケージに追加する]** ページで、 **[SharePoint サイト]** をクリックして [Select SharePoint Online sites]\(SharePoint Online サイトの選択) ウィンドウを開きます。

1. アクセス パッケージに含める SharePoint Online サイトを選択します。

    ![アクセス パッケージ - リソース ロールの追加 - SharePoint Online サイトの選択](./media/entitlement-management-access-package-edit/sharepoint-site-select.png)

1. **[選択]** をクリックします。

1. **[ロール]** の一覧で、SharePoint Online サイトのロールを選択します。

    ![アクセス パッケージ - SharePoint Online サイトのリソース ロールの追加](./media/entitlement-management-access-package-edit/sharepoint-site-role.png)

1. **[追加]** をクリックします。

    アクセス パッケージへの既存の割り当てがあるユーザーは、追加されると自動的に SharePoint Online サイトへのアクセス権が付与されます。

## <a name="remove-resource-roles"></a>リソース ロールを削除する

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. 左側のメニューで **[リソース ロール]** をクリックします。

1. リソース ロールの一覧で、削除するリソース ロールを見つけます。

1. 省略記号 ( **...** ) をクリックして **[Remove resource role]\(リソース ロールの削除)** をクリックします。

    アクセス パッケージへの既存の割り当てがあるユーザーは、削除されると自動的にこのリソース ロールへのアクセス権が取り消されます。

## <a name="add-a-new-policy"></a>新しいポリシーを追加する

アクセス パッケージを要求できるユーザーを指定する方法は、ポリシーを作成することです。 異なるユーザーのセットに異なる承認と有効期限が設定された割り当てを付与できるようにしたい場合は、1 つのアクセス パッケージ用の複数のポリシーを作成できます。 1 つのポリシーを使用して、内部ユーザーと外部ユーザーを同じアクセス パッケージに割り当てることはできません。 ただし、同じアクセス パッケージ内に 2 つのポリシー (内部ユーザー用のポリシーと外部ユーザー用のポリシー) を作成することができます。 ユーザーに適用されるポリシーが複数ある場合は、要求時に、割り当て先にするポリシーを選択するよう求められます。

次の図は、既存のアクセス パッケージ用のポリシーを作成する手順の概要を示しています。

![ポリシー プロセスを作成する](./media/entitlement-management-access-package-edit/policy-process.png)

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. **[ポリシー]** をクリックし、 **[ポリシーの追加]** をクリックします。

1. ポリシーの名前と説明を入力します。

    ![名前と説明を含むポリシーを作成する](./media/entitlement-management-access-package-edit/policy-name-description.png)

1. **[Users who can request access]\(アクセスを要求できるユーザー)** での選択内容に基づいて、以降のポリシーに関するセクションのいずれかの手順を実行します。

[!INCLUDE [Entitlement management policy](../../../includes/active-directory-entitlement-management-policy.md)]

## <a name="edit-an-existing-policy"></a>既存のポリシーを編集する

ポリシーはいつでも編集できます。 ポリシーの有効期限を変更する場合、既に承認待ちまたは承認済みの状態になっている要求の有効期限は変更されません。

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. **[ポリシー]** をクリックして、編集するポリシーをクリックします。

    ページの下部で **[ポリシー詳細]** ウィンドウが開きます。

    ![アクセス パッケージ - [ポリシーの詳細] ウィンドウ](./media/entitlement-management-access-package-edit/policy-details.png)

1. **[編集]** をクリックしてポリシーを編集します。

    ![アクセス パッケージ - ポリシーの編集](./media/entitlement-management-access-package-edit/policy-edit.png)

1. 完了したら、 **[更新]** をクリックします。

## <a name="directly-assign-a-user"></a>ユーザーを直接割り当てる

場合によっては、ユーザーがアクセス パッケージを要求するプロセスをたどらなくて済むように、アクセス パッケージに特定のユーザーを直接割り当てることもできます。 ユーザーを直接割り当てるには、アクセス パッケージに、管理者に直接割り当てを許可するポリシーが必要です。

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. 左側のメニューで **[割り当て]** をクリックします。

1. **[新しい割り当て]** をクリックして、[Add user to access package]\(アクセス パッケージにユーザーを追加する) を開きます。

    ![割り当て - アクセス パッケージにユーザーを追加する](./media/entitlement-management-access-package-edit/assignments-add-user.png)

1. **[ユーザーの追加]** をクリックして、アクセス パッケージを割り当てるユーザーを選択します。

1. **[ポリシーの選択]** の一覧で、[[None (administrator direct assignments only)]\(なし (管理者による直接割り当てのみ))](#policy-none-administrator-direct-assignments-only) の設定があるポリシーを選択します。

    このアクセス パッケージにこの種類のポリシーがない場合は、 **[新しいポリシーの作成]** をクリックして作成することができます。

1. 選択したユーザーの割り当てを開始および終了する日付と時刻を設定します。 終了日が指定されていない場合は、ポリシーの有効期限の設定が使用されます。

1. 必要に応じて、記録保存のために直接割り当ての妥当性を入力します。

1. **[追加]** をクリックして、選択したユーザーをアクセス パッケージに直接割り当てます。

    しばらくしてから **[更新]** をクリックすると、割り当ての一覧にユーザーが表示されます。

## <a name="view-who-has-an-assignment"></a>割り当てられているユーザーを表示する

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. **[割り当て]** をクリックして、アクティブな割り当ての一覧を表示します。

1. 特定の割り当てをクリックすると、その他の詳細が表示されます。

1. 必ずしもすべてのリソース ロールが適切にプロビジョニングされなかった割り当ての一覧を表示するには、フィルターの状態をクリックし、 **[Delivering]\(配信中)** を選択します。

    **[要求]** ページでユーザーの対応する要求を見つけることで、配信エラーのその他の詳細を確認できます。

1. 有効期限切れの割り当てを確認するには、フィルターの状態をクリックし、 **[Expired]\(有効期限切れ)** を選択します。

1. フィルター処理された一覧の CSV ファイルをダウンロードするには、 **[ダウンロード]** をクリックします。

## <a name="view-requests"></a>要求を表示する

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. **[要求]** をクリックします。

1. 特定の要求をクリックすると、その他の詳細が表示されます。

## <a name="view-a-requests-delivery-errors"></a>要求の配信エラーを表示する

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. **[要求]** をクリックします。

1. 表示する要求を選択します。

    要求に配信エラーが発生した場合、要求の状態は **[Undelivered]\(未配信)** になり、副状態は **[Partially delivered]\(一部配信済み)** になります。

    配信エラーが発生した場合は、要求の詳細ウィンドウに配信エラーの数が表示されます。

1. この数をクリックすると、要求のすべての配信エラーが表示されます。

## <a name="cancel-a-pending-request"></a>保留中の要求をキャンセルする

キャンセルできるのは、まだ配信されていない保留中の要求のみです。

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. **[要求]** をクリックします。

1. キャンセルする要求をクリックします

1. 要求の詳細ウィンドウで、 **[要求のキャンセル]** をクリックします。

## <a name="copy-my-access-portal-link"></a>マイ アクセス ポータルのリンクをコピーする

ディレクトリ内のほとんどのユーザーは、マイ アクセス ポータルにサインインでき、要求できるアクセス パッケージの一覧を自動的に表示できます。 ただし、まだディレクトリに含まれていない外部のビジネス パートナーには、アクセス パッケージの要求に使用できるリンクを送信する必要があります。 

マイ アクセス ポータルのリンクを内部のビジネス パートナーに送信するときは、リンク全体をコピーすることが大切です。 そうすることで、パートナーが確実にディレクトリのポータルにアクセスして要求を行うことができます。 

リンクは "myaccess" で始まり、ディレクトリ ヒントを含み、アクセス パッケージ ID で終わります。 次のすべての要素がリンクに含まれることを確認してください。

 `https://myaccess.microsoft.com/@<directory_hint>#/access-packages/<access_package_id>`

アクセス パッケージが外部ユーザーに対して有効になっており、外部ユーザーのディレクトリ用のポリシーがあれば、外部ユーザーはマイ アクセス ポータルのリンクを使用してアクセス パッケージを要求することができます。

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. [概要] ページで、 **[My Access portal link]\(マイ アクセス ポータルのリンク)** をコピーします。

    ![アクセス パッケージの概要 - マイ アクセス ポータルのリンク](./media/entitlement-management-shared/my-access-portal-link.png)

1. リンクを外部のビジネス パートナーにメール送信または送信します。 外部のビジネス パートナーは、そのユーザーとリンクを共有して、アクセス パッケージを要求することができます。

## <a name="change-the-hidden-setting"></a>非表示の設定を変更する

アクセス パッケージは既定では表示されます。 つまり、ポリシーでユーザーにアクセス パッケージの要求が許可されている場合、そのユーザーには自動的に、マイ アクセス ポータルにアクセス パッケージの一覧が表示されます。

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. [概要] ページで、 **[編集]** をクリックします。

1. **[非表示]** 設定を設定します。

    **[いいえ]** に設定すると、アクセス パッケージはユーザーのマイ アクセス ポータルに表示されます。

    **[はい]** に設定すると、アクセス パッケージはユーザーのマイ アクセス ポータルに表示されません。 ユーザーがアクセス パッケージを表示できるのは、アクセス パッケージへの直接の**マイ アクセス ポータルのリンク**を持っている場合のみです。

## <a name="delete"></a>削除

アクセス パッケージは、アクティブなユーザー割り当てがない場合にのみ削除できます。

**事前に必要なロール:** グローバル管理者、ユーザー管理者、カタログ所有者、またはアクセス パッケージ マネージャー

1. Azure portal で **[Azure Active Directory]** をクリックし、 **[Identity Governance]** をクリックします。

1. 左側のメニューで **[アクセス パッケージ]** をクリックして、アクセス パッケージを開きます。

1. 左側のメニューで **[割り当て]** をクリックし、すべてのユーザーのアクセス権を削除します。

1. 左側のメニューで、 **[概要]** をクリックしてから、 **[削除]** をクリックします。

1. 表示される削除メッセージで、 **[はい]** をクリックします。

## <a name="when-are-changes-applied"></a>変更が適用されるタイミング

エンタイトルメント管理では、Azure AD で、アクセス パッケージ内の割り当てとリソースの一括変更が 1 日に数回処理されます。 そのため、割り当てを行ったりアクセス パッケージのリソース ロールを変更したりする場合は、Azure AD でその変更を行うのに最大 24 時間かかり、それに加えてそれらの変更を他の Microsoft Online Services や接続されている SaaS アプリケーションに伝達する時間がかかる可能性があります。 変更がほんの一部のオブジェクトにしか影響しない場合は、変更が Azure AD で適用された後、Azure AD の他のコンポーネントがその変更を検出して SaaS アプリケーションを更新するのに数分しかかからない可能性があります。 変更が何千ものオブジェクトに影響する場合、変更にはさらに長い時間がかかります。 たとえば、2 つのアプリケーションと 100 のユーザー割り当てを含むアクセス パッケージがあり、そのアクセス パッケージに SharePoint サイトのロールを追加する場合は、すべてのユーザーがその SharePoint サイトのロールに含められるまで遅延が発生する場合があります。 Azure AD 監査ログ、Azure AD プロビジョニング ログ、および SharePoint サイトの監査ログで、進行状況を監視することができます。

## <a name="next-steps"></a>次の手順

- [要求プロセスとメール通知](entitlement-management-process.md)
