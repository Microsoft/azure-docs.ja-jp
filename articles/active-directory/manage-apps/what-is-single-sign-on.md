---
title: アプリケーションへのシングル サインオン - Azure Active Directory | Microsoft Docs
description: Azure Active Directory (Azure AD) でアプリケーションを構成するときに、シングル サインオンの方法を選択する方法について説明します。 ユーザーがすべてのアプリケーションのパスワードを覚えておく必要がないようにシングル サインオンを使用し、アカウント管理の管理を簡素化します。
services: active-directory
author: barbkess
manager: mtillman
ms.service: active-directory
ms.component: app-mgmt
ms.workload: identity
ms.topic: conceptual
ms.date: 12/07/2018
ms.author: barbkess
ms.reviewer: arvindh
ms.openlocfilehash: 627bd114504de20517abcd05f45dc6c58fe80117
ms.sourcegitcommit: e37fa6e4eb6dbf8d60178c877d135a63ac449076
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/13/2018
ms.locfileid: "53322706"
---
# <a name="single-sign-on-to-applications-in-azure-active-directory"></a>Azure Active Directory でのアプリケーションへのシングル サインオン
Azure Active Directory (Azure AD) でアプリケーションを構成するときに、最も適切なシングル サインオンの方法を選択する方法について説明します。 

- **シングル サインオンの使用時**には、ユーザーは 1 つのアカウントで、ドメインに参加しているデバイス、会社のリソース、サービスとしてのソフトウェア (SaaS) アプリケーション、および Web アプリケーションに 1 回サインインします。 サインイン後、ユーザーは Office 365 ポータルや Azure AD の MyApps アクセス パネルからアプリケーションを起動できます。 管理者は、ユーザー アカウントの管理を一元化し、グループのメンバーシップに基づいてアプリケーションに対するユーザー アクセスを自動的に追加または削除できます。 

- **シングル サインオンを使用しない**場合、ユーザーはアプリケーション固有のパスワードを覚えておき、各アプリケーションにサインインする必要があります。 IT スタッフは、Office 365、Box、Salesforce など、アプリケーションごとにユーザー アカウントを作成し、更新する必要があります。 ユーザーはパスワードを覚えておくのに加えて、各アプリケーションにサインインするのに時間を費やす必要があります。

この記事では、シングル サインオンの方法について説明しており、お使いのアプリケーションに最適な方法を選択するのに役立ちます。

## <a name="choosing-a-single-sign-on-method"></a>シングル サインオンの方法の選択

シングル サインオンのためにアプリケーションを構成する方法はいくつかあります。 アプリケーションにシングル サインオンする方法の選択は、アプリケーションが認証のためにどのように構成されているかに左右されます。 無効化を除くすべてのシングル サインオンの方法で、ユーザーは 2 回目のサインオンを必要とせずに、アプリケーションに自動的にサインインされます。  

- クラウド アプリケーションでは、シングル サインオンのために、SAML による方法、パスワード ベースの方法、リンクされる方法、または無効化の方法を使用できます。 SAML は、最も安全なシングル サインオンの方法です。
- オンプレミスのアプリケーションでは、シングル サインオンのために、パスワード ベースの統合 Windows 認証、ヘッダー ベースの方法、リンクされる方法、または無効化の方法を使用できます。 オンプレミスの選択肢は、アプリケーションのアプリケーション プロキシが構成されている場合に機能します。 

このフローチャートは、実際の状況に最適なシングル サインオンの方法を判断するのに役立ちます。 

![シングル サインオンの方法を選択する](./media/what-is-single-sign-on/choose-single-sign-on-method.png)

次の表は、シングル サインオンの方法と、詳細情報へのリンクをまとめたものです。 

| シングル サインオンの方法 | アプリケーションの種類 | いつ使用するか |
| :------ | :------- | :----- |
| [SAML](#saml-sso) | クラウドのみ | できる限り SAML を使用します。 SAML は、アプリがいずれかの SAML プロトコルを使用するように構成されている場合に機能します。|
| [パスワード ベース](#password-based-sso) | クラウドとオンプレミス | アプリケーションがユーザー名とパスワードを使用して認証する場合に使用します。 パスワードベースのシングル サインオンでは、セキュリティで保護されたアプリケーションのパスワードの保存と、Web ブラウザーの拡張機能またはモバイル アプリを使用した再生が可能になります。 この方法では、アプリケーションによって提供される既存のサインイン プロセスが使用されますが、管理者がパスワードを管理できるようになります。 |
| [リンク](#linked-sso) | クラウドとオンプレミス | アプリケーションが別の ID プロバイダー サービスでのシングル サインオンのために構成されている場合は、リンクされるシングル サインオンを使用します。 このオプションは、アプリケーションにシングル サインオンを追加するものではありません。 ただし、アプリケーションには、Active Directory フェデレーション サービス (AD FS) などの別のサービスを使って既にシングル サインオンが実装されている場合があります。|
| [Disabled](#disabled-sso) | クラウドとオンプレミス | シングル サインオンのためにアプリを構成する準備ができていない場合は、無効化のシングル サインオンを使用します。 ユーザーは、そのアプリケーションを起動するたびにユーザー名とパスワードを入力する必要があります。|
| [統合 Windows 認証 (IWA)](#integrated-windows-authentication-iwa-sso) | オンプレミスのみ | [統合 Wndows 認証 (IWA)](/aspnet/web-api/overview/security/integrated-windows-authentication) または要求に対応するアプリケーションには、このシングル サインオンの方法を使用します。 アプリケーション プロキシ コネクタは、アプリケーションに対して Kerberos 制約付き委任 (KCD) を使用し、ユーザーを認証します。 | 
| [ヘッダーベース](#header-based-sso) | オンプレミスのみ | アプリケーションが認証のためにヘッダーを使用する場合は、ヘッダー ベースのシングル サインオンを使用します。 ヘッダー ベースのシングル サインオンには、Azure Active Directory 用の PingAccess が必要です。 アプリケーション プロキシは、Azure AD を使用してユーザーを認証してから、コネクタ サービス経由でトラフィックを渡します。  | 

## <a name="saml-sso"></a>SAML SSO
**SAML によるシングル サインオン**では、ユーザーの Azure AD アカウントを使用して、Azure AD がアプリケーションに対して認証を行います。 Azure AD は、接続プロトコルを通してアプリケーションにシングル サインオンの情報を伝達します。 SAML ベースのシングル サインオンでは、SAML 要求で定義するルールに基づいて、ユーザーを特定のアプリケーション ロールにマップできます

SAML ベースのシングル サインオンの特徴:

- パスワード ベースのシングル サインオンや、その他すべてのサインオンの方法よりも安全です。
- シングル サインオンの推奨される方法です。

SAML ベースのシングル サインオンは、以下のいずれかのプロトコルを使用するアプリケーションに対してサポートされます。

- SAML 2.0
- WS-Federation

SAML ベースのシングル サインオンのためにアプリケーションを構成するには、[SAML ベースのシングル サインオンを構成する](configure-single-sign-on-portal.md)ことに関するページを参照してください。 また、多くのアプリケーションに、特定のアプリケーションに対して SAML ベースのシングル サインオンを構成する手順を示す、[アプリケーション固有のチュートリアル](../saas-apps/tutorial-list.md)が用意されています。 

SAML プロトコルの動作方法の詳細については、「[シングル サインオンの SAML プロトコル](../develop/single-sign-on-saml-protocol.md)」を参照してください。

## <a name="password-based-sso"></a>パスワードベースの SSO
パスワード ベースのサインオンでは、エンド ユーザーは初回アクセス時にユーザー名とパスワードを使用してアプリケーションにサインインします。 最初のサインイン後は、Azure Active Directory がユーザー名とパスワードをアプリケーションに提供します。 

パスワード ベースのシングル サインオンでは、アプリケーションによって提供される既存の認証プロセスが使用されます。 アプリケーションでパスワードによるシングル サインオンを有効にすると、Azure AD がそのアプリケーション用のユーザー名とパスワードを収集し、安全に保存します。 ユーザーの資格情報は、暗号化された状態でディレクトリ内に保存されます。 

パスワード ベースのシングル サインオンは以下の場合に使用します。

- アプリケーションで SAML シングル サインオン プロトコルをサポートできない。
- アプリケーションは、アクセス トークンとヘッダーではなく、ユーザー名とパスワードを使用して認証する。

パスワードベースのシングル サインオンは、HTML ベースのサインイン ページを持つどのクラウド ベース アプリケーションでもサポートされます。 ユーザーは、以下の任意のブラウザーを使用できます。

- Internet Explorer 11 - Windows 7 以降
- Microsoft Edge - Windows 10 Anniversary Edition 以降 
- Chrome - Windows 7 以降、MacOS X 以降
- Firefox 26.0 以降 - Windows XP SP2 以降、Mac os X 10.6 以降

パスワード ベースのシングル サインオンのためにクラウド アプリケーションを構成するには、「[パスワード シングル サインオンに対応するようにアプリケーションを構成する](application-sign-in-problem-password-sso-gallery.md#configure-the-application-for-password-single-sign-on)」を参照してください。

アプリケーション プロキシ経由のシングル サインオンのためにオンプレミス アプリケーションを構成するには、「[アプリケーション プロキシを使用したシングル サインオン用のパスワードの保管](application-proxy-configure-single-sign-on-password-vaulting.md)」を参照してください

### <a name="managing-credentials-for-password-based-sso"></a>パスワード ベースの SSO 用資格情報の管理

アプリケーションに対してユーザーを認証するため、Azure AD はディレクトリからユーザーの資格情報を取得し、それをアプリケーションのサインイン ページに入力します。  Azure AD は、Web ブラウザーの拡張機能またはモバイル アプリを介して安全にユーザーの資格情報を渡します。 このプロセスによって、管理者はユーザーの資格情報を管理できるようになり、ユーザーは自分のパスワードを覚える必要がなくなります。

> [!IMPORTANT]
> 自動化されたサインイン プロセス中、資格情報はエンドユーザーに対して難読化されます。 しかし技術的には、Web デバッグ ツールを使用して資格情報を知ることができます。 ユーザーと管理者は、ユーザーが資格情報を直接入力したかのように、同じセキュリティ ポリシーに従う必要があります。

アプリケーションごとのパスワードは、Azure AD 管理者またはユーザーのいずれかが管理できます。

Azure AD 管理者が資格情報を管理する場合:  

- ユーザーがユーザー名とパスワードをリセットまたは記憶する必要はありません。 ユーザーは、アクセス パネルでアプリケーションをクリックするか、用意されているリンクから、アプリケーションにアクセスできます。
- 管理者は、資格情報に関する管理タスクを実行できます。 たとえば管理者は、ユーザー グループのメンバーシップと従業員の状態に応じて、アプリケーションへのアクセスを更新できます。
- 管理者は、管理用の資格情報を使用して、多くのユーザー間で共有されるアプリケーションへのアクセスを提供できます。 たとえば管理者は、アプリケーションにアクセスできるユーザー全員に、ソーシャル メディア アプリケーションやドキュメント共有アプリケーションへのアクセスを許可できます。

エンドユーザーが資格情報を管理する場合:

- ユーザーは、必要に応じて自分のパスワードを更新または削除することで、パスワードを管理できます。 
- 管理者は、この場合も、アプリケーションの新しい資格情報を設定できます。


## <a name="linked-sso"></a>リンクされた SSO
Azure AD は、リンクされたサインオンによって、既に別のサービスでのシングル サインオンのために構成されているシングル サインオンをアプリケーションに提供できます。 リンクされたアプリケーションは、Office 365 ポータルまたは Azure AD の MyApps ポータルで、エンドユーザーに表示できます。 たとえばユーザーは、Active Directory フェデレーション サービス 2.0 (AD FS) でシングル サインオン用に構成されているアプリケーションを、Office 365 ポータルから起動できます。 Office 365 ポータルまたは Azure AD の MyApps ポータルから起動される、リンクされたアプリケーションについても、追加のレポートが用意されています。 

リンクされたシングル サインオンは以下のために使用します。

- 一定期間にわたってアプリケーションを移行するときに、一貫したユーザー エクスペリエンスを提供します。 アプリケーションを Azure Active Directory に移行する場合は、リンクされたシングル サインオンを使用して、移行する予定のすべてのアプリケーションへのリンクをすばやく発行できます。  ユーザーはすべてのリンクを、[MyApps ポータル](../user-help/active-directory-saas-access-panel-introduction.md)または [Office 365 アプリケーション起動プログラム](https://support.office.com/article/meet-the-office-365-app-launcher-79f12104-6fed-442f-96a0-eb089a3f476a)で見つけられます。 アクセスしているのが、リンクされているアプリケーションであるか、移行されたアプリケーションであるか、ユーザーには分かりません。  

リンクされているアプリケーションでいったんユーザーが認証されたら、エンドユーザーにシングル サインオン アクセスが提供される前に、アカウント レコードを作成する必要があります。 このアカウント レコードのプロビジョニングは、自動的に実行することも、管理者が手動で実行することもできます。

## <a name="disabled-sso"></a>無効化 SSO

無効化モードは、そのアプリケーションに対してシングル サインオンが使用されないことを意味します。 シングル サインオンが無効になっている場合、ユーザーは 2 回認証することが必要な場合があります。 ユーザーは最初に Azure AD に対して認証してから、アプリケーションに対してサインインします。 

シングル サインオン無効化モードは以下のために使用します。

- このアプリケーションを Azure AD シングル サインオンと統合する準備ができていない場合、または
- アプリケーションの他の側面をテスト中の場合、または
- ユーザーを認証する必要ないオンプレミス アプリケーションへのセキュリティ層として。 無効化を指定したら、ユーザーは認証する必要があります。 

## <a name="integrated-windows-authentication-iwa-sso"></a>統合 Windows 認証 (IWA) による SSO

Azure AD アプリケーション プロキシは、[統合 Wndows 認証 (IWA)](/aspnet/web-api/overview/security/integrated-windows-authentication) を使用するアプリケーションや要求対応のアプリケーションに対するシングル サインオン (SSO) を提供します。 アプリケーションで IWA が使用されている場合、アプリケーション プロキシは Kerberos の制約付き委任 (KCD) を使用して、アプリケーションに対する認証を行います。 Azure Active Directory を信頼している要求対応のアプリケーションでは、ユーザーは Azure AD を使用して既に認証されているため、シングル サインオンが機能します。

統合 Windows 認証のシングル サインオン モードは以下のために使用します。

- IWA を使用して認証するオンプレミス アプリに対するシングル サインオンを提供する場合。 

IWA のためのオンプレミス アプリの構成については、[アプリケーション プロキシを使用して、アプリケーションに対するシングル サインオンのための Kerberos 制約付き委任を行う](application-proxy-configure-single-sign-on-with-kcd.md)ことに関するページを参照してください。 

### <a name="how-single-sign-on-with-kcd-works"></a>KCD を使ったシングル サインオンのしくみ
この図は、IWA を使用するオンプレミス アプリケーションにユーザーがアクセスするときの流れを説明するものです。

![Microsoft AAD 認証のフロー図](./media/application-proxy-configure-single-sign-on-with-kcd/AuthDiagram.png)

1. ユーザーは、オンプレミスのアプリケーションにアプリケーション プロキシをとおしてアクセスするための URL を入力します。
2. この要求がアプリケーション プロキシによって Azure AD 認証サービスにリダイレクトされて、事前認証が行われます。 この時点で、Azure AD の認証および承認のポリシーのうち、該当するものが適用されます (たとえば多要素認証)。 ユーザーの正当性が確認された場合は、Azure AD によってトークンが作成されてユーザーに送信されます。
3. ユーザーは、このトークンをアプリケーション プロキシに渡します。
4. アプリケーション プロキシはトークンを検証し、トークンからユーザー プリンシパル名 (UPN) を取得します。 次に、二重に認証された、セキュリティで保護されたチャネルを介して要求、UPN、およびサービス プリンシパル名 (SPN) をコネクタに送信します。
5. コネクタは、オンプレミスの AD との間で、Kerberos の制約付き委任 (KCD) ネゴシエーションを使用します。このとき、ユーザーの偽装によってアプリケーションに対する Kerberos トークンを取得します。
6. Active Directory は、そのアプリケーション用の Kerberos トークンをコネクタに送信します。
7. コネクタは、AD から受信した Kerberos トークンを使用して、元の要求をアプリケーション サーバーに送信します。
8. アプリケーションからコネクタに応答が送信されます。この応答はその後、アプリケーション プロキシ サービスに返され、最後にユーザーに返されます。

## <a name="header-based-sso"></a>ヘッダーベースの SSO

ヘッダー ベースのシングル サインオンは、認証のために HTTP ヘッダーを使用するアプリケーションに対して機能しします。 このサインイン方法では、PingAccess というサード パーティの認証サービスが使用されます。 ユーザーは、Azure AD に対してのみ認証する必要があります。 

ヘッダー ベースのシングル サインオンは以下の場合に使用します。

- アプリケーションに対してアプリケーション プロキシと PingAccess が構成されている

ヘッダー ベースの認証を構成するには、[アプリケーション プロキシを使用したシングル サインオン用のヘッダー ベースの認証](application-proxy-configure-single-sign-on-with-ping-access.md)に関する記事を参照してください。 

### <a name="what-is-pingaccess-for-azure-ad"></a>PingAccess for Azure AD とは

ユーザーは PingAccess for Azure AD を使用して、認証にヘッダーを使用するアプリケーションへのアクセスとシングル サインオンを実現できます。 アプリケーション プロキシはこれらのアプリを他のアプリと同様に扱い、Azure AD を使ってアクセスを認証した後、コネクタ サービスを通してトラフィックを渡します。 認証の発生後、PingAccess サービスは Azure AD アクセス トークンを、アプリケーションに送信されるヘッダーの形式に変換します。

会社のアプリケーションを使用するためにサインインするユーザーは、いかなる違いにも気付きません。 ユーザーはいつもどおり、任意のデバイスでどこからでも作業を行うことができます。 アプリケーション プロキシ コネクタは、すべてのアプリケーションにリモート トラフィックをルーティングし、自動的に負荷分散を続けます。

### <a name="how-do-i-get-a-license-for-pingaccess"></a>PingAccess のライセンスを取得する方法

このシナリオは Azure Active Directory と PingAccess の連携によって実現されるため、その両方のサービスのライセンスが必要となります。 ただし、Azure Active Directory Premium サブスクリプションには、最大 20 のアプリケーションをカバーする基本的な PingAccess ライセンスが含まれています。 20 を超えるヘッダー ベースのアプリケーションを公開する必要がある場合は、PingAccess から追加のライセンスを購入できます。 

詳細については、「 [Azure Active Directory のエディション](../fundamentals/active-directory-whatis.md)」をご覧ください。

## <a name="related-articles"></a>関連記事
* [SaaS アプリケーションと Azure Active Directory との統合に関するチュートリアル](../saas-apps/tutorial-list.md)
* [シングル サインオンの構成に関するチュートリアル](configure-single-sign-on-portal.md)
* [アプリケーションへのアクセスの管理の概要](what-is-access-management.md)
* ダウンロード リンク:[シングル サインオンのデプロイ計画](https://aka.ms/SSODeploymentPlan)。


