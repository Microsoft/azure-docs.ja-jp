---
title: パスワードレスの認証方法を登録するように Azure AD で一時アクセス パスを構成する
description: 一時アクセス パス (TAP) を使用してパスワードレスの認証方法を登録できるように構成して、ユーザーが使用できるようにする方法について説明します
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: conceptual
ms.date: 02/12/2021
ms.author: justinha
author: inbarckms
manager: daveba
ms.reviewer: inbarckms
ms.collection: M365-identity-device-management
ms.openlocfilehash: 56d45119fa86ab47e6a625c628d8cb9763db83bd
ms.sourcegitcommit: e972837797dbad9dbaa01df93abd745cb357cde1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/14/2021
ms.locfileid: "100520760"
---
# <a name="configure-temporary-access-pass-in-azure-ad-to-register-passwordless-authentication-methods-preview"></a>パスワードレスの認証方法を登録するように Azure AD で一時アクセス パスを構成する (プレビュー)

パスワードレスの認証方法 (FIDO2 や Microsoft Authenticator アプリを使用したパスワードレスの電話によるサインインなど) は、ユーザーがパスワードを使用せずに安全にサインインできるようにします。 ユーザーは、次の 2 つの方法のいずれかでパスワードレスの方法をブートストラップできます。

- 既存の Azure AD 多要素認証方法を使用する 
- 一時アクセス パス (TAP) を使用する 

TAP は、管理者によって発行される期間限定のパスコードであり、強力な認証要件を満たし、パスワードレスの方法を含む他の認証方法をオンボードするために使用できます。 また、TAP を使用すると、ユーザーが FIDO2 セキュリティ キーや Microsoft Authenticator アプリなどの強力な認証要素を紛失したり忘れたりした場合でも簡単に回復することができます。ただし、新しい強力な認証方法を登録するには、サインインする必要があります。


この記事では、Azure portal を使用して Azure AD で TAP を有効にして使用する方法について説明します。 これらのアクションは、REST API を使用して実行することもできます。 

>[!NOTE]
>一時アクセス パスは、現在パブリック プレビューの段階です。 一部の機能がサポートされなかったり、機能が制限されたりすることがあります。 

## <a name="enable-the-tap-policy"></a>TAP ポリシーを有効にする

TAP ポリシーでは、テナントに作成されたパスの有効期間や、TAP を使用してサインインできるユーザーとグループなどの設定を定義します。 TAP を使用してサインインできるようにするには、まず認証方法ポリシーを有効にし、TAP を使用してサインインできるユーザーとグループを選択する必要があります。
すべてのユーザー用の TAP を作成できますが、それを使用してサインインできるのは、ポリシーに含まれているユーザーだけです。

グローバル管理者と認証方法ポリシー管理者の役割所有者は、TAP 認証方法ポリシーを更新できます。
TAP 認証方法のポリシーを構成するには、次の手順を実行します。

1. グローバル管理者として Azure portal にサインインし、 **[Azure Active Directory]**  >  **[セキュリティ]**  >  **[認証方法]**  >  **[一時アクセス パス]** の順にクリックします。
1. **[はい]** をクリックしてポリシーを有効にし、ポリシーが適用されているユーザーと、 **[全般]** の設定を選択します。

   ![TAP 認証方法ポリシーを有効にする方法のスクリーンショット](./media/how-to-authentication-temporary-access-pass/policy.png)

   次の表では、既定値と許可される値の範囲について説明します。


   | 設定          | 既定値 | 使用できる値               | 説明                                                                                                                                                                                                                                                                 |   |
   |------------------|----------------|------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---|
    最短有効期間 | 1 時間         | 10 ～ 43200 分 (30 日) | TAP が有効である最短時間 (分)。                                                                                                                                                                                                                         |   |
   | 最長有効期間 | 24 時間       | 10 ～ 43200 分 (30 日) | TAP が有効である最長時間 (分)。                                                                                                                                                                                                                         |   |
   | 既定の有効期間 | 1 時間         | 10 ～ 43200 分 (30 日) | 既定値は、ポリシーによって構成される最短および最長の有効期間内で、個々のパスによってオーバーライドできます                                                                                                                                                |   |
   | 1 回限りの使用     | False          | True/False                 | ポリシーが false に設定されている場合、テナントのパスは、その有効期間 (最大有効期間) 中に 1 回または複数回使用できます。 TAP ポリシーで 1 回限りの使用を強制することで、テナントに作成されたすべてのパスが 1 回限りの使用として作成されます。 |   |
   | 長さ           | 8              | 8 ～ 48 文字              | パスコードの長さを定義します。                                                                                                                                                                                                                                      |   |

## <a name="create-a-tap-in-the-azure-ad-portal"></a>Azure AD ポータルで TAP を作成する

TAP ポリシーを有効にした後、Azure AD でユーザー用の TAP を作成できます。 以下のロールでは、TAP に関連する次の操作を実行できます。

- グローバル管理者は、任意のユーザー (自分以外) の TAP を作成、削除、および表示することができます
- 特権認証管理者は、管理者とメンバー (自分以外) の TAP を作成、削除、および表示することができます
- 認証管理者は、メンバー (自分以外) の TAP を作成、削除、表示することができます
- グローバル管理者は、ユーザーの TAP の詳細を表示できます (コード自体を読み取る必要はありません)。

TAP を作成するには、次の手順を実行します。

1. グローバル管理者、特権認証管理者、または認証管理者のいずれかとしてポータルにサインインします。 
1. **[Azure Active Directory]** をクリックし、[ユーザー] を参照して、 *[Chris Green]* などのユーザーを選択してから、 **[認証方法]** を選択します。
1. 必要に応じて、 **[新しいユーザー認証方法のエクスペリエンスを試す]** ためのオプションを選択します。
1. **[認証方法の追加]** のオプションを選択します。
1. **[方法の選択]** で、 **[一時アクセス パス (プレビュー)]** をクリックします。
1. カスタムのアクティベーション時間または期間を定義し、 **[追加]** をクリックします。

   ![TAP を作成する方法のスクリーンショット](./media/how-to-authentication-temporary-access-pass/create.png)

1. 追加されると、TAP の詳細が表示されます。 実際の TAP 値をメモしておきます。 この値を、ユーザーに伝えます。 **[OK]** をクリックした後は、この値は表示できません。
   
   ![TAP の詳細のスクリーンショット](./media/how-to-authentication-temporary-access-pass/details.png)

## <a name="use-a-tap"></a>TAP を使用する

TAP の最も一般的な使用は、ユーザーが最初のサインイン時に認証の詳細を登録するためです。追加のセキュリティ プロンプトを完了する必要はありません。 認証方法は [https://aka.ms/mysecurityinfo](https://aka.ms/mysecurityinfo) に登録されています。 ユーザーは、ここで既存の認証方法を更新することもできます。

1. Web ブラウザーを開いて [https://aka.ms/mysecurityinfo](https://aka.ms/mysecurityinfo) にアクセスします。
1. TAP を作成したアカウントの UPN を入力します ( *tapuser@contoso.com* など)。
1. ユーザーが TAP ポリシーに含まれている場合は、TAP を入力するための画面が表示されます。
1. Azure portal に表示された TAP を入力します。

   ![TAP を入力する方法のスクリーンショット](./media/how-to-authentication-temporary-access-pass/enter.png)

>[!NOTE]
>フェデレーション ドメインの場合は、フェデレーションよりも TAP を使用することをお勧めします。 TAP を使用しているユーザーは Azure AD で認証を完了するため、フェデレーション ID プロバイダー (IDP) にリダイレクトされません。

これでユーザーがサインインし、FIDO2 セキュリティ キーなどの方法を更新または登録できるようになりました。 資格情報やデバイスを紛失したために認証方法を更新するユーザーは、古い認証方法を必ず削除する必要があります。

ユーザーは、TAP を使用して、Authenticator アプリから直接パスワードレスの電話によるサインインに登録することもできます。 詳細については、「[Microsoft Authenticator アプリに職場または学校アカウントを追加する](../user-help/user-help-auth-app-add-work-school-account.md)」を参照してください。

![職場または学校アカウントを使用して TAP を入力する方法のスクリーンショット](./media/how-to-authentication-temporary-access-pass/enter-work-school.png)

## <a name="delete-a-tap"></a>TAP を削除する

有効期限が切れた TAP は使用できません。 ユーザーの **[認証方法]** の **[詳細]** 列に、TAP がいつ期限切れになったかが表示されます。 これらの有効期限が切れた TAP は、次の手順を使用して削除できます。

1. Azure AD ポータルで、 **[ユーザー]** を参照し、 *[TAP ユーザー]* などのユーザーを選択してから、 **[認証方法]** を選択します。
1. 一覧に表示されている **[一時アクセス パス (プレビュー)]** の認証方法の右側で、 **[削除]** を選択します。

## <a name="replace-a-tap"></a>TAP を置き換える 

- ユーザーは、1 つの TAP しか持つことができません。 パスコードは、TAP の開始時から終了時にかけて使用できます。
- ユーザーが新しい TAP を必要とする場合は、次のようになります。
  - 既存の TAP が有効な場合、管理者は、既存の TAP を削除し、ユーザーの新しいパスを作成する必要があります。 有効な TAP を削除すると、ユーザーのセッションが失効させられます。 
  - 既存の TAP の有効期限が切れている場合は、新しい TAP が既存の TAP をオーバーライドし、ユーザーのセッションを失効させません。

オンボードと復旧の NIST 標準の詳細については、「[Nist Special Publication 800-63](https://pages.nist.gov/800-63-3/sp800-63a.html#sec4)」を参照してください。

## <a name="limitations"></a>制限事項

以下の制限事項に留意してください。

- 1 回限りの TAP を使用して FIDO2 や電話によるサインインなどのパスワードレスの方法を登録する場合、ユーザーは 1 回限りの TAP を使用して 10 分以内に登録を完了する必要があります。 この制限は、複数回使用できる TAP には適用されません。
- ゲスト ユーザーは、TAP を使用してサインインすることはできません。
- セルフサービス パスワード リセット (SSPR) 登録ポリシーの対象のユーザーは、TAP を使用してサインインした後、SSPR 方法のいずれかを登録する必要があります。 ユーザーが FIDO2 キーのみを使用する場合は、SSPR ポリシーから除外するか、SSPR 登録ポリシーを無効にします。 
- TAP は、ネットワーク ポリシー サーバー (NPS) 拡張機能と Active Directory フェデレーション サービス (AD FS) アダプターでは使用できません。
- テナントでシームレス SSO が有効になっている場合は、ユーザーにパスワードの入力が求められます。 ユーザーが TAP を使用してサインインできるようにするには、 **[代わりに一時アクセス パスを使用する]** リンクが使用可能になります。

![代わりに TAP を使用するスクリーンショット](./media/how-to-authentication-temporary-access-pass/alternative.png)

## <a name="troubleshooting"></a>トラブルシューティング    

- サインイン時にユーザーに TAP が提供されていない場合は、次のことを確認してください。
  - ユーザーは TAP 認証方法ポリシーの対象である。
  - ユーザーは有効な TAP を持っていて、1 回限りの使用の場合はまだ使用されていない。
- TAP を使用してサインインする際に **[ユーザー資格情報ポリシーにより、一時アクセス パスでのサインインはブロックされました]** が表示される場合は、次のことを確認してください。
  - ユーザーは複数回使用できる TAP を持っているが、認証方法ポリシーでは 1 回限りの TAP が必要とされている。
  - 1 回限りの TAP が既に使用されている。

## <a name="next-steps"></a>次のステップ

- [Azure Active Directory でパスワードレス認証のデプロイを計画する](howto-authentication-passwordless-deployment.md)

