---
title: パスワード リセットのセルフサービスのデプロイ - Azure Active Directory
description: Azure AD のパスワード リセットのセルフサービスを正常にデプロイするための戦略
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: conceptual
ms.date: 11/21/2019
ms.author: iainfou
author: iainfoulds
manager: daveba
ms.reviewer: sahenry
ms.collection: M365-identity-device-management
ms.openlocfilehash: bc2c68c53a7c03d1de08e5cde528f27aa61b0096
ms.sourcegitcommit: c38a1f55bed721aea4355a6d9289897a4ac769d2
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/05/2019
ms.locfileid: "74847271"
---
# <a name="deploy-azure-ad-self-service-password-reset"></a>Azure AD のパスワード リセットのセルフサービスをデプロイする

> [!NOTE]
> このガイドでは、パスワード リセットのセルフサービスとそのデプロイ方法について説明します。 アカウントを回復するために、パスワード リセットのセルフサービスのツールを探している場合は、[https://aka.ms/sspr](https://aka.ms/sspr) にアクセスしてください。 

Azure Active Directory の機能であるパスワード リセットのセルフサービス (SSPR) を使用すると、従業員は自分のパスワードをリセットすることができ、IT スタッフに連絡する必要はありません。 サービスを使用する前に、従業員はパスワード リセットのセルフサービスに登録するか、登録してもらう必要があります。 登録時に、従業員は組織で有効になっている 1 つまたは複数の認証方法を選択します。

SSPR を使用すると、従業員は場所や時間に関係なく、迅速にブロックを解除して作業を続けることができます。 ユーザーが自分自身のブロックを解除できるようにすることで、組織としては、パスワード関連のほとんどの一般的な問題に対する非生産的な時間と高いサポートコストを削減できます。

SSPR と共に別のアプリケーションまたはサービスを組織にデプロイすることで、ユーザーがすばやく登録できるようにします。 このアクションでは、大量のサインインが生成され、登録が促進されます。

組織では、SSPR をデプロイする前に、パスワード リセット関連のヘルプ デスク コール発生数と、各コールの平均コストを、確認したいことがあります。 このデータ投稿のデプロイを使用して、SSPR によって組織にもたらされる価値を示すことができます。  

## <a name="how-sspr-works"></a>SSPR のしくみ

1. ユーザーは、パスワードをリセットしようとしたら、以前に登録した認証方法 (1 つまたは複数) を使用して、身元を証明する必要があります。
1. その後、ユーザーは新しいパスワードを入力します。
   1. クラウド専用ユーザーの場合、新しいパスワードは Azure Active Directory に格納されます。 詳しくは、「[SSPR のしくみ](concept-sspr-howitworks.md#how-does-the-password-reset-portal-work)」をご覧ください。
   1. ハイブリッド ユーザーの場合、パスワードは Azure AD Connect サービスを介して、オンプレミスの Active Directory にライトバックされます。 詳しくは、「[パスワード ライトバックとは](concept-sspr-writeback.md#how-password-writeback-works)」をご覧ください。

## <a name="licensing-considerations"></a>ライセンスに関する考慮事項

Azure Active Directory はユーザーごとのライセンスであり、機能を利用するには、各ユーザーが適切なライセンスを持っている必要があります。

ライセンスの詳細については、[Azure Active Directory の価格のページ](https://azure.microsoft.com/pricing/details/active-directory/)を参照してください。

## <a name="enable-combined-registration-for-sspr-and-mfa"></a>SSPR と MFA に対する統合された登録を有効にする

組織では SSPR と多要素認証に対する統合された登録エクスペリエンスを有効にすることをお勧めします。 この統合された登録エクスペリエンスを有効にすると、ユーザーは登録情報を 1 回選択するだけで両方の機能を有効にすることができます。

![統合されたセキュリティ情報の登録](./media/howto-sspr-deployment/combined-security-info.png)

統合された登録エクスペリエンスでは、SSPR と Azure Multi-Factor Authentication の両方の使用を有効にする必要はありません。 統合された登録エクスペリエンスでは、従来の個別のコンポーネントより優れたユーザー エクスペリエンスが組織に提供されます。 統合された登録の詳細および有効にする方法については、「[統合されたセキュリティ情報の登録 (プレビュー)](concept-registration-mfa-sspr-combined.md)」をご覧ください。

## <a name="plan-the-configuration"></a>構成を計画する

推奨値で SSPR を有効にするには、次の設定が必要です。

| 領域 | Setting | 値 |
| --- | --- | --- |
| **SSPR のプロパティ** | パスワード リセットのセルフサービスが有効 | パイロットの場合は **[選択済み]** グループ/運用環境の場合は **[すべて]** |
| **認証方法** | Authentication methods required to register (登録に必要な認証方法) | リセットのため必要な数より常に 1 つ多い値 |
|   | Authentication methods required to reset (リセットに必要な認証方法) | 1 つまたは 2 つ |
| **登録** | [サインイン時にユーザーに登録を求めますか] | はい |
|   | ユーザーが認証情報を再確認するように求められるまでの日数 | 90 – 180 日 |
| **Notifications** | [パスワードのリセットについてユーザーに通知しますか] | はい |
|   | [他の管理者が自分のパスワードをリセットしたときに、すべての管理者に通知しますか] | はい |
| **カスタマイズ** | ヘルプデスク リンクのカスタマイズ | はい |
|   | カスタム ヘルプデスクの電子メールまたは URL | サポート サイトまたはメール アドレス |
| **オンプレミスの統合** | オンプレミスの AD へのパスワードの書き戻し | はい |
|   | パスワードをリセットせずにアカウントのロックを解除することをユーザーに許可する | はい |

### <a name="sspr-properties-recommendations"></a>SSPR のプロパティの推奨事項

パスワード リセットのセルフサービスを有効にするときは、パイロット期間中に使用するセキュリティ グループを選択します。

さらに広い範囲でサービスを開始することを計画するときは、[すべて] オプションを使って、組織内のすべてのユーザーに SSPR を適用することをお勧めします。 すべてに設定できない場合は、適切な Azure AD セキュリティ グループまたは Azure AD に同期されている AD グループを選択します。

### <a name="authentication-methods"></a>認証方法

[Authentication methods required to register]\(登録に必要な認証方法\) を、リセットに必要な数より少なくとも 1 つ多い数に設定します。 複数を許可すると、リセットが必要なときのユーザーの柔軟性が増します。

**[リセットのために必要な方法の数]** を、組織に適したレベルに設定します。 1 つでは最小限の手間が必要ですが、2 つではセキュリティ ポスチャが増す可能性があります。

SSPR で使用可能な認証方法、定義済みのセキュリティの質問、およびカスタマイズされたセキュリティの質問を作成する方法について詳しくは、「[認証方法とは](concept-authentication-methods.md)」をご覧ください。

### <a name="registration-settings"></a>登録設定

**[サインイン時にユーザーに登録を求めますか]** を **[はい]** に設定します。 この設定は、サインイン時にユーザーに登録を強制し、すべてのユーザーが確実に保護されることを意味します。

組織で短い期間が必要でない限り、 **[ユーザーが認証情報を再確認するように求められるまでの日数]** を **90** から **180** 日の範囲に設定します。

### <a name="notifications-settings"></a>通知の設定

**[パスワードのリセットについてユーザーに通知しますか]** と **[他の管理者が自分のパスワードをリセットしたときに、すべての管理者に通知しますか]** の両方を、 **[はい]** に構成します。 両方を **[はい]** にすると、ユーザーはパスワードがリセットされたことを認識し、ある管理者がパスワードを変更したことをすべての管理者が認識するので、セキュリティが向上します。 ユーザーまたは管理者は、このような通知を受け取り、自分が変更を開始していない場合は、すぐにセキュリティ違反の可能性を報告できます。

### <a name="customization"></a>カスタマイズ

問題が発生したユーザーが迅速にヘルプを受けられるよう、**ヘルプデスクのメールまたは URL** をカスタマイズすることが重要です。 このオプションを、ユーザーがよく知っている一般的なヘルプデスクのメール アドレスまたは Web ページに設定します。

### <a name="on-premises-integration"></a>オンプレミスの統合

ハイブリッド環境がある場合は、 **[オンプレミスの Active Directory へのパスワードの書き戻し]** を **[はい]** に設定します。 また、[パスワードをリセットせずにアカウントのロックを解除することをユーザーに許可する] を [はい] に設定します。そうすると、ユーザーの柔軟性が増します。

### <a name="changingresetting-passwords-of-administrators"></a>管理者のパスワードの変更/リセット

管理者のアカウントは、アクセス許可が引き上げられている特別なアカウントです。 それらを保護するため、管理者のパスワードの変更には次の制限が適用されます。

- オンプレミスのエンタープライズ管理者またはドメイン管理者は、SSPR で自分のパスワードをリセットできません。 オンプレミス環境でのみ、自分のパスワードを変更できます。 したがって、オンプレミスの AD 管理者アカウントを Azure AD に同期しないことをお勧めします。
- 管理者は、パスワードをリセットする方法として、秘密の質問と回答を使用できません。

### <a name="environments-with-multiple-identity-management-systems"></a>複数の ID 管理システムがある環境

環境内に複数の ID 管理システムがある場合 (Oracle AM、SiteMinder、その他のシステムのようなオンプレミスの ID マネージャーなど)、Microsoft Identity Manager (MIM) での Password Change Notification Service (PCNS) のようなツールを使って、Active Directory に書き込まれたパスワードを他のシステムに同期することが必要な場合があります。 このより複雑なシナリオについては、「[ドメイン コントローラーに MIM パスワード変更通知サービスを展開する](https://docs.microsoft.com/microsoft-identity-manager/deploying-mim-password-change-notification-service-on-domain-controller)」をご覧ください。

## <a name="plan-deployment-and-support-for-sspr"></a>SSPR のデプロイとサポートを計画する

### <a name="engage-the-right-stakeholders"></a>適切な関係者を関わらせる

テクノロジ プロジェクトが失敗した場合、その原因は通常、影響、結果、および責任に対する想定の不一致です。 これらの落とし穴を回避するには、適切な利害関係者を関与させ、利害関係者およびそのプロジェクトでの入力と説明責任を文書化することで、プロジェクトでの利害関係者の役割をよく理解させます。

### <a name="communications-plan"></a>コミュニケーションの計画

コミュニケーションは、新しいサービスの成功に必要不可欠です。 サービスを使用する方法、および期待どおりにいかない場合にヘルプを得るためにできることについて、事前にユーザーに伝えます。 エンド ユーザー コミュニケーション戦略の計画方法に関するアイデアについては、[Microsoft ダウンロード センターにあるパスワード リセットのセルフサービスのロールアウト資料](https://www.microsoft.com/download/details.aspx?id=56768)を確認してください。

### <a name="testing-plan"></a>テスト計画

デプロイが意図したとおりに動作することを確認するには、実装の検証に使用するテスト ケースのセットを計画する必要があります。 次の表では、ポリシーに基づいて組織で予想される結果を文書化するために使用できる有用なテスト シナリオをいくつか示します。

| ビジネス ケース | 予想される結果 |
| --- | --- |
| 企業ネットワーク内から SSPR ポータルにアクセスできる | 組織によって決定される |
| 企業ネットワーク外から SSPR ポータルにアクセスできる | 組織によって決定される |
| ユーザーがパスワード リセットを有効にされていないときに、ブラウザーからユーザーのパスワードをリセットする | ユーザーはパスワード リセット フローにアクセスできない |
| ユーザーがパスワード リセットに登録されていないときに、ブラウザーからユーザーのパスワードをリセットする | ユーザーはパスワード リセット フローにアクセスできない |
| パスワード リセットの登録が強制されているときに、ユーザーがサインインする | ユーザーはセキュリティ情報を登録するように求められる |
| パスワード リセットの登録が完了しているときに、ユーザーがサインインする | ユーザーはセキュリティ情報を登録するように求められない |
| ユーザーがライセンスを持っていないときに、SSPR ポータルにアクセスできる | アクセスできる |
| ユーザーが登録した後、Windows 10 Azure AD 参加済みまたはハイブリッド Azure AD 参加済みデバイスのロック画面からユーザーのパスワードをリセットする | ユーザーはパスワードをリセットできる |
| SSPR の登録と使用状況のデータを、管理者がほぼリアルタイムで使用できる | 監査ログを介して利用できる |

### <a name="support-plan"></a>サポート プラン

通常、SSPR ではユーザーの問題は発生しませんが、発生する可能性のある問題に対応できるようサポート スタッフが準備しておくことが重要です。

管理者は Azure AD ポータルでエンド ユーザーのパスワードを変更またはリセットできますが、セルフサービス サポート プロセスを通して問題の解決を支援することをお勧めします。

このドキュメントの運用ガイド セクションでは、サポート ケースと考えられる原因の一覧、および解決のためのガイドを示します。

### <a name="auditing-and-reporting"></a>監査とレポート

多くの組織は、デプロイ後に、セルフサービスによるパスワードのリセット (SSPR) が本当に使用されているかどうかや、どのように使用されているかを把握することを望んでいます。 Azure Active Directory (Azure AD) で提供されるレポート機能によって、お客様は質問に対する答えをあらかじめ用意されたレポートから得ることができます。

登録とパスワード リセットに関する監査ログは、30 日間利用できます。 したがって、企業内でのセキュリティ監査をもっと長い期間保有する必要がある場合は、ログをエクスポートし、[Azure Sentinel](../../sentinel/connect-azure-active-directory.md)、Splunk、ArcSight などの SIEM ツールに取り込む必要があります。

次のような表では、バックアップ スケジュール、システム、および責任者を文書化します。 監査およびレポートのバックアップを独立させる必要はない場合がありますが、問題から復旧できるバックアップを別に作成する必要があります。

|   | ダウンロードの頻度 | ターゲット システム | 責任者 |
| --- | --- | --- | --- |
| 監査のバックアップ |   |   |   |
| レポートのバックアップ |   |   |   |
| ディザスター リカバリー バックアップ |   |   |   |

## <a name="implementation"></a>実装

実装には 3 つのステージがあります。

- ユーザーとライセンスを構成する
- 登録とセルフサービス用に Azure AD SSPR を構成する
- パスワード ライトバック用に Azure AD Connect を構成する

### <a name="communicate-the-change"></a>変更を通知する

計画フェーズで作成したコミュニケーション計画の実装を始めます。

### <a name="ensure-groups-are-created-and-populated"></a>グループが作成および設定されていることを確認する

パスワード認証方法の計画セクションを参照して、パイロット実装または運用実装用のグループを利用できること、およびすべての適切なユーザーがグループに追加されていることを確認します。

### <a name="apply-licenses"></a>ライセンスを適用する

実装するグループには、Azure AD Premium ライセンスが割り当てられている必要があります。 グループにライセンスを直接割り当てることも、PowerShell やグループ ベースのライセンスなどの既存のライセンス ポリシーを使用することもできます。

ユーザー グループへのライセンスの割り当てに関しては、「[Azure Active Directory でのグループ メンバーシップによるユーザーへのライセンスの割り当て](../users-groups-roles/licensing-groups-assign.md)」をご覧ください。

### <a name="configure-sspr"></a>SSPR を構成する

#### <a name="enable-groups-for-sspr"></a>SSPR 用にグループを有効にする

1. Administrator アカウントを使用して、Azure portal にアクセスします。
1. [すべてのサービス] を選択し、フィルター ボックスに「Azure Active Directory」と入力して、Azure Active Directory を選択します。
1. [Active Directory] ブレードで、[パスワードのリセット] を選択します。
1. プロパティ ウィンドウで [選択済み] を選択します。 すべてのユーザーを有効にする場合は、[すべて] を選択します。
1. [既定のパスワード リセット ポリシー] ブレードで、最初のグループの名前を入力し、それを選択してから、画面の下部にある [選択] をクリックして、画面の上部にある [保存] を選択します。
1. 各グループに対してこの手順を繰り返します。

#### <a name="configure-the-authentication-methods"></a>認証方法を構成する

このドキュメントのパスワード認証方法の計画セクションから、計画を参照します。

1. [登録] を選択し、[サインイン時にユーザーに登録を求めますか] で [はい] を選択し、有効期限までの日数を設定して、[保存] を選択します。
1. [通知] を選択し、計画ごとに構成して、[保存] を選択します。
1. [カスタマイズ] を選択し、計画ごとに構成して、[保存] を選択します。
1. [オンプレミスの統合] を選択し、計画ごとに構成して、[保存] を選択します。

### <a name="enable-sspr-in-windows"></a>Windows で SSPR を有効にする

Windows 10 バージョン 1803 以降が実行されていて、Azure AD またはハイブリッド Azure AD に参加しているデバイスでは、Windows ログイン画面でパスワードをリセットできます。 この機能の詳細と構成手順については、「[ログイン画面からの Azure AD パスワード リセット](tutorial-sspr-windows.md)」をご覧ください

### <a name="configure-password-writeback"></a>パスワード ライトバックを構成する

組織用にパスワード ライトバックを構成する手順については、「[方法: パスワード ライトバックを構成する](howto-sspr-writeback.md)」をご覧ください。

## <a name="manage-sspr"></a>SSPR を管理する

パスワード リセットのセルフサービスに関連付けられている機能の管理に必要なロール。

| ビジネス ロール/ペルソナ | Azure AD ロール (必要な場合) |
| :---: | :---: |
| レベル 1 ヘルプデスク | パスワード管理者 |
| レベル 2 ヘルプデスク | ユーザー管理者 |
| SSPR 管理者 | 全体管理者 |

### <a name="support-scenarios"></a>サポート シナリオ

サポート チームが成功できるように、ユーザーから受け取った質問に基づいて、FAQ を作成できます。 次の表では、一般的なサポート シナリオを示します。

| シナリオ | 説明 |
| --- | --- |
| ユーザーに使用可能な登録済み認証方法がない | ユーザーは、自分のパスワードをリセットしようとしていますが、使用可能な登録済みの認証方法がありません (例: 携帯電話が自宅にあり、メールにアクセスできない) |
| ユーザーはオフィスまたは携帯電話でテキストまたは通話を受け取っていない | ユーザーは、テキストまたは通話により身元を確認しようとしていますが、テキスト/通話を受け取っていません。 |
| ユーザーはパスワード リセット ポータルにアクセスできない | ユーザーは、パスワードのリセットを望んでいますが、パスワードのリセットが有効になっていないため、パスワード更新ページにアクセスできません。 |
| ユーザーは新しいパスワードを設定できない | ユーザーは、パスワード リセット フローで検証を完了しましたが、新しいパスワードを設定できません。 |
| ユーザーの Windows 10 デバイスに [パスワードのリセット] リンクが表示されない | ユーザーは、Windows 10 のロック画面からパスワードをリセットしようとしていますが、デバイスが Azure AD に参加していないか、または Intune デバイス ポリシーが有効になっていません |

その他のトラブルシューティングのため、次のような情報を含めることもできます。

- SSPR が有効になっているグループ。
- 構成されている認証方法。
- 企業ネットワーク上または企業ネットワーク外に関連するアクセス ポリシー。
- 一般的なシナリオのトラブルシューティング手順。

パスワード リセットのセルフサービスのトラブルシューティングに関するオンライン ドキュメントを参照して、最もよくある SSPR シナリオの一般的なトラブルシューティング手順を理解することもできます。

## <a name="next-steps"></a>次の手順

- [Azure AD のパスワード保護の実装を検討する](concept-password-ban-bad.md)

- [Azure AD スマート ロックアウトの実装を検討する](howto-password-smart-lockout.md)
