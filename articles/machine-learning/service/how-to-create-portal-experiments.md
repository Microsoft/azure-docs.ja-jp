---
title: Azure の自動 ML インターフェイスを使用してモデルをトレーニングおよびデプロイする
titleSuffix: Azure Machine Learning
description: Azure Machine Learning のワークスペース ランディング ページ (プレビュー) で自動化された機械学習の実験を作成、管理、およびデプロイします。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: nibaccam
author: tsikiksr
manager: cgronlun
ms.reviewer: nibaccam
ms.date: 09/09/2019
ms.openlocfilehash: 45207eb1cdc62f2468d8b0c052723337c18d5021
ms.sourcegitcommit: 7f6d986a60eff2c170172bd8bcb834302bb41f71
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71350555"
---
# <a name="create-explore-and-deploy-automated-machine-learning-experiments-with-azure-machine-learnings-workspace-landing-page-preview"></a>Azure Machine Learning のワークスペース ランディング ページ (プレビュー) で自動化された機械学習の実験を作成、参照、およびデプロイします。

 この記事では、1 行のコードも使わずに、自動化された機械学習の実験を Azure Machine Learning のワークスペース ランディング ページで作成、参照、デプロイする方法について説明します。 自動化された機械学習では、機械学習モデルをすばやく生成できるように、特定のデータに使用する最適なアルゴリズムを選択するプロセスが自動化されます。 [自動化された機械学習の詳細については、こちらを参照してください](concept-automated-ml.md)。

 よりコードベースのエクスペリエンスを希望する場合は、[Azure Machine Learning SDK](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py) を使用して、[自動化された機械学習の実験を Python で構成する](how-to-configure-auto-train.md)こともできます。

## <a name="prerequisites"></a>前提条件

* Azure サブスクリプション。 Azure サブスクリプションをお持ちでない場合は、開始する前に無料アカウントを作成してください。 [無料版または有料版の Azure Machine Learning](https://aka.ms/AMLFree) を今すぐお試しください。

* Azure Machine Learning ワークスペース。 [Azure Machine Learning ワークスペースを作成する](how-to-manage-workspace.md)方法に関するページを参照してください。

## <a name="get-started"></a>作業開始

1. [ワークスペース ランディング ページ](https://ml.azure.com/workspaceportal/)にサインインします。 

1. サブスクリプションとワークスペースを選択します。 

1. 左ウィンドウに移動します。 **[作成者]** セクションで **[Automated ML]\(自動 ML\)** を選択します。

[![Azure portal ナビゲーション ウィンドウ](media/how-to-create-portal-experiments/nav-pane.png)](media/how-to-create-portal-experiments/nav-pane-expanded.png)

 今回初めて実験を行う場合は、 **[Get started]\(はじめに\)** 画面が表示されます。 

それ以外の場合、SDK を使用して作成されたものを含めて、すべての自動化された機械学習実験の概要を示す**自動化された機械学習**ダッシュボードが表示されます。 ここで、日付、実験名、実行状態に基づいて実行をフィルター処理し、参照できます。

## <a name="create-and-run-experiment"></a>実験を作成して実行する

1. **[Create Experiment]\(実験の作成\)** を選択し、フォームにデータを入力します。

1. 一意の実験名を入力します。

1. データ プロファイルとトレーニング ジョブのコンピューティングを選択します。 既存のコンピューティングの一覧は、ドロップダウン リストにあります。 新しいコンピューティングを作成するには、ステップ 4 の手順に従います。

1. **[Create a new compute]\(新しいコンピューティングの作成\)** を選択して、この実験のコンピューティング コンテキストを構成します。

    フィールド|説明
    ---|---
    コンピューティング名| コンピューティング コンテキストを識別する一意名を入力します。
    仮想マシンのサイズ| コンピューティングの仮想マシン サイズを選択します。
    最小および最大ノード ([詳細設定] 内)| データをプロファイリングするには、1 つ以上のノードを指定する必要があります。 コンピューティングの最大ノード数を入力します。 AML コンピューティングの既定は 6 ノードです。
    
    **作成** を選択します。 新しいコンピューティングの作成には数分かかる場合があります。

    >[!NOTE]
    > コンピューティング名は、選択または作成するコンピューティングで*プロファイルが有効*になっているかどうかを示します (詳細については、[データ プロファイル](#profile)に関するセクションを参照してください)。

1. ストレージ コンテナーからデータセットを選択します。または、ローカル コンピューターからコンテナーにファイルをアップロードしてデータセットを作成します。 パブリック プレビューでは、ローカル ファイルのアップロードと Azure Blob Storage アカウントのみがサポートされています。

    >[!Important]
    > トレーニング データの要件:
    >* データは表形式である必要があります。
    >* 予測する値 (ターゲット列) は、データ内に存在する必要があります。

    1. ローカル コンピューター上のファイルから新しいデータセットを作成するには、 **[参照]** を選択し、ファイルを選択します。 

    1. データセットに一意の名前を付け、必要に応じて説明を入力します。 

    1. **[次へ]** を選択して、ワークスペースで自動的に作成される既定のストレージ コンテナーにアップロードするか、実験に使用するストレージ コンテナーを選択します。 

    1. **[Settings and preview]/(設定とプレビュー/)** フォームで入力が正しいか確認します。 フォームはファイルの種類に基づいてインテリジェントに設定されます。 

        フィールド| 説明
        ----|----
        ファイル形式| ファイルに格納されているデータのレイアウトと種類を定義します。
        区切り記号| プレーン テキストまたは他のデータ ストリーム内の個別の独立した領域の間の境界を指定するための 1 つ以上の文字。
        エンコード| データセットの読み取りに使用する、ビットと文字のスキーマ テーブルを識別します。
        列見出し| データセットの見出しがある場合、それがどのように処理されるかを示します。
        行のスキップ | データセット内でスキップされる行がある場合、その行数を示します。
    
        **[次へ]** を選択します。

    1. **[Settings and preview]\(設定とプレビュー\)** フォームでの選択に基づいて、 **[Schema]\(スキーマ\)** フォームがインテリジェントに設定されます。 ここでは、各列のデータ型を構成し、列名を確認し、実験に**含めない**列を選択します。 
            
        **[次へ]** を選択します。

1. トレーニング ジョブの種類として、分類、回帰、予測のいずれかを選択します。

1. ターゲット列を選択します。これは、予測を実行する列です。

1. 予測の場合:
    1. 時間列の選択:この列には、使用する時間データが含まれています。

    1. 予測期間を選択します。モデルで将来を予測できる時間単位 (分/時間/日/週/月/年) の数を示します。 モデルで将来を予測する期間が延びるほど、正確性が下がります。 [予測と予測期間の詳細については、こちらを参照してください](how-to-auto-train-forecast.md)。

1. (省略可能) 詳細設定: トレーニング ジョブをより細かく制御するのに使用できる追加の設定です。 設定しない場合、実験の選択とデータに基づいて既定値が適用されます。 

    詳細設定|説明
    ------|------
    主要メトリック| モデルをスコアリングするために使用される主なメトリックです。 [モデルのメトリックの詳細については、こちらを参照してください](how-to-configure-auto-train.md#explore-model-metrics)。
    終了基準| これらの基準のどれかが満たされると、トレーニング ジョブが終了します。 <br> *Training job time (minutes) (トレーニング ジョブ時間 (分))* : トレーニング ジョブを実行できる時間の長さ。  <br> *イテレーションの最大数*: トレーニング ジョブでテストするパイプライン (イテレーション) の最大数。 ジョブは、指定したイテレーションの数より多く実行されることはありません。 <br> *Metric score threshold* (メトリック スコアのしきい値): すべてのパイプラインの最小メトリック スコアです。 これにより、達成目標のターゲット メトリックを定義した場合には、必要以上にトレーニング ジョブに時間を費やすことはなくなります。
    前処理| 自動化された機械学習によって行われる前処理を有効または無効にするように選択します。 前処理には、合成的特徴を生成するための自動データ クレンジング、準備、変換が含まれます。 [前処理の詳細については、こちらを参照してください](#preprocess)。
    検証| トレーニング ジョブで使用するクロス検証オプションをどれか選択します。 [クロス検証の詳細については、こちらを参照してください](how-to-configure-auto-train.md)。
    コンカレンシー| マルチコア コンピューティングの使用時に使用するマルチコアの制限を選択します。
    Blocked algorithm (ブロックするアルゴリズム)| トレーニング ジョブから除外するアルゴリズムを選択します。

<a name="profile"></a>

## <a name="data-profiling--summary-stats"></a>データ プロファイルと概要統計情報

データ セットが ML 対応であるかどうかを確認するために、データ セット全体で幅広い概要統計情報を取得できます。 数値以外の列の場合、最小、最大、エラー数などの基本的な統計情報だけが含まれます。 数値列の場合は、その統計学的モーメントと、推定される分位点も確認できます。 具体的には、データ プロファイルには以下が含まれています。

>[!NOTE]
> 無関係な型を持つ特徴には空白のエントリが表示されます。

統計|説明
------|------
機能| 集約されている列の名前。
プロファイル| 推論された型に基づくインライン視覚化。 たとえば、文字列、ブール値、日付には値の数が示される一方、10 進数 (数値) は近似されたヒストグラムが示されます。 これにより、データの分布を簡単に把握できます。
型の分布| 列内の型のインライン値カウント。 Null は独自の型であるため、この視覚化は変則値または欠損値を検出するために便利です。
種類|推論される列の型。 使用可能な値には、文字列、ブール値、日付、10 進数が含まれます。
Min| 列の最小値。 型に固有の順序 (ブール数など) がない特徴の場合、空白のエントリが表示されます。
Max| 列の最大値。 
Count| 列内の欠落しているエントリと欠落していないエントリの合計数。
Not Missing Count| 列内の欠落していないエントリの数。 空の文字列とエラーは値として扱われるため、"欠落していないカウント" には含まれません。
分位点| データの分布感を提供する、各分位点での近似値。
平均| 列の算術平均。
標準偏差| この列のデータの分散または変動の尺度。
variance| この列のデータが平均値からどのくらい離れているかを示す尺度。 
傾斜| この列のデータが正規分布とどのくらい異なるかを示す尺度。
尖度| この列のデータが正規分布と比較してどのくらい裾の重い分布になっているかを示す尺度。

<a name="preprocess"></a>

## <a name="advanced-preprocessing-options"></a>詳細な前処理オプション

実験を構成するときに、詳細設定の `Preprocess` を有効にすることができます。 そうすることで、以下のデータの前処理と特性付けの手順が自動的に実行されます。

|前処理手順&nbsp;| 説明 |
| ------------- | ------------- |
|高カーディナリティまたは差異なしの特徴の削除|これらをトレーニング セットおよび検証セットから削除します。まったく値が存在しない特徴、すべての行の値が同じである特徴、非常に高いカーディナリティ (ハッシュ、ID、GUID など) の特徴が含まれます。|
|欠損値の補完|数値特徴の場合、その列の平均値で補完します。<br/><br/>カテゴリ特徴の場合、出現回数が最も多い値で補完します。|
|その他の特徴の生成|DateTime の特徴:年、月、日、曜日、年の通算日、四半期、年の通算週、時間、分、秒。<br/><br/>テキストの特徴:ユニグラム、バイグラム、文字トライグラムに基づく期間の頻度。|
|変換とエンコード |一意の値がほとんどない数値特徴は、カテゴリ特徴に変換されます。<br/><br/>カーディナリティの低いカテゴリ型の場合、ワンホット エンコードが実行されます。カーディナリティが高い場合は、ワンホット ハッシュ エンコードです。|
|ワードの埋め込み|事前トレーニングされたモデルを使用してテキスト トークンのベクトルをセンテンス ベクトルに変換するテキスト特性化機能です。 ドキュメント内の各ワードの埋め込みベクトルは、ドキュメント特徴ベクトルを生成するためにまとめて集約されます。|
|ターゲット エンコード|カテゴリ特徴の場合、回帰の問題について各カテゴリを平均ターゲット値にマップします。分類の問題については、各クラスのクラス確率にマップします。 マッピングの過剰適合および疎データ カテゴリによって発生するノイズを削減するために、頻度ベースの重み付けと k フォールド クロス検証が適用されます。|
|テキスト ターゲット エンコード|テキスト入力の場合、bag-of-words を使用するスタック線形モデルは、各クラスの確率を生成するために使用されます。|
|証拠の重み (WoE)|ターゲット列に対するカテゴリ列の相関関係のメジャーとして、WoE を計算します。 それは、クラス内およびクラス外の確率に対する比率の対数として計算されます。 このステップでは、クラスごとに 1 つの数値特徴列を出力し、明示的に欠損値と外れ値の処理を補完する必要がなくなります。|
|クラスターの距離|k-means クラスタリング モデルを、すべての数値列を対象にトレーニングします。  k 個の新しい特徴 (クラスターごとに 1 つの新しい数値特徴) を出力します。各クラスターの重心までの各サンプルの距離を含みます。|

## <a name="run-experiment-and-view-results"></a>実験を実行して結果を表示

**[開始]** を選択して実験を実行します。 実験の準備プロセスは数分かかります。

### <a name="view-experiment-details"></a>実験の詳細の表示

実験の準備フェーズが完了すると、[実行の詳細] 画面の入力が開始されるのがわかります。 この画面には、作成されたモデルの完全な一覧が表示されます。 既定では、選択したメトリックに基づいて最高のスコアを付けたモデルが、一覧の先頭になります。 トレーニング ジョブでその他のモデルを試みると、それらがイテレーションの一覧とグラフに追加されます。 イテレーション グラフを使用すると、これまでに生成されたモデルのメトリックを簡単に比較できます。

トレーニング ジョブで各パイプラインの実行が終了するまで、しばらくかかることがあります。

[![詳細ダッシュボードの実行](media/how-to-create-portal-experiments/run-details.png)](media/how-to-create-portal-experiments/run-details-expanded.png#lightbox)

### <a name="view-training-run-details"></a>トレーニング実行の詳細の表示

トレーニングのパフォーマンス メトリックと分布グラフと同様に、出力モデルのいずれかをドリル ダウンして、実行の詳細を表示します。 [グラフの詳細については、こちらを参照してください](how-to-understand-automated-ml.md)。

[![イテレーションの詳細](media/how-to-create-portal-experiments/iteration-details.png)](media/how-to-create-portal-experiments/iteration-details-expanded.png)

## <a name="deploy-your-model"></a>モデルをデプロイする

最適なモデルを作成したら、Web サービスとしてデプロイして新しいデータで予測します。

自動化された ML は、コードを記述せずにモデルをデプロイするのに役立ちます。

1. デプロイ オプションはいくつかあります。 

    + オプション 1:(定義したメトリック基準に従って) 最適なモデルをデプロイするには、[実行の詳細] ページから [Deloy Best Model]\(最適なモデルのデプロイ\) を選択します。

    + オプション 2:この実験から特定のモデル イテレーションをデプロイするには、そのモデルをドリルダウンしてその実行の詳細ページを開き、[Deploy Model]\(モデルのデプロイ\) を選択します。

1. **[Deploy Model]\(モデルのデプロイ\)** ウィンドウにデータを入力します。

    フィールド| 値
    ----|----
    デプロイ名| デプロイの一意の名前を入力します。
    デプロイの説明| このデプロイの目的を識別しやすくするための説明を入力します。
    スコアリング スクリプト| 独自のスコアリング ファイルを自動生成またはアップロードします。 [スコアリング スクリプトの詳細をご確認ください](how-to-deploy-and-where.md#script)。
    環境スクリプト| 独自の環境ファイルを自動生成またはアップロードします。
    >[!Important]
    > ファイル名の文字数は 32 文字未満にする必要があります。先頭と末尾には英数字を使用してください。 先頭と末尾以外では、ダッシュ、アンダースコア、ピリオド、および英数字を使用できます。 スペースは使用できません。

1. **[デプロイ]** を選択します。 デプロイの完了には 20 分程度かかる場合があります。

    デプロイが正常に完了すると、次のメッセージが表示されます。

    ![デプロイの完了](media/tutorial-1st-experiment-automated-ml/deploy-complete-status.png) 

これで、予測を生成するための運用 Web サービスが作成されました。

## <a name="next-steps"></a>次の手順

* [Azure Machine Learning を使用して初めての自動化された ML の実験を作成するエンドツーエンドのチュートリアル](tutorial-first-experiment-automated-ml.md)をお試しください。 
* [自動化された機械学習の詳細](concept-automated-ml.md)と Azure Machine Learning について学習します。
* [自動化された機械学習の結果を解釈します](how-to-understand-automated-ml.md)。
* [Web サービスを使用する方法を学習します](https://docs.microsoft.com/azure/machine-learning/service/how-to-consume-web-service)。
