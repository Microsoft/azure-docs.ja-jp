---
title: Web サービスを管理する
titleSuffix: ML Studio (classic) - Azure
description: Microsoft Azure Machine Learning Web サービス ポータルを使用して、Machine Learning の新しい Web サービスとクラシック Web サービスを管理できます。 クラシック Web サービスと新しい Web サービスは基盤としているテクノロジが異なるため、管理機能もそれぞれ若干異なります。
services: machine-learning
ms.service: machine-learning
ms.subservice: studio
ms.topic: conceptual
author: likebupt
ms.author: keli19
ms.custom: previous-ms.author=yahajiza, previous-author=YasinMSFT
ms.date: 02/28/2017
ms.openlocfilehash: 30e9e31c7b3f372ed252f1b81eeece02d2ca1f21
ms.sourcegitcommit: bdf31d87bddd04382effbc36e0c465235d7a2947
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/12/2020
ms.locfileid: "77168506"
---
# <a name="manage-a-web-service-using-the-azure-machine-learning-studio-classic-web-services-portal"></a>Azure Machine Learning Studio (クラシック) Web サービス ポータルを使用して Web サービスを管理する
Microsoft Azure Machine Learning Web サービス ポータルを使用して、Machine Learning の新しい Web サービスとクラシック Web サービスを管理できます。 クラシック Web サービスと新しい Web サービスは基盤としているテクノロジが異なるため、管理機能もそれぞれ若干異なります。

Machine Learning Web サービス ポータルでは、次のことができます。

* Web サービスの使用状況を監視する。
* 説明を設定する、Web サービスのキーを更新する (新しい Web サービスのみ)、ストレージ アカウント キーを更新する (新しい Web サービスのみ)、ログ記録を有効にする、サンプル データを有効または無効にする。
* Web サービスを削除する。
* 課金プランを作成、削除、または更新する (新しい Web サービスのみ)。
* エンドポイントを追加、削除する (クラシック Web サービスのみ)。

>[!NOTE]
>クラシック Web サービスは、[Machine Learning Studio (クラシック)](https://studio.azureml.net) の **[Web サービス]** タブでも管理できます。

## <a name="permissions-to-manage-new-resources-manager-based-web-services"></a>新しいリソース マネージャー ベースの Web サービスを管理するためのアクセス許可

新しい Web サービスは、Azure リソースとしてデプロイされます。 そのため、新しい Web サービスをデプロイおよび管理するための適切なアクセス許可が必要です。  New Web サービスをデプロイして管理するには、Web サービスがデプロイされているサブスクリプションで共同作成者または管理者ロールが割り当てられている必要があります。 別のユーザーを Machine Learning ワークスペースに招待したら、Web サービスをデプロイまたは管理する前に、そのユーザーを共同作成者または管理者ロールに割り当てる必要があります。 

ユーザーが Azure Machine Learning Web サービス ポータル内のリソースにアクセスするための適切なアクセス許可を持っていない場合、Web サービスをデプロイしようとすると、次のような内容のエラーが表示されます。

*Web サービスのデプロイに失敗しました。このアカウントには、ワークスペースを含む Azure サブスクリプションへの十分なアクセス権がありません。Web サービスを Azure にデプロイするには、同じアカウントをワークスペースに招待し、ワークスペースを含む Azure サブスクリプションへのアクセス権を付与する必要があります。*

ワークスペースを作成する方法の詳細については、「[Azure Machine Learning Studio (クラシック) ワークスペースの作成と共有](create-workspace.md)」を参照してください。

アクセス許可の設定の詳細については、「[RBAC と Azure portal を使用してアクセスを管理する](../../role-based-access-control/role-assignments-portal.md)」を参照してください。


## <a name="manage-new-web-services"></a>新しい Web サービスを管理する
新しい Web サービスを管理するには、次のようにします。

1. Microsoft Azure アカウント (Azure サブスクリプションに関連付けられているアカウント) を使用して、 [Microsoft Azure Machine Learning Web サービス](https://services.azureml.net/quickstart) ポータルにサインインします。
2. メニューで、 **[Web サービス]** をクリックします。

すると、サブスクリプションにデプロイされている Web サービスの一覧が表示されます。 

Web サービスを管理するには、[Web サービス]をクリックします。 [Web サービス] ページでは、次の操作を実行できます。

* Web サービスをクリックして管理する。
* Web サービスの課金プランをクリックして更新する。
* Web サービスを削除する。
* Web サービスをコピーして別のリージョンにデプロイする。

Web サービスをクリックしたときに、Web サービスの [クイック スタート] ページが開きます。 Web サービスの [クイック スタート] ページには、Web サービスを管理するための 2 つのメニュー オプションがあります。

* **ダッシュボード** - Web サービスの使用状況を表示できます。
* **構成** - 説明のテキストの追加、Web サービスに関連付けられたストレージ アカウントのキーの更新、サンプル データの有効化と無効化を行うことができます。

### <a name="monitoring-how-the-web-service-is-being-used"></a>Web サービスの使用状況を監視する
**[ダッシュボード]** タブをクリックします。

ダッシュボードから、一定期間の Web サービスの全体的な使用状況を表示できます。 使用状況グラフの右上の [期間] ドロップダウン メニューから表示する期間を選択することができます。 ダッシュボードには次の情報が表示されます。

* **一定期間内の要求数** 選択した期間の要求数がステップのグラフで表示されます。 使用数が急増しているかどうかの判定に役立ちます。
* **要求応答の要求数** 選択した期間にサービスが受信した要求応答の呼び出し合計数とそれらのうち失敗した数が表示されます。
* **要求応答の平均計算時間** 受信した要求の実行に必要とされた平均時間が表示されます。
* **バッチ要求数** 選択した期間にサービスが受信したバッチ要求の合計数とそれらのうち失敗した数が表示されます。
* **ジョブの平均待機時間** 受信した要求の実行に必要とされた平均時間が表示されます。
* **エラー数** Web サービスの呼び出し時に発生したエラーの集計数が表示されます。
* **サービス コスト** サービスに関連付けられている課金プランの料金が表示されます。

### <a name="configuring-the-web-service"></a>Web サービスの構成
**[構成]** メニュー オプションをクリックします。

次のプロパティを更新することができます。

* **説明** Web サービスの説明を入力することができます。
* **タイトル** Web サービスのタイトルを入力することができます。
* **キー** プライマリとセカンダリの API キーをローテーションすることができます。
* **ストレージ アカウント キー** Web サービスの変更に関連付けられているストレージ アカウントのキーを更新することができます。 
* **サンプル データの有効化** 要求応答サービスのテストに使用できるサンプル データを提供することができます。 Machine Learning Studio (クラシック) で Web サービスを作成した場合は、サンプル データはモデルのトレーニングに使用したデータから取得されます。 サービスをプログラムで作成した場合は、データは JSON パッケージの一部として提供したサンプル データから取得されます。

### <a name="managing-billing-plans"></a>課金プランの管理
Web サービスの [クイック スタート] ページで、 **[プラン]** メニュー オプションをクリックします。 特定の Web サービスに関連付けられているプランをクリックして、そのプランを管理することもできます。

* **新規** 新しいプランを作成することができます。
* **プラン インスタンスの追加/削除** 既存のプランを "スケール アウト" して容量を追加することができます。
* **アップグレード/ダウングレード** 既存のプランを "スケール アップ" して容量を追加することができます。
* **削除** プランを削除することができます。

ダッシュボードを表示するには、プランをクリックします。 ダッシュボードを使用すると、選択した期間のスナップショット、つまりプランの使用状況を確認することができます。 表示する期間を選択するには、ダッシュボードの右上にある **[期間]** ドロップダウンをクリックします。 

プランのダッシュボードには、次の情報が表示されます。

* **プランの説明** プランに関連付けられているコストと容量に関する情報が表示されます。
* **プランの使用量** プランに対して課金されたコンピューティング時間とトランザクション数が表示されます。
* **Web サービス数** このプランを使用している Web サービスの数が表示されます。
* **呼び出し数によるトップ Web サービス** プランに対して課金される呼び出しを行っている上位 4 つの Web サービスが表示されます。
* **コンピューティング時間数によるトップ Web サービス** プランに対して課金されるコンピューティング リソースを使用している上位 4 つの Web サービスが表示されます。

## <a name="manage-classic-web-services"></a>クラシック Web サービスを管理する
> [!NOTE]
> このセクションの手順は、Azure Machine Learning Web サービス ポータルでのクラシック Web サービスの管理に関連しています。 Machine Learning Studio (クラシック) および Azure portal でのクラシック Web サービスの管理については、「[Azure Machine Learning Studio (クラシック) ワークスペースの管理](manage-workspace.md)」を参照してください。
> 
> 

クラシック Web サービスを管理するには、次のようにします。

1. Microsoft Azure アカウント (Azure サブスクリプションに関連付けられているアカウント) を使用して、 [Microsoft Azure Machine Learning Web サービス](https://services.azureml.net/quickstart) ポータルにサインインします。
2. **[Classic Web Services (クラシック Web サービス)]** をクリックします。

クラシック Web サービスを管理するには、 **[Classic Web Services (クラシック Web サービス)]** をクリックします。 [Classic Web Services (クラシック Web サービス)]ページでは、次の操作を実行できます。

* Web サービスをクリックして、関連付けられているエンドポイントを表示する。
* Web サービスを削除する。

クラシック Web サービスを管理するときは、各エンドポイントを個別に管理します。 Web サービス ページで Web サービスをクリックすると、そのサービスに関連付けられているエンドポイントの一覧が開きます。 

[Classic Web Service endpoint (クラシック Web サービス エンドポイント)] ページで、サービスのエンドポイントの追加と削除を行うことができます。 エンドポイントの追加の詳細については、「 [エンドポイントを作成する](create-endpoint.md)」をご覧ください。

いずれかのエンドポイントをクリックして、Web サービスの [クイック スタート] ページを開きます。 [クイック スタート] ページには、Web サービスを管理するための 2 つのメニュー オプションがあります。

* **ダッシュボード** - Web サービスの使用状況を表示できます。
* **構成** - 説明のテキストの追加、エラーのログ記録のオンとオフ、Web サービスに関連付けられたストレージ アカウントのキーの更新、サンプル データの有効化と無効化を行うことができます。

### <a name="monitoring-how-the-web-service-is-being-used"></a>Web サービスの使用状況を監視する
**[ダッシュボード]** タブをクリックします。

ダッシュボードから、一定期間の Web サービスの全体的な使用状況を表示できます。 使用状況グラフの右上の [期間] ドロップダウン メニューから表示する期間を選択することができます。 ダッシュボードには次の情報が表示されます。

* **一定期間内の要求数** 選択した期間の要求数がステップのグラフで表示されます。 使用数が急増しているかどうかの判定に役立ちます。
* **要求応答の要求数** 選択した期間にサービスが受信した要求応答の呼び出し合計数とそれらのうち失敗した数が表示されます。
* **要求応答の平均計算時間** 受信した要求の実行に必要とされた平均時間が表示されます。
* **バッチ要求数** 選択した期間にサービスが受信したバッチ要求の合計数とそれらのうち失敗した数が表示されます。
* **ジョブの平均待機時間** 受信した要求の実行に必要とされた平均時間が表示されます。
* **エラー数** Web サービスの呼び出し時に発生したエラーの集計数が表示されます。
* **サービス コスト** サービスに関連付けられている課金プランの料金が表示されます。

### <a name="configuring-the-web-service"></a>Web サービスの構成
**[構成]** メニュー オプションをクリックします。

次のプロパティを更新することができます。

* **説明** Web サービスの説明を入力することができます。 [説明] は必須フィールドです。
* **ログ記録** エンドポイントに関するエラー ログ記録を有効または無効にすることができます。 ログ記録の詳細については、「[Machine Learning Web サービスのログ記録の有効化](web-services-logging.md)」をご覧ください。
* **サンプル データの有効化** 要求応答サービスのテストに使用できるサンプル データを提供することができます。 Machine Learning Studio (クラシック) で Web サービスを作成した場合は、サンプル データはモデルのトレーニングに使用したデータから取得されます。 サービスをプログラムで作成した場合は、データは JSON パッケージの一部として提供したサンプル データから取得されます。


