---
title: プール ノードへのアプリケーションとデータのコピー
description: プール ノードへのアプリケーションとデータのコピーについて説明します。
ms.topic: how-to
ms.date: 02/17/2020
ms.openlocfilehash: e21b8551fb62c4335910fd05bb9590eaf6f7e35a
ms.sourcegitcommit: 845a55e6c391c79d2c1585ac1625ea7dc953ea89
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/05/2020
ms.locfileid: "85954895"
---
# <a name="copy-applications-and-data-to-pool-nodes"></a>プール ノードへのアプリケーションとデータのコピー

Azure Batch は、データとアプリケーションをタスクで使用できるように、データとアプリケーションをコンピューティング ノードに取り込むいくつかの方法をサポートしています。 ジョブ全体を実行するためにデータとアプリケーションが必要になる場合があるため、すべてのノードにインストールする必要があります。 特定のタスクに対してのみ必要なものもあれば、ジョブにインストールする必要があるものの、すべてのノードに存在する必要がないものもあります。 Batch には、これらのシナリオごとにツールが用意されています。

- **プールの開始タスク リソース ファイル**:プール内のすべてのノードにインストールする必要があるアプリケーションまたはデータの場合。 この方法は、インストール コマンドを実行するために、アプリケーション パッケージまたは開始タスクのリソース ファイル コレクションと共に使用します。  

例 : 
- 開始タスクのコマンド ラインを使用してアプリケーションを移動またはインストールする

- Azure ストレージ アカウント内の特定のファイルまたはコンテナーの一覧を指定します。 詳細については、[REST ドキュメントの add#resourcefile](/rest/api/batchservice/pool/add#resourcefile) を参照してください。

- プールで実行されるすべてのジョブは、最初に MyApplication.msi を使用してインストールされた MyApplication.exe を実行します。 このメカニズムを使用する場合は、開始タスクの **成功を待機** プロパティを **true** に設定する必要があります。 詳細については、[REST ドキュメントの add#starttask](/rest/api/batchservice/pool/add#starttask) を参照してください。

- プールの**アプリケーション パッケージの参照**:プール内のすべてのノードにインストールする必要があるアプリケーションまたはデータの場合。 アプリケーション パッケージに関連付けられているインストール コマンドはありませんが、開始タスクを使用して任意のインストール コマンドを実行できます。 アプリケーションのインストールが必要ない場合、または多数のファイルで構成されている場合は、この方法を使用できます。 アプリケーション パッケージは、大量のファイル参照を小さなペイロードに結合するため、多数のファイルに適しています。 100 を超える個別のリソース ファイルを 1 つのタスクに追加しようとすると、1 つのタスクの内部システム制限に対して Batch サービスが発生する可能性があります。 また、同じアプリケーションの異なるバージョンが多数存在する可能性があり、それらを選択する必要がある厳密なバージョン管理要件がある場合は、アプリケーション パッケージを使用します。 詳細については、「[Batch アプリケーション パッケージを使用したコンピューティング ノードへのアプリケーションのデプロイ](./batch-application-packages.md)」を参照してください。

- **ジョブ準備タスク リソース ファイル**:ジョブを実行するためにインストールする必要があるが、プール全体にインストールする必要がないアプリケーションまたはデータの場合に使用します。 たとえば、プールにさまざまな種類のジョブがあり、実行に MyApplication.msi が必要なジョブの種類が 1 つしかない場合は、インストール手順をジョブ準備タスクに配置するのが理にかなっています。 ジョブ準備タスクの詳細については、「[Batch コンピューティング ノードでのジョブ準備タスクとジョブ解放タスクの実行](./batch-job-prep-release.md)」を参照してください。

- **タスク リソース ファイル**:アプリケーションまたはデータが個々のタスクにのみ関連する場合に使用します。 次に例を示します。5 つのタスクがあり、それぞれが別のファイルを処理し、BLOB ストレージに出力を書き込みます。  この場合、各タスクに独自の入力ファイルがあるため、**タスク リソース ファイル** コレクションに入力ファイルを指定する必要があります。

## <a name="determine-the-scope-required-of-a-file"></a>ファイルに必要なスコープを決定する

ファイルのスコープ (プール、ジョブ、タスク) を決定する必要があります。 プールにスコープが設定されているファイルでは、プール アプリケーション パッケージまたは開始タスクを使用する必要があります。 ジョブにスコープが設定されているファイルは、ジョブ準備タスクを使用する必要があります。 プールまたはジョブ レベルでスコープが設定されているファイルの例としては、アプリケーションが挙げられます。 タスクにスコープが設定されているファイルでは、タスク リソース ファイルを使用する必要があります。

### <a name="other-ways-to-get-data-onto-batch-compute-nodes"></a>Batch コンピューティング ノードにデータを取り込むその他の方法

Batch REST API に正式に統合されていない Batch コンピューティング ノードにデータを取り込む方法は他にもあります。 Azure Batch ノードを制御し、カスタム実行可能ファイルを実行できるため、Batch ノードがターゲットに接続されていて、そのソースに対する資格情報が Azure Batch ノードにある限り、任意の数のカスタム ソースからデータをプルできます。 一般的な例を次に示します。

- SQL からのデータのダウンロード
- 他の Web サービス/カスタムの場所からのデータのダウンロード
- ネットワーク共有のマッピング

### <a name="azure-storage"></a>Azure Storage

Blob ストレージには、ダウンロードのスケーラビリティ ターゲットがあります。 Azure Storage のファイル共有のスケーラビリティ ターゲットは、1 つの BLOB の場合と同じです。 サイズは、必要なノードとプールの数に影響します。

