---
title: Azure VM バックアップからファイルとフォルダーを回復する
description: この記事では、Azure 仮想マシンの復旧ポイントからファイルとフォルダーを回復する方法について説明します。
ms.topic: conceptual
ms.date: 03/01/2019
ms.openlocfilehash: 4565929b5475e2348685fbec77b596b65ed73fd6
ms.sourcegitcommit: d12880206cf9926af6aaf3bfafda1bc5b0ec7151
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/10/2020
ms.locfileid: "77114328"
---
# <a name="recover-files-from-azure-virtual-machine-backup"></a>Azure 仮想マシンのバックアップからファイルを回復する

Azure Backup は、[Azure 仮想マシン (VM) とディスク](./backup-azure-arm-restore-vms.md)を Azure VM のバックアップ (復旧ポイントとも呼ばれる) から復元する機能を提供します。 この記事では、Azure VM のバックアップからファイルやフォルダーを回復する方法について説明します。 ファイルやフォルダーを回復する機能は、Resource Manager モデルを使用してデプロイされ、Recovery Services コンテナーに保護されている Azure VM に対してのみ使用できます。

> [!NOTE]
> この機能は、Resource Manager モデルを使用してデプロイされ、Recovery Services コンテナーに保護されている Azure VM に対して使用できます。
> 暗号化された VM バックアップからのファイルの回復はサポートされていません。
>

## <a name="mount-the-volume-and-copy-files"></a>ボリュームをマウントしてファイルをコピーする

復旧ポイントからファイルまたはフォルダーを復元するには、仮想マシンに移動し、目的の復旧ポイントを選択します。

1. [Azure Portal](https://portal.Azure.com) にサインインし、左側のウィンドウで **[仮想マシン]** をクリックします。 仮想マシンの一覧から、仮想マシンを選択して、その仮想マシンのダッシュボードを開きます。

2. 仮想マシンのメニューで、 **[バックアップ]** をクリックし、[バックアップ] ダッシュボードを開きます。

    ![Recovery Services コンテナーを開く](./media/backup-azure-restore-files-from-vm/open-vault-for-vm.png)

3. [バックアップ] ダッシュボード メニューで、 **[ファイルの回復]** をクリックします。

    ![[ファイルの回復] ボタン](./media/backup-azure-restore-files-from-vm/vm-backup-menu-file-recovery-button.png)

    **[ファイルの回復]** メニューが開きます。

    ![[ファイルの回復] メニュー](./media/backup-azure-restore-files-from-vm/file-recovery-blade.png)

4. **[回復ポイントの選択]** ドロップダウン メニューで、目的のファイルを保持する回復ポイントを選択します。 既定では、最新の回復ポイントが既に選択されています。

5. 回復ポイントからファイルをコピーするために使用するソフトウェアをダウンロードするには、 **[実行可能ファイルのダウンロード]** (Windows Azure VM の場合) または **[スクリプトのダウンロード]** (Linux Azure VM の場合。これにより、Python スクリプトが生成されます) をクリックします。

    ![生成されたパスワード](./media/backup-azure-restore-files-from-vm/download-executable.png)

    Azure は、実行可能ファイルまたはスクリプトをローカル コンピューターにダウンロードします。

    ![実行可能ファイルまたはスクリプトのダウンロード メッセージ](./media/backup-azure-restore-files-from-vm/run-the-script.png)

    実行可能ファイルまたはスクリプトを管理者として実行するには、ダウンロードしたファイルをコンピューターに保存することをお勧めします。

6. 実行可能ファイルまたはスクリプトは、パスワードで保護されているため、パスワードが必要です。 **[ファイルの回復]** メニューで、コピー ボタンをクリックしてパスワードをメモリに読み込みます。

    ![生成されたパスワード](./media/backup-azure-restore-files-from-vm/generated-pswd.png)

7. ダウンロードの場所 (通常は [ダウンロード] フォルダー) で、実行可能ファイルまたはスクリプトを右クリックし、管理者の資格情報を使用して実行します。 メッセージが表示されたら、パスワードを入力するか、またはメモリからのパスワードを貼り付けて、**Enter** キーを押します。 有効なパスワードが入力されると、スクリプトが復旧ポイントに接続されます。

    ![[ファイルの回復] メニュー](./media/backup-azure-restore-files-from-vm/executable-output.png)

8. Linux マシンの場合は Python スクリプトが生成されます。 このスクリプトをダウンロードして、適切な (対応している) Linux サーバーにコピーする必要があります。 それを実行するためには、```chmod +x <python file name>``` でアクセス許可を変更しなければならない場合があります。 そのうえで、```./<python file name>``` を使用し、Python ファイルを実行します。

スクリプトが確実に正常に実行されるようにするために、[アクセス要件](#access-requirements)に関するセクションを参照してください。

### <a name="identifying-volumes"></a>ボリュームの識別

#### <a name="for-windows"></a>Windows の場合

実行可能ファイルを実行すると、オペレーティング システムは新しいボリュームをマウントし、ドライブ文字を割り当てます。 Windows エクスプローラーまたはファイル エクスプローラーを使用してそれらのドライブを参照できます。 ボリュームに割り当てられるドライブ文字は、元の仮想マシンと同じ文字にならない可能性があります。 ただし、ボリューム名は保持されます。 たとえば、元の仮想マシン上のボリュームが "データ ディスク (E:`\`)" であった場合、そのボリュームは、ローカル コンピューターに "データ ディスク ('任意のドライブ文字':`\`)" としてアタッチされる可能性があります。 ファイルまたはフォルダーが表示されるまで、スクリプトの出力に示されているすべてのボリュームを参照します。  

   ![[ファイルの回復] メニュー](./media/backup-azure-restore-files-from-vm/volumes-attached.png)

#### <a name="for-linux"></a>Linux の場合

Linux では、復旧ポイントのボリュームはスクリプトが実行されるフォルダーにマウントされます。 それに応じて、接続されたディスク、ボリューム、対応するマウント パスが示されます。 これらのマウント パスは、ルート レベルのアクセス権を持つユーザーに表示されます。 スクリプトの出力に示されたボリュームを参照します。

  ![Linux の [ファイルの回復] メニュー](./media/backup-azure-restore-files-from-vm/linux-mount-paths.png)

## <a name="closing-the-connection"></a>接続を閉じる

ファイルを識別してローカル ストレージの場所にコピーした後、追加ドライブを削除 (またはマウント解除) します。 ドライブをマウント解除するには、Azure Portal の **[ファイルの回復]** メニューで **[ディスクのマウント解除]** をクリックします。

![ディスクのマウント解除](./media/backup-azure-restore-files-from-vm/unmount-disks3.png)

ディスクがマウント解除されると、メッセージが表示されます。 接続を更新してディスクを解除できるようになるまで数分かかることがあります。

Linux では、復旧ポイントへの接続が切断された後、OS によって対応するマウント パスが自動的に削除されるわけではありません。 マウント パスは "孤立" ボリュームとして存在し、表示されていますが、ファイルへのアクセスや書き込みを行うと、エラーがスローされます。 マウント パスは手動で削除できます。 実行時に、スクリプトは以前の復旧ポイントから存在するこのようなボリュームを特定し、同意を得たうえでクリーンアップします。

## <a name="special-configurations"></a>特殊な構成

### <a name="dynamic-disks"></a>ダイナミック ディスク

次のいずれかまたは両方の特性を持つボリュームが保護された Azure VM に含まれている場合、その VM では実行可能スクリプトを実行することはできません。

- 複数のディスクにまたがるボリューム (スパンおよびストライプ ボリューム)
- ダイナミック ディスク上のフォールト トレラント ボリューム (ミラー化および RAID 5 ボリューム)

代わりに、互換性のあるオペレーティング システムを使用する他のコンピューターで実行可能スクリプトを実行します。

### <a name="windows-storage-spaces"></a>Windows 記憶域スペース

Windows 記憶域スペースは、記憶域を仮想化できるようにする Windows テクノロジです。 Windows 記憶域スペースを使用すると、業界標準のディスクを記憶域プールにグループ化することができます。 そのような記憶域プール内の有効な領域を使用して、記憶域スペースと呼ばれる仮想ディスクを作成します。

保護された Azure VM で Windows 記憶域スペースが使用されている場合、その VM で実行可能スクリプトを実行することはできません。 代わりに、互換性のあるオペレーティング システムを使用する他のマシンで実行可能スクリプトを実行します。

### <a name="lvmraid-arrays"></a>LVM/RAID アレイ

Linux では、論理ボリューム マネージャー (LVM) やソフトウェア RAID アレイを使用して、複数のディスクの論理ボリュームを管理します。 保護された Linux VM で LVM/RAID アレイを使用している場合、その VM でスクリプトを実行することはできません。 代わりに、保護された VM のファイル システムをサポートする、互換性のある OS を使用し、任意の他のマシンでスクリプトを実行します。

次のスクリプトの出力には、LVM/RAID アレイのディスク、ボリューム、パーティションの種類が表示されます。

   ![Linux LVM 出力メニュー](./media/backup-azure-restore-files-from-vm/linux-LVMOutput.png)

これらのパーティションをオンラインにするには、次のセクションにあるコマンドを実行します。

#### <a name="for-lvm-partitions"></a>LVM パーティションの場合

物理ボリュームのボリューム グループ名を一覧表示するには、次のようにします。

```bash
#!/bin/bash
pvs <volume name as shown above in the script output>
```

ボリューム グループのすべての論理ボリューム、名前、パスを一覧表示するには、次のようにします。

```bash
#!/bin/bash
lvdisplay <volume-group-name from the pvs command’s results>
```

論理ボリュームを任意のパスにマウントするには、次のようにします。

```bash
#!/bin/bash
mount <LV path> </mountpath>
```

#### <a name="for-raid-arrays"></a>RAID アレイの場合

次のコマンドにより、すべての RAID ディスクの詳細が表示されます。

```bash
#!/bin/bash
mdadm –detail –scan
```

 関連する RAID ディスクは `/dev/mdm/<RAID array name in the protected VM>` と表示されます。

RAID ディスクに物理ボリュームがある場合は、mount コマンドを使用します。

```bash
#!/bin/bash
mount [RAID Disk Path] [/mountpath]
```

RAID ディスクに別の LVM が構成されている場合は、前に説明した手順を LVM パーティションにも使用します。ただし、RAID ディスク名の代わりに、ボリューム名を使用します。

## <a name="system-requirements"></a>システム要件

### <a name="for-windows-os"></a>Windows OS の場合

次の表は、サーバーとコンピューターのオペレーティング システムの互換性を示しています。 ファイルを回復する場合、オペレーティング システムの以前のバージョンまたは以降のバージョンにファイルを復元することはできません。 たとえば、Windows Server 2016 VM から Windows Server 2012 または Windows 8 コンピューターにファイルを復元することはできません。 VM からは、同じサーバー オペレーティング システムへ、または互換性のあるクライアント オペレーティング システムへファイルを復元できます。

|サーバー OS | 互換性のあるクライアント OS  |
| --------------- | ---- |
| Windows Server 2019    | Windows 10 |
| Windows Server 2016    | Windows 10 |
| Windows Server 2012 R2 | Windows 8.1 |
| Windows Server 2012    | Windows 8  |
| Windows Server 2008 R2 | Windows 7   |

### <a name="for-linux-os"></a>Linux OS の場合

Linux では、ファイルの復元に使用するコンピューターの OS が、保護された仮想マシンのファイル システムをサポートしている必要があります。 スクリプトを実行するコンピューターを選択する場合は、コンピューターに互換性のある OS がインストールされていること、かつ、次の表に示すバージョンのいずれかが使用されていることを確認します。

|Linux OS | バージョン  |
| --------------- | ---- |
| Ubuntu | 12.04 以降 |
| CentOS | 6.5 以降  |
| RHEL | 6.7 以降 |
| Debian | 7 以降 |
| Oracle Linux | 6.4 以降 |
| SLES | 12 以降 |
| openSUSE | 42.2 以降 |

> [!NOTE]
> SLES 12 SP4 OS のマシンでファイルの回復スクリプトを実行中に、いくつかの問題が発生することがわかりました。SLES チームと調査中です。
> 現在、ファイルの回復スクリプトの実行は、SLES 12 SP2 および SP3 の OS のバージョンのマシンで動作します。
>

スクリプトを実行し、復旧ポイントに安全に接続するには、Python および Bash コンポーネントも必要となります。

|コンポーネント | Version  |
| --------------- | ---- |
| Bash | 4 以降 |
| Python | 2.6.6 以降  |
| TLS | 1.2 がサポートされている必要があります。  |

## <a name="access-requirements"></a>アクセス要件

アクセスが制限されたコンピューターでスクリプトを実行する場合は、以下にアクセスできることを確認します。

- `download.microsoft.com`
- リカバリ サービスの URL (geo 名はリカバリ サービス コンテナーが存在するリージョンを表します)
  - <https://pod01-rec2.geo-name.backup.windowsazure.com> (Azure の パブリック地域用)
  - <https://pod01-rec2.geo-name.backup.windowsazure.cn> (Azure China 21Vianet 用)
  - <https://pod01-rec2.geo-name.backup.windowsazure.us> (Azure US Government 用)
  - <https://pod01-rec2.geo-name.backup.windowsazure.de> (Azure Germany 用)
- 送信ポート 3260

> [!NOTE]
>
> - ダウンロードしたスクリプト ファイル名には、URL に **geo-name** が含まれます。 例: ダウンロードしたスクリプト名は、\'VMname\'\_\'geoname\'_\'GUID\' で始まります (*ContosoVM_wcus_12345678* など)
> - URL は <https://pod01-rec2.wcus.backup.windowsazure.com>" になります
>

Linux の場合、スクリプトによって復旧ポイントに接続するには "open-iscsi" および "lshw" コンポーネントが必要です。 スクリプトを実行するコンピューターに目的のコンポーネントが存在しない場合は、コンポーネントをインストールするためのアクセス許可をスクリプトから求められます。 同意して、必要なコンポーネントをインストールします。

スクリプトを実行するコンピューターと復旧ポイントのデータの間にセキュリティで保護されたチャネルを構築するために使われるコンポーネントをダウンロードするには、`download.microsoft.com` へのアクセスが必要です。

バックアップされた VM と同じ (または互換性のある) オペレーティング システムを使用する任意のマシンでスクリプトを実行できます。 互換性のあるオペレーティング システムについては、「[互換性のある OS](backup-azure-restore-files-from-vm.md#system-requirements)」の表を参照してください。 保護されている Azure 仮想マシンで Windows 記憶域スペース (Windows Azure VM の場合) または LVM/RAID アレイ (Linux VM の場合) を使用している場合、その仮想マシンで実行可能ファイルまたはスクリプトを実行することはできません。 代わりに、互換性のあるオペレーティング システムを使用する他のマシンで実行可能ファイルまたはスクリプトを実行します。

## <a name="file-recovery-from-virtual-machine-backups-having-large-disks"></a>大容量ディスクを含む仮想マシンのバックアップからのファイルの回復

このセクションでは、16 を超える数のディスクがあり、かつ各ディスク サイズが 32 TB を超える Azure 仮想マシンのバックアップからファイルの回復を実行する方法について説明します。

ファイルの回復プロセスではバックアップのすべてのディスクがアタッチされるため、多数のディスク (16 を超える) または大容量ディスク (それぞれ 32 TB を超える) が使用されている場合は、次のアクション ポイントが推奨されます。

- ファイルの回復のために個別の復元サーバー (Azure VM D2v3 VM) を保持します。 それはファイルの回復にのみ使用でき、必要がないときはシャットダウンできます。 元のコンピューターへの復元は、VM 自体に大きな影響を与えるためお勧めできません。
- 次に、ファイルの回復操作が成功するかどうかを確認するために、スクリプトを 1 回実行します。
- ファイルの回復プロセスがハングアップする (ディスクがマウントされないか、またはマウントされてもボリュームが表示されない) 場合は、次の手順を実行します。
  - 復元サーバーが Windows VM である場合:
    - OS が WS 2012 以上であることを確認します。
    - 復元サーバーでレジストリ キーが次の推奨のとおりに設定されていることを確認し、サーバーを確実に再起動します。 GUID のそばにある番号は 0001 から 0005 までの範囲にあります。 次の例では、0004 になっています。 レジストリ キーのパスをパラメーターのセクションまで移動します。

    ![iscsi-reg-key-changes.png](media/backup-azure-restore-files-from-vm/iscsi-reg-key-changes.png)

```registry
- HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Disk\TimeOutValue – change this from 60 to 1200
- HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\Class\{4d36e97b-e325-11ce-bfc1-08002be10318}\0003\Parameters\SrbTimeoutDelta – change this from 15 to 1200
- HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\Class\{4d36e97b-e325-11ce-bfc1-08002be10318}\0003\Parameters\EnableNOPOut – change this from 0 to 1
- HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\Class\{4d36e97b-e325-11ce-bfc1-08002be10318}\0003\Parameters\MaxRequestHoldTime - change this from 60 to 1200
```

- 復元サーバーが Linux VM である場合:
  - ファイル /etc/iscsi/iscsid.conf で、設定を次のように変更します。
    - node.conn[0].timeo.noop_out_timeout = 5 から node.conn[0].timeo.noop_out_timeout = 30 に
- 上記の変更を行った後、スクリプトをもう一度実行します。 これらの変更により、ファイルの回復が成功する可能性が高くなります。
- ユーザーがスクリプトをダウンロードするたびに、Azure Backup は、ダウンロード用に復旧ポイントを準備するプロセスを開始します。 大容量ディスクでは、このプロセスにかなりの時間がかかります。 要求の連続したバーストが発生すると、ターゲットの準備がダウンロードのスパイラルに陥ります。 そのため、ポータル、PowerShell、または CLI からスクリプトをダウンロードするには、20 分から 30 分 (ヒューリスティック) 待ってから実行することをお勧めします。 この時間までに、ターゲットは、スクリプトからの接続に対して準備できると予測されます。
- ファイルの回復の後、ポータルに戻り、ボリュームをマウントできなかった復旧ポイントのために **[ディスクのマウント解除]** をクリックするようにしてください。 基本的には、この手順によって既存のプロセス/セッションがすべて消去され、回復の可能性が向上します。

## <a name="troubleshooting"></a>トラブルシューティング

仮想マシンからのファイルの回復中に問題が発生した場合は、次の表で追加情報を確認してください。

| エラー メッセージ/シナリオ | 考えられる原因 | 推奨される操作 |
| ------------------------ | -------------- | ------------------ |
| 実行可能プログラムの出力:*ターゲットへの接続中に例外がキャッチされました* | スクリプトで回復ポイントにアクセスできません    | コンピューターが[前述のアクセス要件](#access-requirements)を満たしているかどうかを確認します。 |  
| 実行可能プログラムの出力:*ターゲットは iSCSI セッション経由で既にログインされています。* | スクリプトは同じコンピューターで既に実行され、ドライブがアタッチされています | 回復ポイントのボリュームは既にアタッチされています。 ボリュームは、元の VM と同じドライブ文字でマウントされないことがあります。 エクスプローラーで、使用可能なすべてのボリュームを参照してファイルを探してください。 |
| 実行可能プログラムの出力:*ディスクがポータルからマウント解除されているか、12 時間制限を超過しているため、 このスクリプトは無効です。Download a new script from the portal. (ポータルから新しいスクリプトをダウンロードしてください。)* " |    ディスクがポータルからマウント解除されているか、12 時間制限を超過しています | この特定の実行可能ファイルは、現在無効であり、実行できません。 その回復ポイントインタイムのファイルにアクセスする場合は、ポータルで新しい実行可能ファイルを取得してください。|
| 実行可能プログラムが実行されているマシンで:[マウント解除] ボタンをクリックしても、新しいボリュームがマウント解除されない | コンピューター上の iSCSI イニシエーターがターゲットへの接続に応答しないか、接続が更新されず、キャッシュが維持されています。 |  **[マウント解除]** をクリックした後、数分待ちます。 新しいボリュームがマウント解除されない場合は、すべてのボリュームを参照します。 すべてのボリュームを参照すると、イニシエーターが接続を更新し、ボリュームがマウント解除され、ディスクが使用できないことを示すエラー メッセージが表示されます。|
| 実行可能プログラムの出力:スクリプトは正常に実行されるが、"New volumes attached (新しいボリュームがアタッチされました)" が表示されない |    これは一時的なエラーです    | ボリュームは既にアタッチされています。 エクスプローラーを開いて参照します。 毎回同じコンピューターでスクリプトを実行している場合は、マシンの再起動を検討してください。次回の実行可能ファイルの実行時に一覧が表示されます。 |
| Linux 固有:目的のボリュームを表示できない | スクリプトを実行するマシンの OS が、保護された VM の基になるファイル システムを認識していない可能性があります | 復旧ポイントがクラッシュ整合性とファイル整合性のどちらであるかを確認します。 ファイル整合性の場合、保護された VM のファイル システムが OS で認識される別のマシンでスクリプトを実行します。 |
| Windows 固有:目的のボリュームを表示できない | ディスクはアタッチされている可能性がありますが、ボリュームが構成されていません | ディスクの管理画面から、復旧ポイントに関連する追加のディスクを識別します。 これらのディスクのいずれかがオフライン状態の場合は、そのディスクを右クリックし、 **[オンライン]** をクリックしてオンライン状態にします。|

## <a name="security"></a>Security

このセクションでは、Azure VM バックアップからのファイル回復を実装するために講じるさまざまなセキュリティ対策について説明します。

### <a name="feature-flow"></a>機能のフロー

この機能は、VM 全体または VM ディスクを復元することなく、最小限の数の手順で VM データにアクセスするために構築されました。 VM データへのアクセスは、(次に示すように、実行時に回復ボリュームをマウントする) スクリプトによって提供されるため、これがすべてのセキュリティ実装の基盤を形成しています。

  ![セキュリティ機能のフロー](./media/backup-azure-restore-files-from-vm/vm-security-feature-flow.png)

### <a name="security-implementations"></a>セキュリティの実装

#### <a name="select-recovery-point-who-can-generate-script"></a>回復ポイントを選択する (スクリプトを生成できるユーザー)

スクリプトは VM データへのアクセスを提供するため、最初に誰がスクリプトを生成できるかを制限することが重要です。 スクリプトを生成するには、Azure portal にサインインし、[RBAC で承認](backup-rbac-rs-vault.md#mapping-backup-built-in-roles-to-backup-management-actions)される必要があります。

ファイルの回復には、VM の復元とディスクの復元に必要な承認レベルと同じレベルが必要です。 つまり、承認されたユーザーのみが VM データを表示してスクリプトを生成できます。

生成されたスクリプトは、Azure Backup サービス用の Microsoft の公式な証明書で署名されます。 スクリプトの改ざんは署名が壊れることを意味し、スクリプトを実行するあらゆる試みは潜在的なリスクとして OS で強調表示されます。

#### <a name="mount-recovery-volume-who-can-run-script"></a>回復ボリュームをマウントする (スクリプトを実行できるユーザー)

管理者だけがスクリプトを実行できます。管理者特権モードで実行する必要があります。 スクリプトは、事前生成済みの一連の手順のみを実行し、いかなる外部ソースからの入力も受け入れません。

スクリプトを実行するには、Azure portal、PowerShell、または CLI でスクリプトの生成時に承認されたユーザーに対してのみ表示されるパスワードが必要です。 これは、スクリプトをダウンロードした承認されたユーザーが、スクリプトの実行にも責任を負うようにするためです。

#### <a name="browse-files-and-folders"></a>ファイルとフォルダーを参照する

ファイルとフォルダーを参照するために、スクリプトではマシン内の iSCSI イニシエーターを使用して、iSCSI ターゲットとして構成されている復旧ポイントに接続します。 ここで、いずれかまたはすべてのコンポーネントを誰かが模倣、なりすましをしようとしているシナリオが想定できます。

Microsoft では、各コンポーネントの相互の認証ができるように、相互の CHAP 認証メカニズムを使用しています。 つまり、偽のイニシエーターが iSCSI ターゲットに接続したり、偽のターゲットがスクリプトを実行するマシンに接続するのは非常に困難です。

回復サービスとマシン間のデータ フローは、TCP 経由でセキュリティで保護された SSL トンネルを構築することで保護されます (スクリプトを実行するマシンでは、[TLS 1.2 がサポートされている必要があります](#system-requirements))。

親 VM またはバックアップされた VM に存在するすべてのファイル アクセス制御リスト (ACL) は、マウントされているファイル システムにも保持されます。

スクリプトにより回復ポイントへの読み取り専用アクセスが提供されます。有効期間は 12 時間だけです。 それより前にアクセスを削除したい場合は、Azure portal、PowerShell、または CLI にサインインして、その特定の復旧ポイントに対して**ディスクのマウント解除**を実行します。 スクリプトはすぐに無効になります。

## <a name="next-steps"></a>次のステップ

- ファイルの復元中に発生する問題については、「[トラブルシューティング](#troubleshooting)」セクションを参照してください。
- [PowerShell を使用してファイルを復元する](https://docs.microsoft.com/azure/backup/backup-azure-vms-automation#restore-files-from-an-azure-vm-backup)方法を確認します。
- [Azure CLI を使用してファイルを復元する](https://docs.microsoft.com/azure/backup/tutorial-restore-files)方法を確認します。
- VM が復元された後、[バックアップを管理する](https://docs.microsoft.com/azure/backup/backup-azure-manage-vms)方法について説明します。
