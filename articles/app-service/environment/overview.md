---
title: App Service Environment の概要
description: App Service Environment の概要
author: ccompy
ms.assetid: 3d37f007-d6f2-4e47-8e26-b844e47ee919
ms.topic: article
ms.date: 03/02/2021
ms.author: ccompy
ms.custom: seodec18
ms.openlocfilehash: 23b23340550ded3642d19500270f06cfb6faf8cb
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2021
ms.locfileid: "101735099"
---
# <a name="app-service-environment-overview"></a>App Service Environment の概要 

> [!NOTE]
> この記事では、App Service Environment v3 (プレビュー) について説明します。
> 

Azure App Service Environment は、App Service アプリを大規模かつ安全に実行するために完全に分離された専用の環境を提供する、Azure App Service の機能です。 この機能は、以下をホストできます。

- Windows Web アプリ
- Linux Web アプリ
- Docker コンテナー
- 関数

App Service Environment (ASE) は、以下を必要とするアプリケーション ワークロードに最適です。

- 高スケール。
- 分離およびセキュリティで保護されたネットワーク アクセス。
- 高いメモリ使用率。
- 高い RPS (Requests Per Second: 1 秒あたりの要求数)。 複数の ASE を 1 つの Azure リージョン内に作成することも、複数の Azure リージョンにわたって作成することもできます。 この柔軟性により、ASE は、高い RPS 要件を持つステートレス アプリケーションの水平方向のスケーリングに最適です。

ASE では、単一の顧客のアプリケーションは VNet の 1 つでホストされます。 顧客は、受信と送信の両方のアプリケーション ネットワーク トラフィックをきめ細かく制御することができます。 アプリケーションは VPN を介した、オンプレミスの企業リソースへのセキュリティで保護された高速な接続を確立することができます。

ASEv3 には、独自の価格レベルである Isolated V2 が付属しています。
App Service Environments v3 では、ネットワークのサブネット内のアプリを保護するための環境と、Azure App Service の独自のプライベートなデプロイが提供されます。
複数の ASE を使って水平方向にスケーリングすることができます。 ASE で実行されるアプリへのアクセスは、Web アプリケーション ファイアウォール (WAF) などのアップストリーム デバイスによって制限できます。 詳細については、Web アプリケーション ファイアウォール (WAF) に関するページを参照してください。

## <a name="usage-scenarios"></a>使用シナリオ

App Service Environment には、次のようなさまざまなユース ケースがあります。

- 内部基幹業務アプリケーション
- 30 を超える ASP インスタンスを必要とするアプリケーション
- 内部のコンプライアンスまたはセキュリティ要件を満たすための単一のテナント システム
- ネットワーク分離アプリケーションのホスト
- 多層アプリケーション

マルチテナント App Service のアプリをネットワーク分離リソースに接続したり、それ自体をネットワークから分離するためのさまざまなネットワーク機能があります。 これらの機能は、アプリケーション レベルで有効になります。  ASE では、アプリを VNet に配置するための追加の構成はアプリにありません。 アプリは、VNet に既に存在するネットワーク分離環境にデプロイされます。 ASE は、ネットワーク分離アプリのホストであるほか、単一のテナント システムでもあります。 ASE を使用する他の顧客は存在しません。 完全な分離環境が実際に必要な場合は、ASE を専用のハードウェアにデプロイすることもできます。 ネットワーク分離アプリケーションのホストと単一のテナントの機能を持ちます。 

## <a name="dedicated-environment"></a>専用の環境
ASE は、単一のサブスクリプション専用であり、複数の App Service プランの合計 200 の App Service プラン インスタンスをホストできます。 "インスタンス" とは、App Service プランの水平方向のスケーリングを指します。 各インスタンスは、worker ロールに相当します。 1 つの ASE には合計で 200 のインスタンスを含めることができるのに対し、1 つの分離された v2 App Service プランでは 100 インスタンスを保持できます。 ASE では、それぞれ 100 インスタンスを含む 2 つの App Service プラン、200 の単一インスタンスの App Service プラン、またはその間のどのようなプランでも保持できます。

ASE は、フロントエンドとワーカーで構成されます。 フロントエンドは、HTTP/HTTPS ターミネーションと、ASE 内でのアプリ要求の自動負荷分散を担当します。 ASE で App Service プランをスケールアウトすると、フロントエンドが自動的に追加されます。

ワーカーは、お客様のアプリをホストする役割です。 ワーカーは、3 つの固定サイズで使用できます。

- 2 vCPU/8 GB RAM
- 4 vCPU/16 GB RAM
- 8 vCPU/32 GB RAM

フロント エンドとワーカーを顧客が管理する必要はありません。 すべてのインフラストラクチャが自動的に設定されます。 App Service プランが ASE で作成、スケーリングされるときに、必要なインフラストラクチャが適宜追加または削除されます。

Isolated V2 App Service プラン インスタンスには料金が発生します。 ASE に App Service プランが全くない場合は、2 つのコア ワーカーの 1 つのインスタンスで 1 つの App Service プランを取得した場合と同様に課金されます。

## <a name="virtual-network-support"></a>Virtual Network のサポート
ASE 機能は、お客様の Azure Resource Manager 仮想ネットワークに Azure App Service を直接デプロイしたものです。 ASE は、常に仮想ネットワークのサブネットに存在します。 仮想ネットワークのセキュリティ機能を使って、アプリの送受信方向のネットワーク通信を制御することができます。

ネットワーク セキュリティ グループを使用して、受信ネットワーク通信を、ASE が存在するサブネットに制限できます。 NSG を使用することで、WAF やネットワーク SaaS プロバイダーなど、アップストリーム デバイスおよびサービスの背後でアプリを実行できます。

また、アプリは、内部データベースや Web サービスなどの企業リソースに頻繁にアクセスする必要があります。 オンプレミス ネットワークへの VPN 接続が備わった仮想ネットワークに ASE をデプロイした場合、その ASE 内のアプリはオンプレミス リソースにアクセスすることができます。 この機能は、VPN がサイト対サイトか Azure ExpressRoute VPN かに関係なく当てはまります。

## <a name="preview"></a>[プレビュー]
App Service Environment v3 はパブリック プレビュー段階にあります。  プレビューの進行中に、一部の機能が追加されます。 ASEv3 の現在の制限事項は次のとおりです。

- 50 インスタンスを超えて App Service プランをスケーリングできない
- プライベート レジストリからコンテナーを取得できない
- 現在サポートされていない App Service 機能は顧客の VNet を経由できない
- インターネットにアクセス可能なエンドポイントを持つ外部デプロイ モデルがない
- コマンド ラインがサポートされていない (AZ CLI と PowerShell)
- ASEv2 から ASEv3 へのアップグレード機能がない
- FTP がサポートされていない
- 顧客の VNet を経由する一部の App Service 機能がサポートされていない。 サービス エンドポイントまたはプライベート エンドポイントでは、バックアップ/復元、アプリ設定での Key Vault 参照、プライベート コンテナー レジストリの使用、ストレージへの診断ログの記録が機能しません。
    
### <a name="asev3-preview-architecture"></a>ASEv3 プレビューのアーキテクチャ
ASEv3 プレビューでは、ASE でプライベート エンドポイントを使用して受信トラフィックがサポートされます。 プライベート エンドポイントは、GA によってロード バランサーに置き換えられます。 プレビュー段階では、インターネット アクセスが可能なエンドポイントのサポートは ASE に組み込まれません。 このような目的で Application Gateway を追加することもできます。 ASE には、2 つのサブネット内のリソースが必要です。  受信トラフィックは、プライベート エンドポイントを経由してフローします。 プライベート エンドポイントは、プライベート エンドポイントで使用できるアドレスを持つ限り、任意のサブネットに配置できます。  送信サブネットは空で、Microsoft.Web/hostingEnvironments に委任されている必要があります。 送信サブネットは ASE で使用されますが、他のものに使用することはできません。

ASEv3 では、ASE サブネットに受信または送信ネットワークの要件はありません。 ネットワーク セキュリティ グループとルート テーブルを使用してトラフィックを制御できます。これにより、アプリケーションのトラフィックのみが影響を受けます。 ASE に関連付けられているプライベート エンドポイントは削除しないでください。この操作を元に戻すことはできません。 ASE に使用されるプライベート エンドポイントは、ASE 内のすべてのアプリに使用されます。 
