---
title: Azure Media Services のライブ イベントとクラウド DVR | Microsoft Docs
description: この記事では、ライブ出力の概要とクラウド DVR の使用方法について説明します。
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 01/14/2019
ms.author: juliako
ms.openlocfilehash: 4dd14587ec7e1473953981c1ef8c32c59eb9a1d6
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/13/2019
ms.locfileid: "60322337"
---
# <a name="using-a-cloud-dvr"></a>クラウド DVR の使用

[ライブ出力](https://docs.microsoft.com/rest/api/media/liveoutputs)では、記録するストリームの量 (たとえば、クラウド DVR の容量) や視聴者がライブ ストリームの視聴を開始することができるかどうかなど、送信ライブ ストリームのプロパティを制御することができます。 **ライブ イベント**とその**ライブ出力**との関係は、従来のテレビの放送と似ており、チャンネル (**ライブ イベント**) はビデオの一定のストリームを表し、録画 (**ライブ出力**) は特定の時間セグメント (たとえば、午後 6 時 30 分から午後 7 時 00 分までの夕方のニュース) を対象としています。 テレビはデジタル ビデオ レコーダー (DVR) を使用して録画することができます。それと同様のライブ イベントの機能は ArchiveWindowLength プロパティを介して管理されます。 これは、ISO-8601 形式で表した期間 (PTHH:MM:SS など) であり、DVR の容量を指定し、最短で 3 分から最長で 25 時間まで設定できます。

## <a name="live-output"></a>ライブ出力

**ArchiveWindowLength** 値で、視聴者が現在のライブ位置からどのくらい戻ることができるかが決まります。  **ArchiveWindowLength** で、クライアント マニフェストが拡大できる期間も決まります。

たとえば、フットボールの試合をストリーミングしていて、**ArchiveWindowLength** がわずか 30 分だとします。 試合の開始から 45 分にイベントの視聴を開始した視聴者は、最高で 15 分の時点まで戻ることができます。 試合の**ライブ出力**は**ライブ イベント**が停止するまで継続されますが、**ArchiveWindowLength** の範囲から外れるコンテンツは引き続きストレージから破棄され、回復できません。 この例では、イベントの開始から 15 分までのビデオは DVR と [Asset](https://docs.microsoft.com/rest/api/media/assets) の BLOB ストレージ内のコンテナーから消去されています。 このアーカイブは回復できず、Azure BLOB ストレージ内のコンテナーから削除されます。

各**ライブ出力**は**アセット**に関連付けられており、ビデオを関連する Azure BLOB ストレージ コンテナーに記録するために使用されます。 ライブ出力を公開するには、その**アセット**用の**ストリーミング ロケーター**を作成する必要があります。 [ストリーミング ロケーター](https://docs.microsoft.com/rest/api/media/streaminglocators) の作成後に、視聴者に提供できるストリーミング URL を構築できます。

**ライブ イベント**では**ライブ出力**の同時実行が最大 3 つまでサポートされるため、1 つのライブ ストリームから最大 3 つの記録/アーカイブを作成できます。 これにより、1 つのイベントのさまざまな部分を必要に応じて発行したりアーカイブしたりできます。 たとえば、24 時間 365 日のライブ リニア フィードを配信し、顧客が見逃したコンテンツをオンデマンド視聴できるよう、終日プログラムの "記録" を作成するとします。 このシナリオではまず、プライマリ ライブ出力を、1 時間以下の短いアーカイブ ウィンドウで作成します。これは、視聴者が受信するプライマリ ライブ ストリームです。 この**ライブ出力**の**ストリーミング ロケーター**を作成し、アプリケーションまたは Web サイトに "ライブ" フィードとして発行することになります。 **ライブ イベント**の実行中、同時実行される 2 つ目の**ライブ出力**を、プログラムの開始 (または後でトリミングしやすいよう 5 分前) の時点でプログラムから作成できます。 この 2 つ目の**ライブ出力**は、プログラムが終了して 5 分後に削除できます。 この 2 つ目の**アセット**を使用すると、新しい**ストリーミング ロケーター**を作成して、アプリケーションのカタログでオンデマンド アセットとしてこのプログラムを公開することができます。 オンデマンド ビデオとして共有したい他のプログラム範囲やハイライトについても、このプロセスを繰り返します。このプロセスはすべて、1 つ目の**ライブ出力**の "ライブ" フィードがリニア フィードを配信し続ける最中に行うことができます。 

> [!NOTE]
> **ライブ出力**は作成すると開始され、削除されると停止します。 **ライブ出力**を削除しても、基になる**アセット**とアセット内のコンテンツは削除されません。 
>
> **ストリーミング ロケーター**を使用して**ライブ出力**アセットを発行した場合、**ライブ イベント** (DVR ウィンドウの長さまで) は、**ストリーミング ロケーター**の有効期限まで、または削除するまで、どちらか早い方のタイミングまで引き続き表示できます。

## <a name="next-steps"></a>次の手順

- [ライブ ストリーミングの概要](live-streaming-overview.md)
- [ライブ ストリーミングのチュートリアル](stream-live-tutorial-with-api.md)

