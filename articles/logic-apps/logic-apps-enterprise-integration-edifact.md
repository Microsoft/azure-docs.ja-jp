---
title: B2B 統合用の EDIFACT メッセージ
description: Azure Logic Apps と Enterprise Integration Pack で B2B エンタープライズ統合用の EDI 形式の EDIFACT メッセージを交換します
services: logic-apps
ms.suite: integration
author: divyaswarnkar
ms.author: divswa
ms.reviewer: jonfan, estfan, logicappspm
ms.topic: article
ms.date: 04/22/2020
ms.openlocfilehash: dfe48a1348929bbe8d4af6793d94d52514df9d74
ms.sourcegitcommit: 3d79f737ff34708b48dd2ae45100e2516af9ed78
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/23/2020
ms.locfileid: "87001538"
---
# <a name="exchange-edifact-messages-for-b2b-enterprise-integration-in-azure-logic-apps-with-enterprise-integration-pack"></a>Azure Logic Apps と Enterprise Integration Pack で B2B エンタープライズ統合用の EDIFACT メッセージを交換する

Azure Logic Apps の EDIFACT メッセージを交換する前に、EDIFACT 契約を作成し、その契約を統合アカウントに格納する必要があります。 EDIFACT 契約を作成する手順を次に示します。

> [!NOTE]
> このページでは、Azure Logic Apps が備えている EDIFACT の機能について説明します。 詳しくは、[X12](logic-apps-enterprise-integration-x12.md) に関する記事をご覧ください。

## <a name="before-you-start"></a>開始する前に

必要な項目を次に示します。

* 既に定義され、Azure サブスクリプションに関連付けられている[統合アカウント](logic-apps-enterprise-integration-create-integration-account.md)  
* 統合アカウントで既に定義されている 2 つ以上の[パートナー](logic-apps-enterprise-integration-partners.md)

> [!NOTE]
> 契約を作成する際は、パートナーとの間で送受信するメッセージの内容と契約の種類とが一致している必要があります。

[統合アカウントを作成](../logic-apps/logic-apps-enterprise-integration-create-integration-account.md)し、[パートナーを追加](logic-apps-enterprise-integration-partners.md)した後に、EDIFACT 契約を作成するには、次の手順に従います。

## <a name="create-an-edifact-agreement"></a>EDIFACT 契約の作成 

1. [Azure portal](https://portal.azure.com "Azure portal") にサインインします。 

2. Azure のメイン メニューで、 **[すべてのサービス]** を選びます。 検索ボックスに「統合」と入力し、"**統合アカウント**" を選びます。

   ![統合アカウントの検索](./media/logic-apps-enterprise-integration-edifact/edifact-0.png)

   > [!TIP]
   > **[すべてのサービス]** が表示されない場合は、メニューを最初に展開する必要があります。 折りたたまれたメニューの上部にある **[テキスト ラベルの表示]** を選びます。

3. **[統合アカウント]** で、契約を作成する統合アカウントを選びます。

   ![契約を作成する統合アカウントの選択](./media/logic-apps-enterprise-integration-edifact/edifact-1-4.png)

4. **[契約]** を選びます。 [契約] タイルが表示されない場合は、まずタイルを追加します。   

   ![[契約] タイルの選択](./media/logic-apps-enterprise-integration-edifact/edifact-1-5.png)

5. [契約] ページで、 **[追加]** を選びます。

   ![[追加] の選択](./media/logic-apps-enterprise-integration-edifact/edifact-agreement-2.png)

6. **[追加]** で、契約の**名前**を入力します。 **[契約タイプ]** で、 **[EDIFACT]** を選択します。 契約の**ホスト パートナー**、**ホスト ID**、**ゲスト パートナー**、および**ゲスト ID** を選択します。

   ![契約の詳細の指定](./media/logic-apps-enterprise-integration-edifact/edifact-1.png)

   | プロパティ | 説明 |
   | --- | --- |
   | 名前 |契約の名前。 |
   | 契約の種類 | EDIFACT である必要があります |
   | ホスト パートナー |契約には、ホストとゲストの両方のパートナーが必要です。 ホスト パートナーは、契約を構成している組織を表します。 |
   | ホスト ID |ホスト パートナーの ID。 |
   | Guest Partner (ゲスト パートナー) |契約には、ホストとゲストの両方のパートナーが必要です。 ゲスト パートナーは、ホスト パートナーと取引している組織を表します。 |
   | ゲスト ID |ゲスト パートナーの ID。 |
   | 受信設定 |これらのプロパティは、契約によって受信されたすべてのメッセージに適用されます。 |
   | Send Settings (送信の設定) |これらのプロパティは、契約によって送信されたすべてのメッセージに適用されます。 |
   ||| 

## <a name="configure-how-your-agreement-handles-received-messages"></a>契約で受信したメッセージを処理する方法の構成

契約のプロパティを設定したので、この契約でパートナーから受信した受信メッセージを識別して処理する方法を構成できます。

> [!IMPORTANT]
> EDIFACT コネクタでは、UTF-8 文字のみがサポートされます。
> 出力に予期しない文字が含まれている場合は、EDIFACT メッセージで UTF-8 文字セットが使用されていることを確認します。

1. **[追加]** で、 **[受信設定]** をクリックします。
メッセージを交換するパートナーとの契約に基づいて、これらのプロパティを構成します。 プロパティの説明については、このセクションの表を参照してください。

   **[受信設定]** は次のセクションに分かれています。[識別子]、[受信確認]、[スキーマ]、[制御番号]、[検証]、[内部設定]。

   ![[受信設定] の構成](./media/logic-apps-enterprise-integration-edifact/edifact-2.png)  

2. 完了したら、 **[OK]** を選択して、必ず設定を保存します。

これで選択した設定に準拠する受信メッセージを処理する準備ができました。

### <a name="identifiers"></a>識別子

| プロパティ | 説明 |
| --- | --- |
| UNB6.1 (受信者の参照パスワード) |1 ～ 14 文字の英数字を値として入力します。 |
| UNB6.2 (受信者の参照修飾子) |1 ～ 2 文字の英数字を入力します。 |

### <a name="acknowledgments"></a>謝辞

| プロパティ | 説明 |
| --- | --- |
| メッセージの受信 (CONTRL) |インターチェンジの送信者に技術確認 (CONTRL) を返すには、このチェック ボックスをオンにします。 これらの受信確認は、契約の送信設定に基づいてインターチェンジの送信者に送信されます。 |
| 確認 (CONTRL) |機能確認 (CONTRL) をインターチェンジの送信者に返すには、このチェック ボックスをオンにします。この確認は、契約の送信設定に基づいてインターチェンジの送信者に送られます。 |

### <a name="schemas"></a>スキーマ

| プロパティ | 説明 |
| --- | --- |
| UNH2.1 (種類) |トランザクション セットの種類を選択します。 |
| UNH2.2 (バージョン) |メッセージのバージョン番号を入力します  (最低 1 文字、最大 3 文字)。 |
| UNH2.3 (リリース) |メッセージのリリース番号を入力します。 (最低 1 文字、最大 3 文字)。 |
| UNH2.5 (関連付けられている割り当てコード) |割り当てられているコードを入力します。 最大 6 文字の 英数字を入力する必要があります。 |
| UNG2.1 (アプリ送信者 ID) |1 ～ 35 文字の英数字を入力します。 |
| UNG2.2 (APP 送信者コードの修飾子) |最大 4 文字の英数字を値として入力します。 |
| SCHEMA |関連付けられている統合アカウントから、使用対象となる以前アップロードしたスキーマを選択します。 |

### <a name="control-numbers"></a>制御番号

| プロパティ | 説明 |
| --- | --- |
| Disallow Interchange control number duplicates (インターチェンジ制御番号の重複を許可しない) |インターチェンジの重複を防止するには、このプロパティを選択します。 選択した場合、受信したインターチェンジのインターチェンジ制御番号 (UNB5) が、過去に処理されたインターチェンジ制御番号と一致しないことが、EDIFACT デコード アクションによって確認されます。 一致が検出された場合、インターチェンジは処理されません。 |
| 重複する UNB5 をチェックする間隔 (日) |重複するインターチェンジ制御番号を許可しないように選択した場合は、この設定に適切な値を指定して、チェックを実行する間隔の日数を指定できます。 |
| Disallow Group control number duplicates (グループ制御番号の重複を許可しない) |グループ制御番号 (UNG5) が重複したインターチェンジを防止するには、このプロパティを選択します。 |
| Disallow Transaction set control number duplicates (トランザクション セット制御番号の重複を許可しない) |トランザクション セット制御番号 (UNH1) が重複したインターチェンジを防止するには、このプロパティを選択します。 |
| EDIFACT 確認制御番号 |受信確認で使用するトランザクション セット参照番号を指定するには、プレフィックスの値、参照番号の範囲、サフィックスを指定します。 |

### <a name="validation"></a>検証

検証対象の行が 1 つ完了するたびに別の行が自動的に追加されます。 ルールを指定しない場合、検証では "既定" の行を使用します。

| プロパティ | 説明 |
| --- | --- |
| メッセージ型 |EDI メッセージの種類を選択します。 |
| EDI Validation (EDI の検証) |スキーマの EDI プロパティ、長さ制限、空のデータ要素、および末尾の区切り記号で定義されたデータ型で EDI 検証を実行します。 |
| 拡張された検証 |データ型が EDI でない場合は、検証はデータ要素の要件と許可された繰り返し、列挙、およびデータ要素の長さの検証 (最小/最大) で実行されます。 |
| Allow Leading/Trailing Zeroes (先頭および末尾のゼロを許可) |先頭または末尾のゼロと空白文字をすべて保持します。 これらの文字を削除しません。 |
| 先頭および末尾のゼロをトリミングする |先頭または末尾のゼロと空白文字を削除します。 |
| 末尾の区切り記号のポリシー |末尾の区切り記号を生成します。 <p>受信したインターチェンジに末尾の区切り記号や区切り文字が含まれないようにする場合は、 **[許可しない]** を選択します。 インターチェンジに末尾の区切り記号や区切り文字が含まれている場合、インターチェンジは無効と宣言されます。 <p>末尾の区切り記号や区切り文字の有無に関係なくインターチェンジを受け入れる場合は、 **[オプション]** を選択します。 <p>受信したインターチェンジに末尾の区切り記号や区切り文字が含まれている必要がある場合は、 **[必須]** を選択します。 |

### <a name="internal-settings"></a>内部設定

| プロパティ | 説明 |
| --- | --- |
| 末尾の区切り記号が許可されている場合は空の XML タグを作成する |インターチェンジの送信者が末尾の区切り記号に空の XML タグを含めるには、このチェック ボックスをオンにします。 |
| インターチェンジをトランザクション セットとして分割 - エラー発生時にトランザクション セットを中断|トランザクション セットに適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。 検証が失敗したトランザクション セットだけを中断します。 |
| インターチェンジをトランザクション セットとして分割 - エラー発生時にインターチェンジを中断|適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。 インターチェンジの 1 つ以上のトランザクション セットが検証に失敗した場合、インターチェンジ全体を中断します。 | 
| インターチェンジの保存 - エラー発生時にトランザクション セットを中断 |インターチェンジはそのままにして、バッチ インターチェンジ全体に対する XML ドキュメントを作成します。 検証に失敗したトランザクション セットだけを中断し、他のすべてのトランザクション セットの処理を継続します。 |
| インターチェンジの保存 - エラー発生時にインターチェンジを中断 |インターチェンジはそのままにして、バッチ インターチェンジ全体に対する XML ドキュメントを作成します。 インターチェンジの 1 つ以上のトランザクション セットが検証に失敗した場合、インターチェンジ全体を中断します。 |

## <a name="configure-how-your-agreement-sends-messages"></a>契約でメッセージを送信する方法の構成

この契約でパートナーに送信する送信メッセージを識別して処理する方法を構成できます。

1.  **[追加]** で、 **[送信設定]** をクリックします。
メッセージを交換するパートナーとの契約に基づいて、これらのプロパティを構成します。 プロパティの説明については、このセクションの表を参照してください。

    **[送信設定]** は次のセクションに分かれています。[識別子]、[受信確認]、[スキーマ]、[エンベロープ]、[文字セットと区切り記号]、[制御番号]、[検証]。

    ![[送信設定] の構成](./media/logic-apps-enterprise-integration-edifact/edifact-3.png)    

2. 完了したら、 **[OK]** を選択して、必ず設定を保存します。

これで選択した設定に準拠する送信メッセージを処理する準備ができました。

### <a name="identifiers"></a>識別子

| プロパティ | 説明 |
| --- | --- |
| UNB1.2 (構文バージョン) |**1** ～ **4** の値を選択します。 |
| UNB2.3 (送信者の逆ルーティングのアドレス) |1 ～ 14 文字の英数字を入力します。 |
| UNB3.3 (受信者の逆ルーティングのアドレス) |1 ～ 14 文字の英数字を入力します。 |
| UNB6.1 (受信者の参照パスワード) |1 ～ 14 文字の英数字を入力します。 |
| UNB6.2 (受信者の参照修飾子) |1 ～ 2 文字の英数字を入力します。 |
| UNB7 (アプリケーション参照 ID) |1 ～ 14 文字の英数字を入力します。 |

### <a name="acknowledgment"></a>Acknowledgement (受信確認)

| プロパティ | 説明 |
| --- | --- |
| メッセージの受信 (CONTRL) |ホスト パートナーが技術確認 (CONTRL) の受け取りを想定している場合、このチェック ボックスをオンにします。 この設定は、メッセージを送信しているホスト パートナーがゲスト パートナーからの受信確認を要求していることを指定します。 |
| 確認 (CONTRL) |ホスト パートナーが機能確認 (CONTRL) の受け取りを想定している場合、このチェック ボックスをオンにします。 この設定は、メッセージを送信しているホスト パートナーがゲスト パートナーからの受信確認を要求していることを指定します。 |
| 受理されたトランザクション セットの SG1/SG4 ループを生成する |機能確認を要求するように選択した場合は、このチェック ボックスをオンにします。受理されたトランザクション セットの SG1/SG4 ループが、機能 CONTRL 確認に強制的に生成されます。 |

### <a name="schemas"></a>スキーマ

| プロパティ | 説明 |
| --- | --- |
| UNH2.1 (種類) |トランザクション セットの種類を選択します。 |
| UNH2.2 (バージョン) |メッセージのバージョン番号を入力します  |
| UNH2.3 (リリース) |メッセージのリリース番号を入力します。 |
| SCHEMA |使用するスキーマを選択します。 スキーマは統合アカウント内にあります。 スキーマにアクセスするには、まず統合アカウントをロジック アプリにリンクします。 |

### <a name="envelopes"></a>エンベロープ

| プロパティ | 説明 |
| --- | --- |
| UNB8 (処理優先度コード) |最大 1 文字の値をアルファベットで入力します。 |
| UNB10 (通信アグリーメント) |1 ～ 40 文字の英数字を入力します。 |
| UNB11 (テスト インジケーター) |生成されたインターチェンジがテスト データであることを指定するには、このチェック ボックスをオンにします。 |
| UNA セグメントの適用 (サービスの文字列通知) |送信するインターチェンジの UNA セグメントを生成するには、このチェック ボックスをオンにします。 |
| UNG セグメントの適用 (機能グループ ヘッダー) |ゲスト パートナーに送信されるメッセージの機能グループ ヘッダーにグループ化セグメントを作成するには、このチェック ボックスをオンにします。 UNG セグメントを作成するために、以下の値が使用されます。 <p>**UNG1** では、1 ～ 6 文字の英数字を入力します。 <p>**UNG2.1** では、1 ～ 35 文字の英数字を入力します。 <p>**UNG2.2** では、最大 4 文字の英数字を値として入力します。 <p>**UNG3.1** では、1 ～ 35 文字の英数字を入力します。 <p>**UNG3.2** では、最大 4 文字の英数字を値として入力します。 <p>**UNG6** では、1 ～ 3 文字の英数字を入力します。 <p>**UNG7.1** では、1 ～ 3 文字の英数字を入力します。 <p>**UNG7.2** では、1 ～ 3 文字の英数字を入力します。 <p>**UNG7.3** では、1 ～ 6 文字の英数字を入力します。 <p>**UNG8** では、1 ～ 14 文字の英数字を入力します。 |

### <a name="character-sets-and-separators"></a>文字セットと区切り文字

各メッセージ タイプで使用する文字セットや、異なるセットの区切り文字を入力できます。 特定のメッセージ スキーマで文字セットが指定されていない場合は、既定の文字セットが使用されます。

| プロパティ | 説明 |
| --- | --- |
| UNB1.1 (システム識別子) |送信インターチェンジで適用する EDIFACT 文字セットを選択します。 |
| スキーマ |ドロップダウン リストから [スキーマ] を選択します。 行が 1 つ完了するたびに新しい行が自動的に追加されます。 選択したスキーマに対して、次の区切り記号の説明に基づいて、使用する区切り記号のセットを選択します。 |
| 入力タイプ |ドロップダウン リストから入力タイプを選択します。 |
| Component Separator |複合データ要素を区切る単一の文字を入力します。 |
| Data Element Separator |複合データ要素内の単純データ要素を区切る単一の文字を入力します。 |
| Segment Terminator |EDI セグメントの終端を示す単一の文字を入力します。 |
| サフィックス |セグメント識別子と共に使用される文字を選択します。 サフィックスを指定する場合は、セグメント終端記号のデータ要素が空でもかまいません。 セグメント終端記号を空にする場合は、サフィックスを指定する必要があります。 |

### <a name="control-numbers"></a>制御番号

| プロパティ | 説明 |
| --- | --- |
| UNB5 (インターチェンジ制御番号) |プレフィックス、インターチェンジ制御番号の値、サフィックスを入力します。 これらの値は、送信インターチェンジを生成する目的で使用されます。 プレフィックスとサフィックスは省略可能です。制御番号は必須です。 制御番号は、新しいメッセージごとにインクリメントされます。プレフィックスとサフィックスは変化しません。 |
| UNG5 (グループ制御番号) |プレフィックス、インターチェンジ制御番号の値、サフィックスを入力します。 これらの値は、グループ制御番号を生成する目的で使用されます。 プレフィックスとサフィックスは省略可能です。制御番号は必須です。 制御番号は、最大値に達するまで新しいメッセージごとにインクリメントされます。プレフィックスとサフィックスは変化しません。 |
| UNH1 (メッセージ ヘッダーの参照番号) |プレフィックス、インターチェンジ制御番号の値、サフィックスを入力します。 これらの値は、メッセージ ヘッダー参照番号を生成する目的で使用されます。 プレフィックスとサフィックスは省略可能です。参照番号は必須です。 参照番号は、新しいメッセージごとにインクリメントされます。プレフィックスとサフィックスは変化しません。 |

### <a name="validation"></a>検証

検証対象の行が 1 つ完了するたびに別の行が自動的に追加されます。 ルールを指定しない場合、検証では "既定" の行を使用します。

| プロパティ | 説明 |
| --- | --- |
| メッセージ型 |EDI メッセージの種類を選択します。 |
| EDI Validation (EDI の検証) |スキーマ、長さ制限、空のデータ要素、および末尾の区切り記号の EDI プロパティで定義されたデータ型で EDI 検証を実行します。 |
| 拡張された検証 |データ型が EDI でない場合は、検証はデータ要素の要件と許可された繰り返し、列挙、およびデータ要素の長さの検証 (最小/最大) で実行されます。 |
| Allow Leading/Trailing Zeroes (先頭および末尾のゼロを許可) |先頭または末尾のゼロと空白文字をすべて保持します。 これらの文字を削除しません。 |
| 先頭および末尾のゼロをトリミングする |先頭または末尾のゼロの文字を削除します。 |
| 末尾の区切り記号のポリシー |末尾の区切り記号を生成します。 <p>送信したインターチェンジに末尾の区切り記号や区切り文字が含まれないようにする場合は、 **[許可しない]** を選択します。 インターチェンジに末尾の区切り記号や区切り文字が含まれている場合、インターチェンジは無効と宣言されます。 <p>末尾の区切り記号や区切り文字の有無に関係なくインターチェンジを送信する場合は、 **[オプション]** を選択します。 <p>送信したインターチェンジに末尾の区切り記号や区切り文字が含まれている必要がある場合は、 **[必須]** を選択します。 |

## <a name="find-your-created-agreement"></a>作成された契約の検索

1.  契約のプロパティをすべて設定した後、 **[追加]** ページで **[OK]** を選んで契約の作成を終了し、統合アカウントに戻ります。

    これで、新しく追加した契約が **[契約]** リストに表示されます。

2.  また、統合アカウントの概要で、契約を表示することもできます。 統合アカウント メニューで、 **[概要]** 、 **[契約]** タイルの順に選びます。 

    ![[契約] タイルの選択](./media/logic-apps-enterprise-integration-edifact/edifact-4.png)   

## <a name="connector-reference"></a>コネクタのレファレンス

コネクタの Swagger ファイルに記述される、アクションや制限などのこのコネクタの技術的詳細は、[コネクタの参照ページ](/connectors/edifact/)を参照してください。

> [!NOTE]
> [統合サービス環境 (ISE)](../logic-apps/connect-virtual-network-vnet-isolated-environment-overview.md) のロジック アプリの場合、このコネクタの ISE のラベルが付いたバージョンでは、代わりに [ISE の B2B メッセージ制限](../logic-apps/logic-apps-limits-and-config.md#b2b-protocol-limits)が使用されます。

## <a name="next-steps"></a>次のステップ

* 他の[Logic Apps コネクタ](../connectors/apis-list.md)を確認します。
