---
title: Azure CDN でのエッジ ノード パフォーマンスの分析 | Microsoft Docs
description: Microsoft Azure CDN でエッジ ノード パフォーマンスを分析します。 エッジ パフォーマンス分析は、CDN のトラフィックや帯域幅の使用状況の詳細な情報を提供します。
services: cdn
documentationcenter: ''
author: zhangmanling
manager: erikre
editor: ''
ms.assetid: 8cc596a7-3e01-4f76-af7b-a05a1421517e
ms.service: azure-cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: how-to
ms.date: 01/23/2017
ms.author: mazha
ms.openlocfilehash: dc1599fc0c2f8c55c709ab674c10dd53c8d8dc04
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/02/2020
ms.locfileid: "84887716"
---
# <a name="analyze-edge-node-performance-in-microsoft-azure-cdn"></a>Microsoft Azure CDN でのエッジ ノード パフォーマンスの分析
[!INCLUDE [cdn-premium-feature](../../includes/cdn-premium-feature.md)]

## <a name="overview"></a>概要
エッジ パフォーマンス分析は、CDN のトラフィックや帯域幅の使用状況の詳細な情報を提供します。 この情報は、傾向分析の統計を生成するために使用できます。この統計を使用すると、アセットがどのようにキャッシュされ、クライアントに配信されるかを把握できます。 さらに、コンテンツの配信を最適化する方法の戦略を立てたり、CDN を活用するために取り組む必要がある問題を判断したりすることができます。 その結果、データ配信のパフォーマンスを向上させるだけでなく、CDN コストを削減することもできます。

> [!NOTE]
> すべてのレポートは、日付/時刻を指定するときに、UTC/GMT 表記を使用します。
> 
> 

## <a name="reports-and-log-collection"></a>レポートとログの収集
エッジ パフォーマンス分析モジュールが CDN アクティビティ データに基づいたレポートを生成するには、まず、そのデータを収集する必要があります。 この収集処理は 1 日に 1 回行われ、前日に行われたアクティビティが対象になります。 つまり、レポートの統計情報は、処理が行われた時点での 1 日の統計情報のサンプルを表しており、当日のデータの完全なセットが含まれているとは限りません。 これらのレポートの主な機能は、パフォーマンスを評価することです。 課金を目的としたり、正確な数値統計情報として使用したりしないください。

> [!NOTE]
> エッジ パフォーマンス分析レポートの生成に使用された生データは、少なくとも 90 日間、利用可能です。
> 
> 

## <a name="dashboard"></a>ダッシュボード
エッジ パフォーマンス分析ダッシュボードでは、グラフと統計情報で、現在および過去の CDN トラフィックを追跡できます。 このダッシュボードを使用すると、自分のアカウントの CDN トラフィックのパフォーマンスに関する最近の傾向と長期的な傾向を検出できます。

このダッシュボードの構成要素は、以下のとおりです。

* 主要なメトリックと傾向を視覚化できる、対話的なグラフ。
* 主要なメトリックと傾向の長期的なパターンの印象を示すタイムライン。
* 全体的なパフォーマンス、使用状況、および効率の面で、CDN ネットワークがサイト トラフィックをどのように向上させるかについての主要なメトリックと統計情報。

### <a name="accessing-the-edge-performance-dashboard"></a>エッジ パフォーマンス ダッシュボードへのアクセス
1. CDN プロファイル ブレードで、 **[管理]** をクリックします。
   
    ![[CDN プロファイル] ブレードの [管理] ボタン](./media/cdn-edge-performance/cdn-manage-btn.png)
   
    CDN 管理ポータルが開きます。
2. **[分析]** タブにマウス ポインターを合わせ、次に **[エッジ パフォーマンス分析]** フライアウトにポインターを合わせます。  **[ダッシュボード]** をクリックします。
   
    エッジ ノード分析ダッシュボードが表示されます。

### <a name="chart"></a>グラフ
ダッシュボードにはグラフがあり、そのすぐ下に表示されるタイムラインで選択した期間にわたってメトリックが追跡されます。  タイムラインは 2 年前までの CDN アクティビティを図示し、グラフのすぐ下に表示されます。

#### <a name="using-the-chart"></a>グラフの使用
* 既定では、過去 30 日間のキャッシュ効率がグラフ化されます。
* このグラフは、1 日単位でまとめられたデータから生成されます。
* 線グラフ上の日付にポインターを合わせると、日付と、その日のメトリックの値が表示されます。
* グラフ上で週末を表す薄い灰色の垂直バーのオーバーレイを切り替えるには、[週末を強調] をクリックします。 この種類のオーバーレイは、週末のトラフィックのパターンを識別するために便利です。
* グラフ上で前年の同じ期間のアクティビティのオーバーレイに切り替えるには、[1 年前を表示] をクリックします。 この種類の比較では、長期的な CDN の使用パターンを調べることができます。 グラフの右上隅には、各線グラフのカラー コードを示す凡例があります。

#### <a name="updating-the-chart"></a>グラフの更新
* 時間範囲: 以下のいずれかを行います。
  * タイムラインで、目的の区域を選択します。 グラフは、選択された期間に対応するデータで更新されます。
  * 最大で 2 年間の使用可能なすべての履歴データを表示するには、グラフをダブルクリックします。
* メトリック: 目的のメトリックの横に表示されるグラフ アイコンをクリックします。 グラフとタイムラインが、対応するメトリックのデータで更新されます。

### <a name="key-metrics-and-statistics"></a>主要なメトリックと統計情報
#### <a name="efficiency-metrics"></a>効率性のメトリック
これらのメトリックの目的は、キャッシュの効率を向上させることができるかどうかを確認することです。 キャッシュの効率化によってもたらされる主な利点は、次のとおりです。

* 配信元サーバーの負荷を軽減します。それによって、次のような効果があります。
  * Web サーバーのパフォーマンスが向上する。
  * 運用コストが削減される。
* より多くの要求に CDN が直接対応するため、データ配信速度が向上します。

| フィールド | 説明 |
| --- | --- |
| キャッシュの効率性 |キャッシュから提供された、転送されたデータの割合を示します。 このメトリックは、要求されたコンテンツのキャッシュされたバージョンが CDN (エッジ サーバー) から要求者 (Web ブラウザーなど) に直接提供されたときに測定されます。 |
| ヒット率 |キャッシュから提供された要求の割合を示します。 このメトリックは、要求されたコンテンツのキャッシュされたバージョンが CDN (エッジ サーバー) から要求者 (Web ブラウザーなど) に直接提供されたときに測定されます。 |
| リモート バイトの割合 - キャッシュ構成なし |発信元サーバーから CDN (エッジ サーバー) に提供されたトラフィックのうち、バイパス キャッシュ機能 (HTTP ルール エンジン) の結果としてキャッシュされないトラフィックの割合を示します。 |
| リモート バイトの割合 - 期限切れのキャッシュ |古くなったコンテンツの再検証の結果として、発信元サーバーから CDN (エッジ サーバー) に提供されたトラフィックの割合を示します。 |

#### <a name="usage-metrics"></a>使用状況のメトリック
これらのメトリックの目的は、以下のコスト削減方法に関する情報を提供することです。

* CDN を通じて運用コストを最小限に抑える。
* キャッシュの効率化と圧縮を通じて CDN の経費を削減する。

> [!NOTE]
> トラフィック量数は、比率および割合の計算に使用されたトラフィックを表し、合計トラフィックのうちの高ボリューム顧客の部分だけを示している場合があります。
> 
> 

| フィールド | 説明 |
| --- | --- |
| 平均出力バイト数 |CDN (エッジ サーバー) から要求者 (Web ブラウザーなど) に提供された、要求ごとに転送されたバイトの平均数を示します。 |
| キャッシュなしの構成のバイト率 |CDN (エッジ サーバー) から要求者 (Web ブラウザーなど) に提供された、バイパス キャッシュ機能を使用したためにキャッシュされなかったトラフィックの割合を示します。 |
| 圧縮されたバイト率 |CDN (エッジ サーバー) から (Web ブラウザーなど) の要求者に圧縮された形式で送信されたトラフィックの割合を示します。 |
| 出力バイト数 |CDN (エッジ サーバー) から要求者 (Web ブラウザーなど) に配信されたデータの量をバイト単位で示します。 |
| 入力バイト数 |要求者 (Web ブラウザーなど) から CDN (エッジ サーバー) に送信されたデータの量をバイト単位で示します。 |
| リモート バイト数 |CDN および顧客の配信元サーバーから CDN (エッジ サーバー) に送信されたデータの量をバイト単位で示します。 |

#### <a name="performance-metrics"></a>パフォーマンスのメトリック
これらのメトリックの目的は、トラフィックに対する CDN の全体的なパフォーマンスを追跡することです。

| フィールド | 説明 |
| --- | --- |
| 転送速度 |コンテンツが CDN から要求者に転送されたときの平均速度を示します。 |
| Duration |アセットを要求者 (Web ブラウザーなど) に配信するまでにかかった平均時間をミリ秒単位で示します。 |
| 圧縮された要求の率 |CDN (エッジ サーバー) から要求者 (Web ブラウザーなど) に圧縮された形式で配信されたヒットの割合を示します。 |
| 4xx エラー率 |4xx 状態コードを生成したヒットの割合を示します。 |
| 5xx エラー率 |5xx 状態コードを生成したヒットの割合を示します。 |
| ヒット数 |CDN コンテンツの要求の数を示します。 |

#### <a name="secure-traffic-metrics"></a>セキュリティで保護されたトラフィックのメトリック
これらのメトリックの目的は、HTTPS トラフィックに対する CDN パフォーマンスを追跡することです。

| フィールド | 説明 |
| --- | --- |
| セキュリティで保護されたキャッシュ効率 |キャッシュから提供された、HTTPS 要求のために転送されたデータの割合を示します。 このメトリックは、要求されたコンテンツのキャッシュされたバージョンが CDN (エッジ サーバー) から要求者 (Web ブラウザーなど) に HTTPS 経由で直接提供されたときに測定されます。 |
| セキュリティで保護された転送速度 |CDN (エッジ サーバー) から要求者 (Web サーバーなど) に HTTPS 経由で転送されたコンテンツの平均速度を示します。 |
| セキュリティで保護された期間の平均時間 |アセットを要求者 (Web ブラウザーなど) に HTTPS 経由で配信するまでにかかった平均時間をミリ秒単位で示します。 |
| セキュリティで保護されたヒット |CDN コンテンツの HTTPS 要求の数を示します。 |
| セキュリティで保護された出力バイト数 |CDN (エッジ サーバー) から要求者 (Web ブラウザーなど) に配信された HTTPS トラフィックの量をバイト単位で示します。 |

## <a name="reports"></a>Reports
このモジュールの各レポートには、帯域幅やトラフィック使用状況に関するさまざまな種類のメトリック (HTTP 状態コード、キャッシュの状態コード、要求 URL など) のグラフと統計情報が含まれています。 この情報は、コンテンツがクライアントにどのように提供されているかを詳しく調査し、CDN の動作を調整してデータ配信パフォーマンスを向上させるために使用することができます。

### <a name="accessing-the-edge-performance-reports"></a>エッジ パフォーマンス レポートへのアクセス
1. CDN プロファイル ブレードで、 **[管理]** をクリックします。
   
    ![[CDN プロファイル] ブレードの [管理] ボタン](./media/cdn-edge-performance/cdn-manage-btn.png)
   
    CDN 管理ポータルが開きます。
2. **[分析]** タブにマウス ポインターを合わせ、次に **[エッジ パフォーマンス分析]** フライアウトにポインターを合わせます。  **[HTTP ラージ オブジェクト]** をクリックします。
   
    エッジ ノード分析レポート画面が表示されます。

| レポート | 説明 |
| --- | --- |
| 概要 (日単位) |指定した期間の毎日のトラフィックの傾向を表示できます。 このグラフの各棒は、特定の日を表します。 棒のサイズは、その日に発生したヒットの総数を示します。 |
| 概要 (時間単位) |指定した期間の時間ごとのトラフィックの傾向を表示できます。 このグラフの各棒は、特定の日の 1 時間を表します。 棒のサイズは、その時間内に発生したヒットの総数を示します。 |
| プロトコル |HTTP と HTTPS プロトコル間のトラフィックの内訳を表示します。 ドーナツ グラフは、プロトコルの種類ごとに発生したヒット数の割合を示します。 |
| HTTP メソッド |データの要求にどの HTTP メソッドが使用されているかをすばやく把握できるようにします。 通常、最も一般的な HTTP 要求メソッドは、GET、HEAD、POST です。 ドーナツ グラフは、HTTP 要求メソッドの種類ごとに発生したヒット数の割合を示します。 |
| URL |要求された URL の上位 10 件を表示するグラフが含まれています。 棒は、URL ごとに表示されます。 棒の高さは、レポートの対象となる期間内に特定の URL が生成したヒット数を示します。 上位 100 件の要求された URL の統計情報は、このグラフのすぐ下に表示されます。 |
| CNAME |レポートの対象期間中にアセットの要求で使用された上位 10 件の CNAME を表示するグラフが含まれています。 上位 100 件の要求された CNAME の統計情報は、このグラフのすぐ下に表示されます。 |
| 配信元 |指定された期間中にアセットの要求先となった上位 10 件の CDN または顧客の配信元サーバーを表示するグラフが含まれています。 上位 100 件の要求された CDN または顧客の配信元サーバーの統計情報は、このグラフのすぐ下に表示されます。 顧客の配信元サーバーは、[ディレクトリ名] オプションで定義された名前によって識別されます。 |
| Geo POP |トラフィックのどれだけの量が特定のポイント オブ プレゼンス (POP) を通じてルーティングされているかを示します。 3 文字の省略形は、CDN ネットワーク内の POP を表しています。 |
| クライアント |指定した期間中にアセットを要求した上位 10 件のクライアントを表示するグラフが含まれています。 このレポートの目的のために、同じ IP アドレスから送信されるすべての要求は、同じクライアントからの要求であると見なされます。 上位 100 件のクライアントの統計情報は、このグラフのすぐ下に表示されます。 このレポートは、上位クライアントのダウンロード アクティビティのパターンを特定するのに役立ちます。 |
| キャッシュの状態 |キャッシュ動作の詳細な内訳が示されます。これによって、エンド ユーザー エクスペリエンス全体を向上させるための方法が明確になる場合があります。 キャッシュ ヒット数から最速のパフォーマンスが得られるため、キャッシュ ミス数と期限切れのキャッシュ ヒット数を最小化することで、データ配信速度を最適化できます。 |
| NONE の詳細 |指定した期間中にキャッシュ コンテンツの鮮度が確認されていないアセットの上位 10 件の URL を表示するグラフが含まれています。 このような種類のアセットの上位 100 件の URL の統計情報は、このグラフのすぐ下に表示されます。 |
| CONFIG_NOCACHE の詳細 |顧客の CDN 構成によってキャッシュされなかったアセットの上位 10 件の URL を表示するグラフが含まれています。 これらの種類のアセットは、配信元サーバーから直接提供されました。 このような種類のアセットの上位 100 件の URL の統計情報は、このグラフのすぐ下に表示されます。 |
| UNCACHEABLE の詳細 |要求ヘッダー データによってキャッシュできなかったアセットの上位 10 件の URL を表示するグラフが含まれています。 このような種類のアセットの上位 100 件の URL の統計情報は、このグラフのすぐ下に表示されます。 |
| TCP_HIT の詳細 |キャッシュからすぐに提供されるアセットの上位 10 件の URL を表示するグラフが含まれています。 このような種類のアセットの上位 100 件の URL の統計情報は、このグラフのすぐ下に表示されます。 |
| TCP_MISS の詳細 |キャッシュの状態が TCP_MISS であるアセットの上位 10 件の URL を表示するグラフが含まれています。 このような種類のアセットの上位 100 件の URL の統計情報は、このグラフのすぐ下に表示されます。 |
| TCP_EXPIRED_HIT の詳細 |POP から直接提供された、古くなったアセットの上位 10 件の URL を表示するグラフが含まれています。 このような種類のアセットの上位 100 件の URL の統計情報は、このグラフのすぐ下に表示されます。 |
| TCP_EXPIRED_MISS の詳細 |配信元サーバーから新しいバージョンを取得する必要がある、古くなったアセットの上位 10 件の URL を表示するグラフが含まれています。 このような種類のアセットの上位 100 件の URL の統計情報は、このグラフのすぐ下に表示されます。 |
| TCP_CLIENT_REFRESH_MISS の詳細 |クライアントからのキャッシュなし要求によって配信元サーバーから取得されたアセットの上位 10 件の URL を示す棒グラフが含まれています。 このような種類の要求の上位 100 件の URL の統計情報は、このグラフのすぐ下に表示されます。 |
| クライアント要求の種類 |HTTP クライアント (ブラウザーなど) によって行われた要求の種類を示します。 このレポートには、要求がどのように処理されているかを把握できるようなドーナツ グラフが含まれています。 要求の種類ごとの帯域幅およびトラフィックの情報は、グラフの下に表示されます。 |
| ユーザー エージェント |CDN 経由でコンテンツを要求する上位 10 件のユーザー エージェントを表示する棒グラフが含まれています。 通常、ユーザー エージェントは、Web ブラウザー、メディア プレーヤー、または携帯電話ブラウザーです。 上位 100 件のユーザー エージェントの統計情報は、このグラフのすぐ下に表示されます。 |
| 参照元 |CDN 経由でアクセスされるコンテンツへの上位 10 件の参照元を表示する棒グラフが含まれています。 通常、参照元は、Web ページの URL か、コンテンツにリンクしているリソースの URL です。 詳細情報は、上位 100 件の参照元のグラフの下に表示されます。 |
| 圧縮の種類 |エッジ サーバーによって圧縮されたかどうかによって、要求されたアセットを細分化するドーナツ グラフが含まれています。 圧縮されたアセットの割合が、使用された圧縮の種類によって細分化されます。 詳細情報は、各圧縮の種類と状態のグラフの下に表示されます。 |
| ファイルの種類 |アカウントの CDN を通じて要求された上位 10 件のファイルの種類を表示する棒グラフが含まれています。 このレポートの目的のために、ファイルの種類はアセットのファイル名拡張子とインターネットのメディアの種類によって定義されています (たとえば、.html \[text/html\]、.htm \[text/html\]、.aspx \[text/html\] など)。 詳細情報は、上位 100 件のファイルの種類のグラフの下に表示されます。 |
| 一意のファイル |指定した期間中の特定の日に要求された一意のアセットの合計数をプロットするグラフが含まれています。 |
| トークン認証の概要 |要求されたアセットがトークン ベースの認証によって保護されていたかどうかについての簡単な概要を示す円グラフが含まれています。 保護されているアセットは、試行された認証の結果に基づいてグラフに表示されます。 |
| トークン認証の拒否の詳細 |トークン ベースの認証によって拒否された上位 10 件の要求を表示できる棒グラフが含まれています。 |
| HTTP 応答コード |エッジ サーバーによって HTTP クライアントに配信された HTTP 状態コード (200 OK、403 Forbidden、404 Not Found など) の内訳を示します。 円グラフでは、アセットがどのように提供されたかをすばやく評価することができます。 詳細な統計データは、応答コードごとに、グラフの下に表示されます。 |
| 404 エラー |404 Not Found 応答コードが返された上位 10 件の要求を表示できる棒グラフが含まれています。 |
| 403 エラー |403 Forbidden 応答コードが返された上位 10 件の要求を表示できる棒グラフが含まれています。 403 Forbidden 応答コードは、顧客の配信元サーバーまたは POP のエッジ サーバーによって要求が拒否された場合に発生します。 |
| 4xx エラー |400 の範囲の応答コードが返された上位 10 件の要求を表示できる棒グラフが含まれています。 403 Not Found および 404 Forbidden 応答コードは、このレポートから除外されます。 通常、4 xx 応答コードは、クライアント エラーの結果として要求が拒否された場合に発生します。 |
| 504 エラー |504 Gateway Timeout 応答コードが返された上位 10 件の要求を表示できる棒グラフが含まれています。 504 Gateway Timeout 応答コードは、HTTP プロキシが別のサーバーと通信しようとしていてタイムアウトになった場合に発生します。 CDN の場合、504 Gateway Timeout 応答コードは、通常、エッジ サーバーが顧客の配信元サーバーとの通信を確立できない場合に発生します。 |
| 502 エラー |502 Bad Gateway 応答コードが返された上位 10 件の要求を表示できる棒グラフが含まれています。 502 Bad Gateway 応答コードは、サーバーと HTTP プロキシの間で HTTP プロトコル エラーが起きたときに発生します。 CDN の場合、502 Bad Gateway 応答コードは、通常、顧客の配信元サーバーがエッジ サーバーに無効な応答を返す場合に発生します。 応答は、解析できない場合、または不完全な場合に無効になります。 |
| 5xx エラー |500 の範囲の応答コードが返された上位 10 件の要求を表示できる棒グラフが含まれています。  502 Bad Gateway および 504 Gateway Timeout 応答コードは、このレポートから除外されます。 |

## <a name="see-also"></a>参照
* [Azure CDN の概要](cdn-overview.md)
* [Microsoft Azure CDN でのリアルタイム統計情報](cdn-real-time-stats.md)
* [規則エンジンを使用した既定の HTTP 動作のオーバーライド](cdn-rules-engine.md)
* [詳細な HTTP レポート](cdn-advanced-http-reports.md)

