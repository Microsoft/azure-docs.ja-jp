---
author: Juliako
ms.service: media-services
ms.topic: include
ms.date: 11/09/2018
ms.author: juliako
ms.openlocfilehash: 065cb4daa9501ee658d364dad43b9e03798e4083
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/09/2020
ms.locfileid: "67181589"
---
このジョブでは、検出および追跡された顔に関するメタデータを含む JSON 出力ファイルを生成します。 そのメタデータには、画像内での顔の位置を示す座標と、追跡対象の個人を識別する顔 ID 番号が含まれます。 顔 ID 番号は、前向きの顔が失われたりフレーム内で重なったりするとリセットされる場合があり、同じ顔に複数の ID が割り当てられる可能性があります。

出力 JSON には、次の要素が含まれています。

### <a name="root-json-elements"></a>ルート JSON 要素

| 要素 | 説明 |
| --- | --- |
| version |Video API のバージョンを示します。 |
| timescale |ビデオの 1 秒あたりの "ティック数" です。 |
| offset |タイムスタンプの時間オフセットです。 Video API のバージョン 1.0 では、これは常に 0 になります。 今後サポートされるシナリオでは、変更される可能性があります。 |
| width、hight |出力ビデオ フレームの幅と高さ (ピクセル単位)。|
| framerate |ビデオの 1 秒あたりのフレーム数です。 |
| [fragments](#fragments-json-elements) |メタデータは、フラグメントと呼ばれる複数のセグメントに分割されます。 各フラグメントには、開始、継続時間、間隔数、およびイベントが含まれます。 |

### <a name="fragments-json-elements"></a>フラグメント JSON 要素

|要素|説明|
|---|---|
| start |最初のイベントの開始時間です ("ティック数")。 |
| duration |フラグメントの長さです ("ティック数")。 |
| インデックス (index) | (Azure Media Redactor にのみ適用されます) 現在のイベントのフレーム インデックスを定義します。 |
| interval |フラグメント内の各イベント エントリの間隔です ("ティック数")。 |
| events |各イベントには、その期間内で検出および追跡された顔が含まれます。 これは、イベントの配列です。 外側の配列は、1 つの時間間隔を表します。 内側の配列は、その時点で発生した 0 個以上のイベントで構成されます。 空のかっこ [] は、顔が検出されなかったことを意味します。 |
| id |追跡されている顔の ID です。 この番号は、顔が検出されなくなると変化する可能性があります。 特定の個人にはビデオ全体を通して同じ ID が割り当てられるべきですが、検出アルゴリズム (遮蔽など) の制限により保証できません。 |
| x、y |0\.0 ～ 1.0 の範囲で正規化された、顔の境界ボックスの左上の X および Y 座標です。 <br/>X および Y 座標は常に横長の配置が基準になるので、縦長のビデオ (または、iOS では上下反転) の場合は、適切に変換する必要があります。 |
| width、height |0\.0 ～ 1.0 の範囲で正規化された、顔の境界ボックスの幅と高さです。 |
| facesDetected |JSON の結果の最後にあり、ビデオ内でアルゴリズムが検出した顔の数がまとめられています。 顔が検出されなくなった場合 (顔が画面から外れる、横を向く、など)、ID が誤ってリセットされることがあるため、この値はビデオ内の顔の正確な数と常に一致しているとは限りません。 |
