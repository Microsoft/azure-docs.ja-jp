この手順では、同じネットワーク上で実行されているクライアント アプリケーションを使用して、可用性グループ リスナーをテストします。

クライアント接続については、次の要件に注意してください。

* リスナーへのクライアント接続は、AlwaysOn 可用性レプリカをホストするクラウド サービスとは異なるクラウド サービス内に存在するマシンから接続する必要があります。
* AlwaysOn レプリカが異なるサブネットにある場合、クライアントは接続文字列で "MultisubnetFailover=True" を指定する必要があります。 これにより、別のサブネット内のレプリカへのパラレル接続が試行されます。 このシナリオには、AlwaysOn 可用性グループのリージョンを超えたデプロイメントが含まれていることに注意してください。

1 つの例が、同じ Azure VNet (ただしレプリカをホストしていない) 内のいずれかの VM から、リスナーに接続する場合です。 このテストを完了する簡単な方法は、SSMS を可用性グループ リスナーに接続してみることです。 もう 1 つの簡単な方法は、次のように [SQLCMD.exe](https://technet.microsoft.com/library/ms162773.aspx) を実行することです。

    sqlcmd -S "<ListenerName>,<EndpointPort>" -d "<DatabaseName>" -Q "select @@servername, db_name()" -l 15

> [!NOTE]
> EndpointPort 値が 1433 の場合、呼び出しでこれを指定する必要はありません。 前の呼び出しでも、クライアント コンピューターが同じドメインに参加していて、Windows 認証を使用したデータベースへのアクセス許可が呼び出し元に与えられていることを想定しています。
> 
> 

リスナーをテストする場合は、クライアントがフェールオーバー間でリスナーに接続できるように、可用性グループがフェールオーバーすることを確認します。



<!--HONumber=Nov16_HO3-->


