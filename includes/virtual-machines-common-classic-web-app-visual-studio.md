

Azure 用の Web アプリケーション プロジェクトを作成するとき、Azure 内で仮想マシンをプロビジョニングできます。 さらに、他のソフトウェアで仮想マシンを構成したり、診断やデバッグのために仮想マシンを使用したりすることができます。

Web アプリケーションを作成するときに仮想マシンを作成するには、次の手順に従います。

1. Visual Studio で、**[ファイル]** > **[新規作成]** > **[プロジェクト]** > **[Web]** の順にクリックし、(**[Visual C#]** ノードまたは **[Visual Basic]** ノードの) **[ASP.NET Web アプリケーション]** を選択します。
2. **[新しい ASP.NET プロジェクト]** ダイアログ ボックスで、必要な Web アプリケーションの種類を選択します。このダイアログ ボックスの Azure セクション (右下隅) にある **[クラウドでのホスト]** チェック ボックスがオンになっていることを確認してください (インストールによっては、このチェック ボックスに **"リモート リソースの作成"** というラベルが付いている場合もあります)。
   
    ![][0]
3. この例では、[Microsoft Azure] の下のドロップダウン リストから **[仮想マシン (v1)]** を選択し、**[OK]** をクリックします。
4. サインインを要求されたら Azure にサインインします。 **[仮想マシンを作成する]** ダイアログ ボックスが表示されます。
   
    ![][2]
5. **[DNS 名]** ボックスに仮想マシンの名前を入力します。 DNS 名は、Azure 上で一意の名前にする必要があります。 入力した名前が利用できない場合には、赤色の感嘆符が表示されます。
6. **[イメージ]** ボックスの一覧から、仮想マシンで使用するイメージを選択します。 標準の Azure 仮想マシン イメージだけでなく、Azure にアップロードしたイメージを選択することもできます。
7. IIS 以外の Web サーバーをインストールする場合を除き、 **[IIS と Web デプロイを有効にする]** チェック ボックスはオンのままにしておきます。 Web デプロイを無効にすると、Visual Studio からの発行ができません。 IIS と Web デプロイは、パッケージ化された Windows Server のイメージ (カスタム イメージも含む) に追加できます。
8. **[サイズ]** ボックスの一覧から、仮想マシンのサイズを選択します。
9. この仮想マシンのサインイン資格情報を指定します。 この情報は、リモート デスクトップからこの仮想マシンにアクセスする際に必要なため、メモしておきます。
10. **[場所]** ボックスの一覧で、仮想マシンをホストするリージョンを選択します。
11. **[OK]** をクリックして、仮想マシンの作成を開始します。 操作の進捗状況は、 **[出力]** ウィンドウに表示されます。
    
    ![][3]
12. 仮想マシンがプロビジョニングされている間に、ソリューションの **[PublishScripts]** ノード内で発行スクリプトが作成されます。 発行スクリプトにより、Azure 内で仮想マシンが実行およびプロビジョニングされます。 **[出力]** ウィンドウに状態が表示されます。 このスクリプトは、仮想マシンを作成するために以下の操作を行います。
    
    * 既存の仮想マシンがない場合は、作成します。
    * `devtest` で始まる名前のストレージ アカウントを作成します。ただし、指定リージョンにこのストレージ アカウントがない場合に限ります。
    * 仮想マシン用のコンテナーとしてクラウド サービスを作成し、Web アプリケーション用の Web ロールを作成します。
    * 仮想マシンで Web デプロイを構成します。
    * 仮想マシンで IIS および ASP.NET を構成します。
    
    ![][4]
13. (必要に応じて) 新しい仮想マシンに接続できます。 **サーバー エクスプローラー**で、**[Virtual Machines]** ノードを展開し、作成した仮想マシンのノードをクリックします。そのショートカット メニューで、**[Connect with Remote Desktop (リモート デスクトップを使用して接続する)]** をクリックします。 または、**Cloud Explorer** でショートカット メニューの **[ポータルで開く]** を選択し、仮想マシンに接続することもできます。
    
    ![][5]

## <a name="next-steps"></a>次のステップ
作成した発行スクリプトをカスタマイズするには、「 [Windows PowerShell スクリプトを使用した開発環境およびテスト環境の発行](http://msdn.microsoft.com/library/dn642480.aspx)」の詳細情報を参照してください。

[0]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_NewProject.PNG
[1]: ./media/dotnet-visual-studio-create-virtual-machine/CreateVM_SignIn.PNG
[2]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_CreateVM.PNG
[3]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_Provisioning.png
[4]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_SolutionExplorer.png
[5]: ./media/virtual-machines-common-classic-web-app-visual-studio/VS_Create_VM_Connect.png


<!--HONumber=Nov16_HO3-->


