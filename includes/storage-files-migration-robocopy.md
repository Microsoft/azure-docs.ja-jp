---
title: インクルード ファイル
description: インクルード ファイル
services: storage
author: fauhse
ms.service: storage
ms.topic: include
ms.date: 4/05/2021
ms.author: fauhse
ms.custom: include file
ms.openlocfilehash: 01512f0e37761915fcb6eeba8c162e1a3db62c48
ms.sourcegitcommit: bfa7d6ac93afe5f039d68c0ac389f06257223b42
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/06/2021
ms.locfileid: "106491681"
---
```console
Robocopy /MT:16 /R:5 /W:5 /B /MIR /IT /COPY:DATSO /DCOPY:DAT /NP /NFL /NDL /UNILOG:<FilePathAndName> <SourcePath> <Dest.Path> 
```

| Switch                | 説明 |
|-----------------------|---------|
| `/MT:n`               | RoboCopy でマルチスレッドを実行できるようにします。 n の既定値は 8、最大は 128 スレッドです。 この値をプロセッサ コア数とコアあたりのスレッド数に一致させます。 実稼働サーバーに存在する可能性のある他のタスク用にコアを予約する必要があるかどうかを検討してください。 |
| `/R:n`                | 最初の試行でコピーに失敗したファイルの最大再試行回数を指定することで、RoboCopy 実行の速度を向上させることができます。 n = この RoboCopy 実行でファイルが完全にコピーに失敗するまでの最大再試行回数。 このスイッチは、より多くの RoboCopy が実行されることが既に明らかであるシナリオで最適に動作します。 それでもこの実行でファイルのコピーが失敗した場合は、次の RoboCopy ジョブで再試行されます。 多くの場合、使用中であることまたはタイムアウトの問題が原因で失敗したファイルは、最終的にこの方法でコピーされる可能性があります。 |
| `/W:n`                | このスイッチでは、最後の試行時に正常にコピーされなかったファイルのコピーを試行する前に、RoboCopy が待機する時間を指定します。 n = 再試行を待機する秒数。 `/W:n` は、多くの場合、`/R:n` と共に使用されます。 |
| `/B`                  | バックアップ アプリケーションが使用するのと同じモードで RoboCopy を実行します。 現在のユーザーがアクセス許可を持っていないファイルを、RoboCopy によって移動できます。 |
| `/MIR`                | "*ソースをターゲットにミラーリング*" すると、RoboCopy では、ソースとターゲット間の差分をコピーするだけですみます。 空のサブディレクトリがコピーされます。 変更された、またはターゲットに存在しない項目 (ファイルまたはフォルダー) がコピーされます。 ターゲットに存在する一方でソースには存在しない項目は、ターゲットから消去 (削除) されます。 このスイッチを使用する場合は、ソースとターゲットのフォルダー構造を正確に一致させる必要があります。 "一致" とは、正しいソースおよびフォルダー レベルから、ターゲットの一致するフォルダー レベルにコピーすることを意味します。 その場合にのみ、"キャッチ アップ" コピーを正常に実行することができます。 ソースとターゲットが一致しない場合、`/MIR` を使用すると、大規模な削除と再コピーが行われます。 |
| `/IT`                 | 特定のミラー シナリオで、忠実性が維持されることを保証します。 </br>"*例*" - たとえば、Robocopy を 2 回実行する間に、ファイルで ACL の変更と属性の更新があった場合、"*非表示*" とマークされます。 /IT を使用しない場合、ACL の変更は Robocopy で見逃され、ターゲットの場所に転送されない可能性があります。 |
|`/COPY:[copyflags]`    | ファイル コピーの忠実性 (指定されていない場合の既定値は `/COPY:DAT`)、コピー フラグ: `D` = データ、`A` = 属性、`T` = タイムスタンプ、`S` = セキュリティ = NTFS ACL、`O` = 所有者情報、`U` = 監査情報。<u></u> 監査情報を Azure ファイル共有に格納することはできません。 |
| `/DCOPY:[copyflags]`  | ディレクトリのコピーの忠実性 (指定されていない場合の既定値は `/DCOPY:DA`)、コピー フラグ: `D` = データ、`A` = 属性、`T` = タイムスタンプ。 |
| `/NP`                 | 各ファイルとフォルダーのコピーの進行状況は表示されません。 進行状況を表示すると、コピーのパフォーマンスが大幅に低下します。 |
| `/NFL`                | ファイル名をログに記録しないことを指定します。 コピーのパフォーマンスを向上させます。 |
| `/NDL`                | ディレクトリ名をログに記録しないことを指定します。 コピーのパフォーマンスを向上させます。 |
| `/UNILOG:<file name>` | 状態を UNICODE 形式でログ ファイルに出力します (既存のログを上書きします)。 |
| `/LFSM`               | **階層型ストレージを持つターゲットの場合のみ** </br>/LFSM を使用すると、"低空き領域モード" で動作するよう RoboCopy に要求します。 このスイッチは、RoboCopy が完了する前にローカル容量が不足する可能性がある、階層型ストレージを持つターゲットにのみ有効です。 このスイッチは、Azure File Sync のクラウドの階層化が有効なターゲットで使用するために特別に追加されました。 これは、Azure File Sync とは別に使用できます。このモードでは、ファイルのコピーによって宛先ボリュームの空き領域が "床" 値よりも小さくなるたびに、RoboCopy が一時停止します。 この値は `/LFSM:n` のフラグ形式で指定できます。 パラメーター `n` は、ベース 2: `nKB`、`nMB`、または`nGB` で指定します。 明示的な床値を示さずに `/LFSM` を指定した場合、床は宛先ボリュームのサイズの 10% に設定されます。 低空き領域モードは、/MT、/EFSRAW、/B、および/ZB では利用できません。 |
| `/Z`                  | **慎重に使用** </br>再起動モードでファイルをコピーします。ネットワーク環境が不安定な場合にのみ、使用することをお勧めします。 このオプションでは、追加のログ記録が原因で、コピーのパフォーマンスが大幅に低下します。 |
| `/ZB`                 | **慎重に使用** </br>再起動モードが使用されます。 アクセスが拒否された場合、このオプションではバックアップ モードが使用されます。 このオプションでは、チェックポイント処理が原因で、コピーのパフォーマンスが大幅に低下します。 |
   