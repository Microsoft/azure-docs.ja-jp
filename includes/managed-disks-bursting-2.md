---
title: インクルード ファイル
description: インクルード ファイル
services: virtual-machines
author: albecker1
ms.service: virtual-machines
ms.topic: include
ms.date: 04/27/2020
ms.author: albecker1
ms.custom: include file
ms.openlocfilehash: 801f0f03b49d20c84a4531bd0daad7630a0ed01d
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/17/2021
ms.locfileid: "100585067"
---
## <a name="common-scenarios"></a>一般的なシナリオ
バースティングから大きなメリットが得られるシナリオを次に示します。
- **起動時間の短縮** - バースティングを使用すると、インスタンスの起動速度が大幅に向上します。 たとえば、Premium が有効な VM の既定の OS ディスクは P4 ディスクです。この場合、プロビジョニングされるパフォーマンスは最大 120 IOPS および 25 MB/秒です。 バースティングを使用すると、P4 で最大 3,500 IOPS および 170 MB/秒を実現して、起動時間を 6 分の 1 に短縮できます。
- **バッチ ジョブの処理** - 一部のアプリケーションのワークロードは周期的で、ほとんどの期間にベースライン パフォーマンスを必要とし、短い期間だけ、より高いパフォーマンスを必要とします。 この例としては、少量のディスク トラフィックを必要とするトランザクションを毎日処理する会計プログラムが挙げられます。 月末には、照合を行うレポートではるかに大量のディスク トラフィックを必要とします。
- **トラフィックの急増への備え** - Web サーバーとそのアプリケーションへのトラフィックは、いつでも急増する可能性があります。 バースティングを使用して Web サーバーが VM またはディスクによってサポートされていると、そのサーバーはトラフィックの急増により適切に対応できます。 

## <a name="bursting-flow"></a>バースティングのフロー
バースティングのクレジット システムは、仮想マシン レベルとディスク レベルの両方で同様に適用されます。 リソース (VM またはディスク) は、クレジットが完全にストックされた状態で開始されます。 これらのクレジットを使用すると、最大バースト率で 30 分のバーストが可能です。 バースティング クレジットは、リソースがパフォーマンス ディスク ストレージの制限下で実行されている場合に蓄積されます。 リソースで使用されているすべての IOPS と MB/秒がパフォーマンスの制限を下回っている場合、クレジットの累積が開始されます。 バースティングに使用するクレジットがリソースで蓄積されているときに、ワークロードで追加のパフォーマンスが必要になったら、リソースでそれらのクレジットを使用し、パフォーマンスの制限を超えて、需要を満たすのに必要なディスク IO パフォーマンスを実現できます。



![バースティング バケットの図](media/managed-disks-bursting/bucket-diagram.jpg)

30 分のバースティングの使用方法については、ユーザーに完全に委ねられています。 30 分間連続で使用したり、1 日を通して散発的に使用したりできます。 製品をデプロイしたとき、クレジットがいっぱいの状態で使用でき、クレジットを使い尽くすと、クレジットが再びいっぱいに蓄積されるまで 1 日もかかりません。 バースティングのクレジットは自分の裁量で蓄積および消費でき、30 分のバケットを再びいっぱいにしなくても、バーストが可能です。 バーストの蓄積に関する注意点の 1 つは、リソースごとに差異があることです。これは、パフォーマンス量を下回る未使用の IOPS と MB/秒に基づくためです。 つまり、ベースライン パフォーマンスが高い製品では、ベースライン パフォーマンスが低い製品よりも早くバースティング量が蓄積します。 たとえば、アクティビティがない P1 ディスクのアイドル状態では毎秒 120 IOPS の蓄積、一方アクティビティがない P20 ディスクのアイドル状態では毎秒 2,300 IOPS の蓄積になります。

## <a name="bursting-states"></a>バースティングの状態
バースティングが有効になっているリソースには、3 つの状態があります。
- **蓄積中** - リソースの IO トラフィックの使用量がパフォーマンス ターゲットを下回っています。 IOPS と MB/秒のバースティング クレジットの累積は、別々に行われます。 リソースでは、IOPS クレジットを蓄積しながら MB/秒クレジットを消費したり、またはその逆を行ったりできます。
- **バースティング中** - リソースのトラフィックの使用量がパフォーマンス ターゲットを上回っています。 バースト トラフィックは、IOPS または帯域幅から別々にクレジットを消費します。
- **一定** - リソースのトラフィックがパフォーマンス ターゲットと正確に一致しています。

## <a name="examples-of-bursting"></a>バーストの例

次の例では、さまざまな VM とディスクの組み合わせでバーストがどのように機能するかを示しています。 例を理解しやすいように、MB/秒に焦点を当てていますが、同じロジックが IOPS に別途適用されます。

### <a name="non-burstable-virtual-machine-with-burstable-disks"></a>バースト可能なディスクを備えたバースト不可能な仮想マシン
**VM とディスクの組み合わせ:** 
- Standard_D8as_v4 
    - キャッシュなしの MB/秒:192
- P4 OS ディスク
    - プロビジョニングされる MB/秒:25
    - 最大バースト MB/秒:170 
- 2 つの P10 データ ディスク 
    - プロビジョニングされる MB/秒:100
    - 最大バースト MB/秒:170

 VM が起動すると、OS ディスクからデータが取得されます。 OS ディスクは起動されている VM の一部であるため、この OS ディスクのバースト クレジットはいっぱいになります。 これらのクレジットを使用して、170 MB/秒で OS ディスクの起動をバーストできます。

![VM は 192 MB のスループットの要求を OS ディスクに送信し、OS ディスクは 170 MB/秒のデータで応答します。](media/managed-disks-bursting/nonbursting-vm-busting-disk/nonbusting-vm-bursting-disk-startup.jpg)

起動が完了すると、VM 上でアプリケーションが実行され、重要度の低いワークロードが発生します。 このワークロードでは、すべてのディスクに均等に分散される 15 MB/秒が必要です。

![アプリケーションは 15 MB/秒のスループットの要求を VM に送信し、VM は要求を受け取り、各ディスクに 5 MB/秒の要求を送信します。各ディスクは 5 MB/秒を返し、VM は 15 MB/秒をアプリケーションに返します。](media/managed-disks-bursting/nonbursting-vm-busting-disk/nonbusting-vm-bursting-disk-idling.jpg)

その後、アプリケーションは 192 MB/秒を必要とするバッチ ジョブを処理する必要があります。 2 MB/秒が OS ディスクによって使用され、残りはデータ ディスク間で均等に分割されます。

![アプリケーションは 192 MB/秒のスループットの要求を VM に送信し、VM は要求を受け取り、要求を一括でデータ ディスクに送信し (それぞれ 95 MB/秒)、2 MB/秒を OS ディスクに送信します。データ ディスクは需要を満たすためにバーストし、すべてのディスクが要求されたスループットを VM に返し、そこからアプリケーションに返されます。](media/managed-disks-bursting/nonbursting-vm-busting-disk/nonbusting-vm-bursting-disk-bursting.jpg)

### <a name="burstable-virtual-machine-with-non-burstable-disks"></a>バースト不可能なディスクを備えたバースト可能な仮想マシン
**VM とディスクの組み合わせ:** 
- Standard_L8s_v2 
    - キャッシュなしの MB/秒:160
    - 最大バースト MB/秒:1,280
- P50 OS ディスク
    - プロビジョニングされる MB/秒:250 
- 2 つの P10 データ ディスク 
    - プロビジョニングされる MB/秒:250

 最初の起動の後、VM 上でアプリケーションが実行され、重要度の低いワークロードが発生します。 このワークロードでは、すべてのディスクに均等に分散される 30 MB/秒が必要です。
![アプリケーションは 30 MB/秒のスループットの要求を VM に送信し、VM は要求を受け取り、各ディスクに 10 MB/秒の要求を送信します。各ディスクは 10 MB/秒を返し、VM は 30 MB/秒をアプリケーションに返します。](media/managed-disks-bursting/bursting-vm-nonbursting-disk/burst-vm-nonbursting-disk-normal.jpg)

その後、アプリケーションは 600 MB/秒を必要とするバッチ ジョブを処理する必要があります。 この需要を満たすために Standard_L8s_v2 によってバーストが行われ、そのディスクへの要求が P50 ディスクに均等に分散されます。

![アプリケーションは 600 MB/秒のスループットの要求を VM に送信し、VM はバーストを受けて要求を受け取り、各ディスクに 200 MB/秒の要求を送信します。各ディスクは 200 MB/秒を返し、VM はバーストを実行して 600 MB/秒をアプリケーションに返します。](media/managed-disks-bursting/bursting-vm-nonbursting-disk/burst-vm-nonbursting-disk-bursting.jpg)
### <a name="burstable-virtual-machine-with-burstable-disks"></a>バースト可能なディスクを備えたバースト可能な仮想マシン
**VM とディスクの組み合わせ:** 
- Standard_L8s_v2 
    - キャッシュなしの MB/秒:160
    - 最大バースト MB/秒:1,280
- P4 OS ディスク
    - プロビジョニングされる MB/秒:25
    - 最大バースト MB/秒:170 
- 2 つの P4 データ ディスク 
    - プロビジョニングされる MB/秒:25
    - 最大バースト MB/秒:170 

VM が起動すると、バーストが実行されて OS ディスクに対して 1,280 MB/秒のバースト制限が要求され、OS ディスクは 170 MB/秒のバースト パフォーマンスで応答します。

![VM は起動時にバーストを実行して 1280 MB/秒の要求を OS ディスクに送信し、OS ディスクはバーストを実行して 1280 MB/秒を返します。](media/managed-disks-bursting/bursting-vm-bursting-disk/burst-vm-burst-disk-startup.jpg)

起動後に、重要度の低いワークロードを持つアプリケーションを起動してください。 このアプリケーションでは、すべてのディスクに均等に分散される 15 MB/秒が必要です。

![アプリケーションは 15 MB/秒のスループットの要求を VM に送信し、VM は要求を受け取り、各ディスクに 5 MB/秒の要求を送信します。各ディスクは 5 MB/秒を返し、VM は 15 MB/秒をアプリケーションに返します。](media/managed-disks-bursting/bursting-vm-bursting-disk/burst-vm-burst-disk-idling.jpg)

その後、アプリケーションは 360 MB/秒を必要とするバッチ ジョブを処理する必要があります。 この需要を満たすために Standard_L8s_v2 によってバーストが行われて、要求が行われます。 OS ディスクに必要とされるのは 20 MB/秒のみです。 残りの 340 MB/秒は、バーストする P4 データ ディスクによって処理されます。

![アプリケーションは 360 MB/秒のスループットの要求を VM に送信し、VM はバーストを受けて要求を取得し、各データ ディスクに 170 MB/秒と 20 MB/秒の要求を OS ディスクから送信します。各ディスクは、要求された MB/秒を返し、VM はバーストを実行して 360 MB/秒をアプリケーションに返します。](media/managed-disks-bursting/bursting-vm-bursting-disk/burst-vm-burst-disk-bursting.jpg)