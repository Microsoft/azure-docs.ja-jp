---
author: amitbapat
ms.service: key-vault
ms.topic: include
ms.date: 03/09/2021
ms.author: ambapat
ms.openlocfilehash: d934d40cad5f4eec929cfd273b6e30ea291e48d5
ms.sourcegitcommit: 225e4b45844e845bc41d5c043587a61e6b6ce5ae
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2021
ms.locfileid: "103010960"
---
Azure Key Vault サービスでは、コンテナーとマネージド HSM という 2 つのリソースの種類がサポートされています。 次の 2 つのセクションでは、それぞれのサービスの制限について説明します。

### <a name="resource-type-vault"></a>リソースの種類: コンテナー

このセクションでは、リソースの種類 `vaults` のサービスの制限について説明します。

#### <a name="key-transactions-maximum-transactions-allowed-in-10-seconds-per-vault-per-regionsup1sup"></a>キーのトランザクション (リージョンあたりのコンテナーごとに、10 秒間に許可される最大トランザクション数<sup>1</sup>):

|キーの種類|HSM キー<br>CREATE キー|HSM キー<br>その他すべてのトランザクション|ソフトウェア キー<br>CREATE キー|ソフトウェア キー<br>その他すべてのトランザクション|
|:---|---:|---:|---:|---:|
|RSA 2,048 ビット|5|1,000|10|2,000|
|RSA 3,072 ビット|5|250|10|500|
|RSA 4,096 ビット|5|125|10|250|
|ECC P-256|5|1,000|10|2,000|
|ECC P-384|5|1,000|10|2,000|
|ECC P-521|5|1,000|10|2,000|
|ECC SECP256K1|5|1,000|10|2,000|
||||||

> [!NOTE]
> 前の表を見ると、RSA 2,048 ビット ソフトウェア キーでは、10 秒間に 2,000 件の GET トランザクションが許可されます。 RSA 2,048 ビット HSM キーでは、10 秒間に 1,000 件の GET トランザクションが許可されます。
>
> スロットルのしきい値は重み付けされ、合計に対して適用されます。 たとえば、前の表で示されているように、RSA HSM キーで GET 操作を実行する場合に 4,096 ビット キーを使用すると、2,048 ビット キーと比較して 8 倍のコストがかかります。 これは、1,000/125 = 8 から導き出されます。
>
> 10 秒間に、Azure Key Vault クライアントは、`429` のスロットル HTTP 状態コードが発生するまで、次の操作のいずれか *1 つのみ* を実行できます。
> - 2,000 件の RSA 2,048 ビット ソフトウェア キー GET トランザクション
> - 1,000 件の RSA 2,048 ビット HSM キー GET トランザクション
> - 125 件の RSA 4,096 ビット HSM キー GET トランザクション
> - 124 件の RSA 4,096 ビット HSM キー GET トランザクションおよび 8 件の RSA 2,048 ビット HSM キー GET トランザクション

#### <a name="secrets-managed-storage-account-keys-and-vault-transactions"></a>シークレット、管理ストレージ アカウント キー、およびコンテナーのトランザクション:

| トランザクションの種類 | リージョンあたりのコンテナーごとに、10 秒間に許可される最大トランザクション数<sup>1</sup> |
| --- | --- |
| すべてのトランザクション |2,000 |

これらの制限を超えたときにスロットルを処理する方法については、「[Azure Key Vault のスロットル ガイダンス](../articles/key-vault/general/overview-throttling.md)」をご覧ください。

<sup>1</sup> すべてのトランザクションの種類に適用されるサブスクリプション レベルの制限は、キー コンテナーの制限の 5 倍です。 たとえば、1 つのサブスクリプションで許可される HSM - その他のトランザクションの最大数は、10 秒間に 5,000 トランザクションです。

#### <a name="azure-private-link-integration"></a>Azure Private Link の統合

> [!NOTE]
> プライベート エンドポイントが有効なキー コンテナーのサブスクリプションあたりの上限は、調整可能です。 以下に記載した上限は、あくまで既定値です。 サービスに適用される上限の引き上げをご希望の場合には、akv-privatelink@microsoft.com まで電子メールをお送りください。 いただいたご依頼は、ケースごとの事情を考慮して承認します。

| リソース | 制限 |
| -------- | -----:|
| キー コンテナーあたりのプライベート エンドポイント | 64 |
| サブスクリプションあたりのプライベート エンドポイントのあるキー コンテナー | 400 |

### <a name="resource-type-managed-hsm-preview"></a>リソースの種類: マネージド HSM (プレビュー)

このセクションでは、リソースの種類 `managed HSM` のサービスの制限について説明します。

#### <a name="object-limits"></a>オブジェクト制限

|アイテム|制限|
|----|------:|
リージョンごとのサブスクリプションあたりの HSM インスタンスの数|1 (プレビュー期間中)
HSM プールあたりのキー数|5000
キーあたりのバージョン数|100
HSM あたりのカスタム ロール定義の数|50
HSM スコープでのロールの割り当て数|50
個々のキー スコープでのロールの割り当て数|10
|||

#### <a name="transaction-limits-for-administrative-operations-number-of-operations-per-second-per-hsm-instance"></a>管理操作のトランザクション制限 (HSM インスタンスごとの 1 秒あたりの操作数)
|操作 |1 秒あたりの操作数|
|----|------:|
すべての RBAC 操作<br/>(ロールの定義とロールの割り当てに関するすべての CRUD 操作が含まれます)|5
HSM の完全なバックアップまたは復元<br/>(HSM インスタンスごとに 1 つの同時バックアップまたは復元操作のみがサポートされています)|1

#### <a name="transaction-limits-for-cryptographic-operations-number-of-operations-per-second-per-hsm-instance"></a>暗号化操作のトランザクション制限 (HSM インスタンスごとの 1 秒あたりの操作数)

- 各マネージド HSM インスタンスは、負荷分散された 3 つの HSM パーティションを構成します。 スループット制限は、各パーティションに割り当てられた、基になるハードウェア容量の機能です。 下の表は、使用可能なパーティションが少なくとも 1 つある最大スループットを示しています。 3 つすべてのパーティションが使用可能な場合、実際のスループットは最大 3 倍になります。
- スループット制限は、最大スループットを実現するために 1 つのキーが使用されていることを前提としています。 たとえば、1 つの RSA-2048 キーが使用されている場合、最大スループットは 1100 回の署名操作になります。 それぞれ 1 秒あたり 1 トランザクションの 1100 個の異なるキーを使用する場合は、同じスループットを実現することはできません。

##### <a name="rsa-key-operations-number-of-operations-per-second-per-hsm-instance"></a>RSA キー操作 (HSM インスタンスごとの 1 秒あたりの操作数)

|操作|2048 ビット|3072 ビット|4096 ビット|
|--|--:|--:|--:|
キーの作成|1| 1| 1
キーの削除 (論理的な削除)|10|10|10 
キーの消去|10|10|10 
キーのバックアップ|10|10|10 
キーの復元|10|10|10 
キー情報の取得|1100|1100|1100
Encrypt|10000|10000|6000
復号化|1100|360|160
ラップ|10000|10000|6000
ラップ解除|1100|360|160
署名|1100|360|160
確認|10000|10000|6000
|||||

##### <a name="ec-key-operations-number-of-operations-per-second-per-hsm-instance"></a>EC キー操作 (HSM インスタンスごとの 1 秒あたりの操作数)

この表は、各曲線の種類に対する 1 秒あたりの操作数を示しています。

|操作|P-256|P-256K|P-384|P-521|
|---|---:|---:|---:|---:|
キーの作成| 1| 1| 1| 1
キーの削除 (論理的な削除)|10|10|10|10
キーの消去|10|10|10|10
キーのバックアップ|10|10|10|10
キーの復元|10|10|10|10
キー情報の取得|1100|1100|1100|1100
署名|260|260|165|56
確認|130|130|82|28
||||||


##### <a name="aes-key-operations-number-of-operations-per-second-per-hsm-instance"></a>AES キー操作 (HSM インスタンスごとの 1 秒あたりの操作数)
- 暗号化と復号化の操作では、4 KB のパケット サイズが想定されます。
- 暗号化または復号化のスループット制限は、AES-CBC および AES GCM アルゴリズムに適用されます。
- ラップまたはラップ解除のスループット制限は、AES-KW アルゴリズムに適用されます。

|操作|128 ビット|192 ビット|256 ビット|
|--|--:|--:|--:|
キーの作成|1| 1| 1
キーの削除 (論理的な削除)|10|10|10
キーの消去|10|10|10
キーのバックアップ|10|10|10
キーの復元|10|10|10
キー情報の取得|1100|1100|1100
Encrypt|8000|8000 |8000 
復号化|8000|8000|8000
ラップ|9000|9000|9000
ラップ解除|9000|9000|9000

