ほとんどの場合、認証エラーは、構成設定が正しくないか、一貫性がないことが原因で発生します。 ここでは、推奨される確認事項について説明します。

* **[保存]** ボタンを見逃していないことを確認してください。 見逃すことはよくあります。ポータル ページに表示された正しい値を見ているだけで、実際は Azure 環境や Azure AD アプリケーションに保存されていない状況です。
* Azure Portal の **[アプリケーション設定]** ブレードで構成した設定については、設定の入力時に正しい API アプリまたは Web アプリが選択されていたことを確認します。  設定が **[接続文字列]** ではなく、**[アプリケーション設定]** に入力されていることも確認します (この 2 つのセクションの形式が似ているためです)。
* JavaScript フロント エンドに対する認証の場合、マニフェストを改めてダウンロードし、`oauth2AllowImplicitFlow` が `true` に正常に変更されたことを確認します。
* URL の構成には常に HTTPS を使用したことを確認します。
  
  * プロジェクト コード
  * CORS
  * 各 API アプリと Web アプリの Azure 環境アプリケーション設定
  * Azure AD アプリケーション設定
    
    API アプリの URL をポータルからコピーする場合、`http://` になっていることが多く、手動で `https://`に変更する必要があります。
* コードを変更した場合は、正常にデプロイされたことを確認します。 たとえば、複数のプロジェクトがあるソリューションの場合、プロジェクトのコードを変更し、変更をデプロイするときに誤って別のコードを選択することがあります。
* ブラウザーで HTTP URL ではなく HTTPS URL にアクセスしていることを確認します。 Visual Studio の既定では、HTTP URL でプロファイルが発行され、プロジェクトのデプロイ後にブラウザーで開くときに HTTP が使用されます。
* JavaScript フロント エンドに対する認証の場合、JavaScript コードが呼び出す API アプリで CORS が正しく構成されていることを確認します。 問題が CORS 関連である可能性がある場合は、許可される配信元 URL として "*" を試してみます。 
* JavaScript フロント エンドの場合、ブラウザーの Developer Tools の [Console] タブを開いて詳細なエラー情報を表示し、[Network] の HTTP 要求を確認します。 ただし、[Console] のエラー メッセージは誤解を招く内容の場合があります。 CORS のエラーを示すメッセージが表示されていても、実際の問題は認証の場合があります。 これを確認するには、認証を一時的に無効にしてアプリを実行します。
* .NET API アプリの場合、[customErrors モードを Off](../articles/app-service-web/web-sites-dotnet-troubleshoot-visual-studio.md#remoteview) に設定して、可能な限り多くの情報をエラー メッセージで得られるようにします。
* .NET API アプリの場合、[リモート デバッグ セッション](../articles/app-service-web/web-sites-dotnet-troubleshoot-visual-studio.md#remotedebug)を開始して、ADAL を使用してベアラー トークンを取得するコード、または予測されるサービス プリンシパル ID に対して要求を確認するコードに渡される変数の値を確認します。 コードはさまざまなソースの構成値を選択することができるので、意外な結果になることがあります。 たとえば、Azure App Service Environment 設定を構成するときに、`ida:ClientID` を間違って `ida:ClientId` と入力すると、Azure App Service 設定を無視して Web.config ファイルが検索され、`ida:ClientId` の値が取得される可能性があります。 
* 通常の Internet Explorer ウィンドウでうまくいかない場合は、既存のログインが妨げになっている可能性があるので、InPrivate を試し、Chrome または Firefox を使ってみてください。



<!--HONumber=Nov16_HO3-->


